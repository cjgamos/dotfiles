"use strict";(self.webpackChunksolflare=self.webpackChunksolflare||[]).push([["NftPage"],{"./src/extension/pages/Nft/index.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return Hn}});var r=n("./node_modules/@material-ui/core/esm/Grid/Grid.js"),o=n("./node_modules/@material-ui/core/esm/Button/Button.js"),a=n("./node_modules/@material-ui/core/esm/Box/Box.js"),i=n("./node_modules/@material-ui/core/esm/IconButton/IconButton.js"),c=n("./node_modules/@material-ui/core/esm/Typography/Typography.js"),l=n("./node_modules/@material-ui/styles/esm/withTheme/withTheme.js"),u=n("./node_modules/react/index.js"),s=n("./node_modules/react-router/esm/react-router.js"),f=n("./node_modules/react-redux/es/index.js"),p=n("./src/common/components/withWallet/index.js"),m=n("./src/actions/account.js"),d=n("./src/actions/nft.js"),y=n("./src/actions/pfp.js"),b=n("./node_modules/lodash/lodash.js"),h=n("./node_modules/reselect/es/index.js"),v=n("./src/selectors/data.js"),g=n("./src/common/utils/selectors.js"),w=n("./src/selectors/list.js"),E=n("./src/selectors/config.js"),j=n("./src/common/utils/nftGrouping.js"),_=["UNKNOWN_COLLECTION"];function k(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z,C,T=(0,g.l)(w.H2,v.Tz,!0),R=(0,h.P1)(T,(function(e){return S(S({},e),{},{data:e.data.filter((function(e){return Boolean(e.nft)})).map(j.y).sort((function(e,t){return e.nft.name.localeCompare(t.nft.name)}))})})),A=(0,h.P1)(R,(function(e){var t=(0,b.groupBy)(e.data,"group"),n=t.UNKNOWN_COLLECTION,r=void 0===n?[]:n,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,_),a=Object.keys(o).map((function(e){return{name:o[e][0].groupName||e,tokens:o[e]}})),i=a.filter((function(e){return 1===e.tokens.length})).map((function(e){return e.tokens[0]}));return S(S({},e),{},{grouped:a.filter((function(e){return e.tokens.length>1})),ungrouped:[].concat(k(r),k(i))})})),N=(0,h.P1)(w.H2,v.Tz,(function(e,t){return S(S({},e),{},{data:(0,b.uniq)((0,b.map)(e.data,(function(e){var n;return null===(n=t[e])||void 0===n?void 0:n.mint})))})})),M=(0,h.zB)({nfts:A,nftMintConfig:E.p8,mints:N}),D=n("./node_modules/@material-ui/core/esm/Divider/Divider.js"),I=n("./node_modules/@material-ui/icons/esm/ArrowBack.js"),B=n("./node_modules/@material-ui/core/esm/Card/Card.js"),F=n("./node_modules/@material-ui/core/esm/CardActionArea/CardActionArea.js"),H=n("./node_modules/@material-ui/core/esm/CardContent/CardContent.js"),z=n("./node_modules/@material-ui/core/esm/CardMedia/CardMedia.js"),W=n("./node_modules/@material-ui/core/esm/styles/withStyles.js"),L=n("./node_modules/prop-types/index.js"),K=n.n(L),G=n("./src/common/utils/getResizedImageUrl.js");function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}function X(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}var J,Q,ee,te,ne,re=(0,W.Z)((function(e){return{card:{padding:0,overflow:"visible"},cardActionArea:{padding:0,position:"relative","&:hover":{"& .MuiCardContent-root":{display:"flex"}}},media:{height:0,borderRadius:8,paddingTop:"100%",position:"relative"},mediaCounter:{position:"absolute",padding:"6px 12px",right:8,bottom:8,lineHeight:"20px",backgroundColor:e.dark?e.palette.common.white70:e.palette.common.black70,color:e.dark?e.palette.common.black:e.palette.common.white,borderRadius:8},content:{display:"none",background:e.dark?e.palette.common.black70:e.palette.common.white70,position:"absolute",inset:0,flexDirection:"column",alignItems:"center",justifyContent:"center",backdropFilter:"blur(5px)",textAlign:"center"},categoryText:{textTransform:"capitalize",marginLeft:4}}}))((C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(s,e);var t,n,o,i,l=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Y(o);if(i){var n=Y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return X(this,e)});function s(){return q(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e,t,n,o,i,l=this.props,s=l.token,f=l.classes,p=l.onClick,m=Boolean(null===(e=s.nft)||void 0===e?void 0:e.metadata);return u.createElement(r.Z,{item:!0,xs:6},u.createElement(B.Z,{elevation:2,className:f.card},u.createElement(a.Z,{className:"js-theme-snow-roof"}),u.createElement(F.Z,{className:f.cardActionArea,onClick:function(){var e;return null!==(e=s.nft)&&void 0!==e&&e.metadata?p(s):null}},s.nft.image?u.createElement(z.Z,{className:f.media,image:(0,G.N)(s.nft.image,{width:300,height:300,fit:"contain",quality:75})},(null===(t=s.tokenAmount)||void 0===t?void 0:t.uiAmount)>1&&u.createElement(a.Z,{className:f.mediaCounter,display:"flex",alignItems:"center",justifyContent:"center"},null===(n=s.tokenAmount)||void 0===n?void 0:n.uiAmount)):u.createElement(a.Z,{className:f.media}),m&&u.createElement(H.Z,{className:f.content},u.createElement(c.Z,{variant:"body1"},s.nft.name||"..."),u.createElement(c.Z,{variant:"subtitle2",component:"span",color:"textSecondary",className:f.categoryText},null===(o=s.nft)||void 0===o||null===(i=o.properties)||void 0===i?void 0:i.category)))))}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(u.Component),J=C,Q="propTypes",ee={token:K().object,classes:K().object,onClick:K().func},Q in J?Object.defineProperty(J,Q,{value:ee,enumerable:!0,configurable:!0,writable:!0}):J[Q]=ee,Z=C))||Z,oe=re,ae=n("./node_modules/react-i18next/dist/es/withTranslation.js");function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ue(e,t)}function se(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}var pe,me,de=(0,ae.Z)()(te=(0,W.Z)((function(e){return{card:{padding:0,overflow:"visible",boxShadow:e.dark?"0 2px 15px rgba(0,0,0, .1), 0 1px 7px rgba(0,0,0, .5)":"0 2px 15px rgba(0,0,0, .05), 0 1px 7px rgba(0,0,0, .1)","&:hover":{"&:before":{transform:"rotate(-4.5deg) translate(-2px, -3px)"},"&:after":{transform:"rotate(3deg) translate(5px, 6px)"}},"&:before":{content:'" "',position:"absolute",left:0,right:0,background:e.palette.background.paperBackground,zIndex:-1,borderRadius:8,top:0,bottom:0,transform:"rotate(-4deg)",transition:"all .25s"},"&:after":{content:'" "',position:"absolute",left:0,right:0,background:e.palette.background.paperBackground,zIndex:-2,borderRadius:8,top:0,bottom:0,transform:"rotate(2deg) translate(3px, 4px)",transition:"all .25s"}},cardActionArea:{padding:0,position:"relative",overflow:"hidden",borderRadius:8,"&:hover":{"& .MuiCardContent-root":{display:"flex"}}},media:{height:0,borderRadius:8,paddingTop:"100%",position:"relative"},mediaCounter:{position:"absolute",padding:"6px 12px",right:8,bottom:8,lineHeight:"20px",backgroundColor:e.dark?e.palette.common.white70:e.palette.common.black70,color:e.dark?e.palette.common.black:e.palette.common.white},content:{display:"none",background:e.dark?e.palette.common.black70:e.palette.common.white70,position:"absolute",inset:0,flexDirection:"column",alignItems:"center",justifyContent:"center",backdropFilter:"blur(5px)",textAlign:"center"},categoryText:{textTransform:"capitalize",marginLeft:4}}}))((ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(s,e);var t,n,o,i,l=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fe(o);if(i){var n=fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return se(this,e)});function s(){return ce(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=this.props,t=e.group,n=e.classes,o=e.onClick,i=e.t;return u.createElement(r.Z,{item:!0,xs:6},u.createElement(B.Z,{elevation:2,className:n.card},u.createElement(a.Z,{className:"js-theme-snow-roof"}),u.createElement(F.Z,{className:n.cardActionArea,onClick:function(){return o(t)}},t.tokens[0].nft.image?u.createElement(z.Z,{className:n.media,image:(0,G.N)(t.tokens[0].nft.image,{width:300,height:300,fit:"contain",quality:75})}):u.createElement(a.Z,{className:n.media}),u.createElement(H.Z,{className:n.content},u.createElement(c.Z,{variant:"body1"},t.name||"..."),u.createElement(c.Z,{variant:"subtitle2",component:"span",color:"textSecondary",className:n.categoryText},i("nfts_amount_nfts",{amount:t.tokens.length}))))))}}])&&le(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(u.Component),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ne,"propTypes",{t:K().func,group:K().object,classes:K().object,onClick:K().func}),te=ne))||te)||te;function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ve(e,t)}function ge(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return we(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e,ke,Oe=(0,ae.Z)()((me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(f,e);var t,n,i,l,s=(i=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ee(i);if(l){var n=Ee(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ge(this,e)});function f(){var e;be(this,f);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return je(we(e=s.call.apply(s,[this].concat(n))),"state",{group:null}),je(we(e),"onGroupClick",(function(t){window.scrollTo(0,0),e.setState({group:t})})),je(we(e),"renderGroup",(function(){var t=e.props,n=t.onClick,i=t.t;return u.createElement(u.Fragment,null,u.createElement(a.Z,{height:48,display:"flex",alignItems:"center",mb:2},u.createElement(o.Z,{color:"primary",variant:"text",onClick:function(){return e.onGroupClick(null)},startIcon:u.createElement(I.Z,null)},i("action_back")),u.createElement(a.Z,{width:30,pr:2},u.createElement(D.Z,{light:!0})),u.createElement(c.Z,{variant:"body1",color:"textSecondary",noWrap:!0,style:{flexShrink:0}},e.state.group.name),u.createElement(a.Z,{width:"100%",pl:2},u.createElement(D.Z,{light:!0}))),u.createElement(r.Z,{container:!0,spacing:4},e.state.group.tokens.map((function(e){return u.createElement(oe,{onClick:n,token:e,key:"token-".concat(e.pubkey)})}))))})),e}return t=f,(n=[{key:"componentDidUpdate",value:function(e,t,n){var r,o=this;this.state.group&&!(0,b.isEqual)(e.nfts.grouped,this.props.nfts.grouped)&&this.setState({group:null!==(r=this.props.nfts.grouped.find((function(e){return e.name===o.state.group.name})))&&void 0!==r?r:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.nfts,o=t.onClick;return this.state.group?this.renderGroup():u.createElement(u.Fragment,null,u.createElement(a.Z,{height:48,display:"flex",alignItems:"center",justifyContent:"stretch",mb:2},u.createElement(D.Z,{light:!0,style:{flex:1}})),u.createElement(r.Z,{container:!0,spacing:4},n.grouped.map((function(t){return u.createElement(de,{onClick:e.onGroupClick,group:t,key:"group-".concat(t.name)})})),n.ungrouped.map((function(e){return u.createElement(oe,{onClick:o,token:e,key:"token-".concat(e.pubkey)})}))),u.createElement(a.Z,{my:2}))}}])&&he(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(u.Component),je(me,"propTypes",{t:K().func,nfts:K().object,onClick:K().func}),pe=me))||pe,Pe=n("./node_modules/@material-ui/core/esm/Menu/Menu.js"),Se=n("./node_modules/@material-ui/core/esm/MenuItem/MenuItem.js"),xe=n("./node_modules/@material-ui/lab/esm/Skeleton/Skeleton.js"),Ze=n("./node_modules/@material-ui/core/esm/Tooltip/Tooltip.js"),Ce=n("./src/common/components/Modal/index.js"),Te=n("./src/common/utils/truncateMiddle.js"),Re=n("./src/common/components/Avatar/index.js");function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t){return De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},De(e,t)}function Ie(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(e)}var Fe=(0,W.Z)((function(){return{media:{height:0,borderRadius:8,paddingTop:"100%",backgroundSize:"contain"}}}))((ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Be(r);if(o){var n=Be(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ie(this,e)});function i(){return Ne(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.image,n=e.classes;return u.createElement(z.Z,{className:n.media,image:t})}}])&&Me(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(u.Component),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ke,"propTypes",{image:K().string,classes:K().object}),_e=ke))||_e,He=Fe;function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function We(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ge(e,t)}function Ue(e,t){if(t&&("object"===ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qe(e)}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ve(e)}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(s,e);var t,r,o,a,i,c,l=(i=s,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ve(i);if(c){var n=Ve(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ue(this,e)});function s(){var e;Le(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $e(qe(e=l.call.apply(l,[this].concat(n))),"state",{loaded:!1}),e}return t=s,r=[{key:"componentDidMount",value:(o=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("GoogleModelViewer").then(n.bind(n,"./node_modules/@google/model-viewer/dist/model-viewer.min.js"));case 2:this.setState({loaded:!0});case 3:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){We(a,n,r,i,c,"next",e)}function c(e){We(a,n,r,i,c,"throw",e)}i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.vr,n=e.poster;return this.state.loaded?u.createElement("model-viewer",{"auto-rotate":!0,"auto-rotate-delay":0,"camera-controls":!0,src:t,poster:n,style:{height:"100%",width:"100%",minHeight:300,"--poster-color":"transparent"}}):null}}],r&&Ke(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(u.Component);$e(Xe,"propTypes",{vr:K().string,poster:K().string});var Ye=Xe,Je=n("./node_modules/@material-ui/core/esm/Paper/Paper.js");function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nt(e,t)}function rt(e,t){if(t&&("object"===Qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}var at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ot(r);if(o){var n=ot(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rt(this,e)});function c(){return et(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.audio,n=e.poster;return u.createElement(a.Z,{display:"flex",height:"100%",alignItems:"center",justifyContent:"center",position:"relative"},u.createElement(a.Z,{style:{background:"url(".concat(n,")")},width:"100%",paddingTop:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),u.createElement(a.Z,{position:"absolute"},u.createElement(Je.Z,{elevation:2},u.createElement("audio",{controls:!0,src:t},"Your browser does not support the ",u.createElement("code",null,"audio")," element."))))}}])&&tt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(u.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(at,"propTypes",{audio:K().string,poster:K().string});var it=at;function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},st(e,t)}function ft(e,t){if(t&&("object"===ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pt(r);if(o){var n=pt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ft(this,e)});function c(){return lt(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props.video;return u.createElement(a.Z,{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},u.createElement("video",{width:"100%",height:"100%",controls:!0,loop:!0,autoPlay:!0},u.createElement("source",{src:e,type:"video/mp4"}),"Your browser does not support the video tag."))}}])&&ut(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(u.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(mt,"propTypes",{video:K().string,poster:K().string});var dt,yt,bt=mt,ht=n("./src/actions/common.js"),vt=(0,h.P1)(v.Tz,(function(e,t){return t.tokenPubkey}),(function(e,t){return e[t]})),gt=(0,h.zB)({token:vt}),wt=n("./src/common/components/Icons/IconMoreActions.js"),Et=n("./src/transformers/nft.js");function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(e,t){return Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ot(e,t)}function Pt(e,t){if(t&&("object"===jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return St(e)}function St(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e){return xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xt(e)}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ct,Tt,Rt=(0,ae.Z)()(dt=(0,W.Z)((function(){return{container:{marginTop:-20},avatar:{width:24,height:24}}}))(dt=(0,f.$j)(gt,{getNftData:m.H_,openExplorerAccount:ht.Wi})((yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ot(e,t)}(p,e);var t,n,l,s,f=(l=p,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xt(l);if(s){var n=xt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Pt(this,e)});function p(){var e;_t(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zt(St(e=f.call.apply(f,[this].concat(n))),"state",{morePoppover:!1,morePoppoverAnchor:null}),Zt(St(e),"fetchNftData",(function(){var t=e.props.token;e.props.getNftData({token:t})})),Zt(St(e),"getCreators",(function(){var t,n,r,o,l=e.props,s=l.token,f=l.classes,p=l.openExplorerAccount,m=l.t,d=(null===(t=s.nft)||void 0===t?void 0:t.seller_fee_basis_points)/1e4;return null===(n=s.nft)||void 0===n||null===(r=n.properties)||void 0===r||null===(o=r.creators)||void 0===o?void 0:o.map((function(e){return u.createElement(a.Z,{key:"creator-".concat(e.address)},u.createElement(Ze.ZP,{title:u.createElement(a.Z,{display:"flex",alignItems:"center"},u.createElement(Re.Z,{pubkey:e.address}),u.createElement(a.Z,{ml:1},u.createElement(c.Z,{variant:"caption"},(0,Te.r)(e.address)),u.createElement(c.Z,{variant:"body2",color:"textSecondary"},m("nfts_royalty_percent",{percentage:e.share*d}))))},u.createElement(i.Z,{size:"small",onClick:function(){return p({account:e.address})}},u.createElement(Re.Z,{className:f.avatar,pubkey:e.address}))))}))})),Zt(St(e),"getNftAuthority",(function(){var t,n,r=e.props,o=r.token,l=r.classes,s=r.openExplorerAccount,f=null===(t=o.nft)||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.updateAuthority.toString();return u.createElement(Ze.ZP,{title:u.createElement(a.Z,{display:"flex",alignItems:"center"},u.createElement(Re.Z,{pubkey:f}),u.createElement(a.Z,{ml:1},u.createElement(c.Z,{variant:"caption"},(0,Te.r)(f))))},u.createElement(i.Z,{size:"small",onClick:function(){return s({account:f})}},u.createElement(Re.Z,{className:l.avatar,pubkey:f})))})),Zt(St(e),"openMoreMenu",(function(t){e.setState({morePoppover:!0,morePoppoverAnchor:t.currentTarget})})),Zt(St(e),"getNftAttributes",(function(){var t=e.props.token,n=(0,Et.yy)(t.nft.attributes);return null==n?void 0:n.map((function(t){return e.renderMetadataItem(t.trait_type,t.value)}))})),Zt(St(e),"onDownload",(function(){var t,n=e.props.token,r="";switch(null===(t=n.nft.properties)||void 0===t?void 0:t.category){case"image":default:r=n.nft.image;break;case"vr":case"audio":case"video":r=n.nft.animation_url}var o=r.split("ext=")[1]||n.nft.image.split("ext=")[1];fetch(r).then((function(e){return e.blob()})).then((function(e){var t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="".concat(n.nft.name).concat(o?".".concat(o):""),t.click()})).catch(console.error)})),Zt(St(e),"renderMetadataItem",(function(e,t){return t?u.createElement(u.Fragment,{key:"field-".concat(e,"-").concat(t)},u.createElement(D.Z,{light:!0}),u.createElement(a.Z,{pt:3,pb:2,display:"flex"},e&&u.createElement(a.Z,{mr:1,minWidth:90},u.createElement(c.Z,{variant:"body1",color:"textSecondary"},e)),u.createElement(a.Z,null,Array.isArray(t)?t:u.createElement(c.Z,{variant:"body1",component:"div"},t)))):null})),Zt(St(e),"renderPreview",(function(e){var t;switch(null===(t=e.nft.properties)||void 0===t?void 0:t.category){case"image":default:return u.createElement(He,{image:e.nft.image});case"vr":return u.createElement(Ye,{vr:e.nft.animation_url,poster:e.nft.image});case"audio":return u.createElement(it,{audio:e.nft.animation_url,poster:e.nft.image});case"video":return u.createElement(bt,{video:e.nft.animation_url})}})),Zt(St(e),"renderEdition",(function(t){var n=e.props.t;return t?"MASTER_EDITION"===t.type?u.createElement(c.Z,{variant:"body1",color:"textSecondary"},n("nfts_master_edition")," ","0"===t.maxSupply?n("nfts_unique"):n("nfts_printed_amount",{x:t.supply,y:t.maxSupply||"∞"})):"EDITION"===t.type?u.createElement(c.Z,{variant:"body1",color:"textSecondary"},n("nfts_edition_number",{number:t.edition})):void 0:u.createElement(xe.Z,{variant:"text",width:150})})),e}return t=p,(n=[{key:"componentDidMount",value:function(){this.fetchNftData()}},{key:"render",value:function(){var e,t=this,n=this.props,l=n.onClose,s=n.token,f=n.classes,p=n.onSend,m=n.onDelete,d=n.onSetProfilePicture,y=n.t;return Boolean(s.nft)?u.createElement(Ce.Z,{open:!0,fullScreen:!0,onClose:l,scroll:"body",title:u.createElement(a.Z,{my:3}),maxWidth:"lg",children:u.createElement(a.Z,{px:1},u.createElement(r.Z,{container:!0,spacing:2,className:f.container},u.createElement(r.Z,{md:6,xs:12,item:!0},this.renderPreview(s)),u.createElement(r.Z,{md:6,xs:12,item:!0},u.createElement(a.Z,{pt:2},u.createElement(c.Z,{variant:"h1",gutterBottom:!0},s.nft.name),u.createElement(a.Z,{display:"flex",flexWrap:"wrap",alignItems:"center"},u.createElement(c.Z,{variant:"body2",color:"textSecondary",style:{textTransform:"capitalize"}},null===(e=s.nft.properties)||void 0===e?void 0:e.category),u.createElement(a.Z,{mx:1},u.createElement(c.Z,{variant:"body2",color:"textSecondary"},"•")),this.renderEdition(s.nft.edition)),u.createElement(a.Z,{display:"flex",flexWrap:"wrap",alignItems:"center"},u.createElement(a.Z,{display:"flex",alignItems:"center"},u.createElement(c.Z,{variant:"body2",color:"textSecondary"},y("nfts_creators"),":"),u.createElement(a.Z,{ml:1,display:"flex"},this.getCreators())),u.createElement(a.Z,{mx:1,display:{xs:"none",sm:"block",md:"block"}},u.createElement(c.Z,{variant:"body1",color:"textSecondary"},"•")),u.createElement(a.Z,{display:"flex",alignItems:"center"},u.createElement(c.Z,{variant:"body1",color:"textSecondary"},y("nfts_authority"),":"),u.createElement(a.Z,{ml:1,display:"flex"},this.getNftAuthority()))),u.createElement(a.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",mt:3,mb:1},u.createElement(a.Z,{mr:2,mb:2},u.createElement(o.Z,{size:"small",variant:"contained",color:"primary",onClick:function(){return p(s)}},y("action_send_nft"))),u.createElement(a.Z,{mr:2,mb:2},u.createElement(i.Z,{color:"primary",onClick:this.openMoreMenu},u.createElement(wt.R,null)),u.createElement(Pe.Z,{anchorEl:this.state.morePoppoverAnchor,keepMounted:!0,open:this.state.morePoppover,onClose:function(){return t.setState({morePoppover:!1})},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},s.nft.external_url&&u.createElement(Se.Z,{onClick:function(){return window.open(s.nft.external_url,"_blank")}},y("action_external_url")),u.createElement(Se.Z,{onClick:function(){return t.props.openExplorerAccount({account:s.nft.metadata.mint})}},y("action_view_in_explorer")),u.createElement(Se.Z,{onClick:function(){return t.onDownload()}},y("nfts_download")),u.createElement(Se.Z,{onClick:function(){return window.open(s.nft.metadata.data.uri,"_blank")}},y("nfts_view_raw_json")),u.createElement(Se.Z,{onClick:function(){return m(s)}},y("nfts_delete")),u.createElement(Se.Z,{onClick:function(){return d(s)},className:f.profilePictureMenu},y("nfts_set_profile_picture"))))),this.renderMetadataItem(null,s.nft.description),u.createElement(a.Z,{maxHeight:300,overflow:"auto"},this.getNftAttributes())))))}):null}}])&&kt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(u.Component),Zt(yt,"propTypes",{t:K().func,openExplorerAccount:K().func,getNftData:K().func,onSend:K().func,onClose:K().func,onDelete:K().func,onSetProfilePicture:K().func,classes:K().object,wallet:K().object,token:K().object}),dt=yt))||dt)||dt)||dt,At=n("./src/api/utils.js"),Nt=n("./src/assets/no-nft.svg");function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function Dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t){return Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bt(e,t)}function Ft(e,t){if(t&&("object"===Mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ht(e){return Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ht(e)}var zt,Wt,Lt=(0,ae.Z)()((Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bt(e,t)}(s,e);var t,n,r,i,l=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ht(r);if(i){var n=Ht(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ft(this,e)});function s(){return Dt(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=this.props.t;return u.createElement(a.Z,{mt:4,display:"flex",flexDirection:"column",alignItems:"center"},u.createElement("img",{alt:"No nft",src:Nt,style:{opacity:.5}}),u.createElement(c.Z,{variant:"body1",color:"textSecondary"},e("nfts_you_dont_have_nfts")),u.createElement(a.Z,{mt:4},u.createElement(o.Z,{size:"large",color:"primary",variant:"contained",onClick:this.props.onReceive},e("action_receive"))))}}])&&It(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(u.Component),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Tt,"propTypes",{t:K().func,onReceive:K().func}),Ct=Tt))||Ct,Kt=n("./src/common/components/ReceiveModal/index.js"),Gt=n("./node_modules/@material-ui/core/esm/Link/Link.js"),Ut=n("./node_modules/@material-ui/core/esm/FormControlLabel/FormControlLabel.js"),qt=n("./node_modules/@material-ui/icons/esm/HelpOutline.js"),Vt=n("./node_modules/@material-ui/core/esm/Checkbox/Checkbox.js"),$t=n("./src/common/utils/isPublicKeyValid.js"),Xt=n("./src/actions/nameService.js"),Yt=n("./src/common/components/AddressBookInput/index.js");function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function Qt(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function en(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Qt(a,r,o,i,c,"next",e)}function c(e){Qt(a,r,o,i,c,"throw",e)}i(void 0)}))}}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t){return nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nn(e,t)}function rn(e,t){if(t&&("object"===Jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return on(e)}function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e){return an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},an(e)}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ln,un,sn=(0,ae.Z)()(zt=(0,W.Z)((function(e){return{image:{width:60,height:60,borderRadius:8},categoryText:{textTransform:"capitalize",marginLeft:4},iconCenter:{display:"inline-flex",verticalAlign:"middle",cursor:"pointer","& svg":{fontSize:"1.2rem",marginLeft:"4px"}},addressInputHelpText:{fontSize:e.typography.pxToRem(14)}}}))(zt=(0,p.a)()(zt=(0,f.$j)(null,{getResolvedAddressFromDomain:Xt.JS,getResolvedAddressFromTwitter:Xt.pE,getTwitterHandleFromPubkey:Xt.CW,openExplorerAccount:ht.Wi})((Wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nn(e,t)}(s,e);var t,n,r,i,l=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=an(r);if(i){var n=an(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rn(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),cn(on(t=l.call(this,e)),"debounceValidate",(0,b.debounce)((function(e){var n=e.value,r=t.getAddressHandler(n);return"twitter"===r?t.validateTwitterHandle(n.slice(1)):"domain"===r?t.validateDomainName(n.slice(0,-4)):void t.setState({resolved:"",allowSubmit:!0})}),500)),cn(on(t),"getAddressHandler",(function(e){return e.startsWith("@")?"twitter":e.endsWith(".sol")?"domain":"address"})),cn(on(t),"validateTwitterHandle",function(){var e=en(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.getResolvedAddressFromTwitter,t.setState({resolved:"",allowSubmit:!1}),0!==n.length){e.next=5;break}return t.setState({errors:(0,b.set)(t.state.errors,"address","This handle cannot be resolved")}),e.abrupt("return");case 5:return e.next=7,r({handle:n});case 7:(o=e.sent)?t.setState({resolved:o,allowSubmit:!0,errors:(0,b.omit)(t.state.errors,["address"])}):(t.state.errors.address="This handle cannot be resolved",t.setState({errors:(0,b.set)(t.state.errors,"address","This handle cannot be resolved")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),cn(on(t),"validateDomainName",function(){var e=en(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.getResolvedAddressFromDomain,t.setState({resolved:"",allowSubmit:!1}),0!==n.length){e.next=5;break}return t.setState({errors:(0,b.set)(t.state.errors,"address","This domain name cannot be resolved")}),e.abrupt("return");case 5:return e.next=7,r({domainName:n});case 7:(o=e.sent)&&o.owner?t.setState({resolved:o.owner.toString(),allowSubmit:!0,errors:(0,b.omit)(t.state.errors,["address"])}):t.setState({errors:(0,b.set)(t.state.errors,"address","This domain name cannot be resolved")});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),cn(on(t),"openExplorerResolvedAccount",(function(e){e.preventDefault(),t.props.openExplorerAccount({account:t.state.resolved})})),cn(on(t),"setSaveAddressCallback",(function(e){t.saveAddressCallback=e})),cn(on(t),"isOwner",(function(){var e,n,r=t.props,o=r.wallet,a=r.token;return o.getPublicKey()===(null===(e=a.nft)||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.updateAuthority.toString())})),cn(on(t),"isSaleHappened",(function(){var e,n;return 1===(null===(e=t.props.token.nft)||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.primarySaleHappened)})),cn(on(t),"onChange",(function(e){var n,r=e.target,o=r.name,a=r.value;t.setState((cn(n={},o,a),cn(n,"errors",(0,b.omit)(t.state.errors,[o])),n)),"address"===o&&t.debounceValidate({value:a})})),cn(on(t),"onSendClick",(function(e){null==e||e.preventDefault();var n=t.props.token,r=t.state,o=r.address,a=r.fullRightsTransfer,i=r.initialSale,c=r.resolved,l={},u=t.getAddressHandler(o);if(o.trim()?"address"!==u||(0,$t.Z)(o)?"twitter"!==u||c?"domain"!==u||c||(l.address="This domain name cannot be resolved"):l.address="This handle cannot be resolved":l.address="This is not a valid Solana address":l.address="Address is required",!(0,b.isEmpty)(l))return t.setState({errors:l}),!1;t.saveAddressCallback&&!t.saveAddressCallback()||(t.props.onSubmit("address"===u?o:c,{token:n,fullRightsTransfer:a,initialSale:i,recipientName:o}),t.props.onClose())})),t.state={fullRightsTransfer:!1,initialSale:!1,address:"",resolved:"",allowSubmit:!1,errors:{}},t}return t=s,(n=[{key:"render",value:function(){var e,t,n=this,r=this.props,i=r.onClose,l=r.token,s=r.classes,f=r.t,p=this.isOwner(),m=this.isSaleHappened();return u.createElement(Ce.Z,{open:!0,fullScreen:!0,onClose:i,title:f("action_send_nft"),actions:u.createElement(u.Fragment,null,u.createElement(a.Z,{mr:2},u.createElement(Ze.ZP,{title:p?"":f("nfts_cannot_transfer_authority")},u.createElement(Ut.Z,{control:u.createElement(Vt.Z,{color:"primary",disabled:!p,checked:this.state.fullRightsTransfer,onChange:function(e,t){return n.setState({fullRightsTransfer:t})},name:"confirm"}),label:u.createElement(c.Z,{variant:"subtitle2",className:s.iconCenter},f("nfts_full_rights_transfer"),u.createElement(Ze.ZP,{title:p?f("nfts_full_rights_tooltip"):""},u.createElement(qt.Z,null))),labelPlacement:"end"})),u.createElement(Ze.ZP,{title:m?f("nfts_primary_sale_happened"):p?"":f("nfts_only_authority_can_mark")},u.createElement(Ut.Z,{control:u.createElement(Vt.Z,{color:"primary",disabled:!p||m,checked:this.state.initialSale,onChange:function(e,t){return n.setState({initialSale:t})},name:"confirm"}),label:u.createElement(c.Z,{variant:"subtitle2",className:s.iconCenter},f("nfts_mark_as_initial_sale"),u.createElement(Ze.ZP,{title:!p||m?"":f("nfts_mark_as_initial_sale_tooltip")},u.createElement(qt.Z,null))),labelPlacement:"end"}))),u.createElement(o.Z,{disabled:!this.state.allowSubmit,type:"submit",variant:"contained",onClick:this.onSendClick},f("action_send"))),children:u.createElement(u.Fragment,null,u.createElement(a.Z,{display:"flex",mb:4},u.createElement(z.Z,{className:s.image,image:l.nft.image}),u.createElement(a.Z,{ml:2},u.createElement(c.Z,{variant:"h3"},l.nft.name||"..."),u.createElement(c.Z,{variant:"body2",component:"span",color:"textSecondary"},f("form_category"),":"),u.createElement(c.Z,{variant:"body2",component:"span",className:s.categoryText},null===(e=l.nft)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.category))),u.createElement(D.Z,{light:!0}),u.createElement(a.Z,{mt:4,mb:2},u.createElement(Yt.Z,{setSaveAddressCallback:this.setSaveAddressCallback,fullWidth:!0,label:f("form_recepient_address"),variant:"outlined",name:"address",value:this.state.address,resolved:this.state.resolved,handler:this.getAddressHandler(this.state.address),isAddressValid:!0,error:!!this.state.errors.address,helperText:this.state.errors.address||"",FormHelperTextProps:{className:s.addressInputHelpText},onChange:this.onChange}),u.createElement(a.Z,{mt:1},this.state.resolved&&u.createElement(c.Z,{variant:"subtitle2"},f("bonfida_handle_resolves_to")," ",u.createElement(Gt.Z,{href:"#",onClick:this.openExplorerResolvedAccount},(0,Te.r)(this.state.resolved))))))})}}])&&tn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(u.Component),cn(Wt,"propTypes",{t:K().func,getResolvedAddressFromDomain:K().func,getResolvedAddressFromTwitter:K().func,getTwitterHandleFromPubkey:K().func,openExplorerAccount:K().func,onSubmit:K().func,onClose:K().func,classes:K().object,wallet:K().object,token:K().object}),zt=Wt))||zt)||zt)||zt)||zt,fn=n("./src/common/components/NftMintBanner/index.js");function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e,t){return yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yn(e,t)}function bn(e,t){if(t&&("object"===pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hn(e)}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vn(e){return vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vn(e)}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wn,En,jn,_n,kn,On=(0,ae.Z)()(ln=(0,W.Z)((function(){return{image:{width:60,height:60,borderRadius:8},categoryText:{textTransform:"capitalize",marginLeft:4}}}))(ln=(0,p.a)()((un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yn(e,t)}(s,e);var t,n,r,i,l=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vn(r);if(i){var n=vn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return bn(this,e)});function s(){var e;mn(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return gn(hn(e=l.call.apply(l,[this].concat(n))),"onDeleteClick",(function(t){null==t||t.preventDefault();var n=e.props.token;e.props.onSubmit({token:n}),e.props.onClose()})),e}return t=s,(n=[{key:"render",value:function(){var e,t,n=this.props,r=n.onClose,i=n.token,l=n.classes,s=n.t;return u.createElement(Ce.Z,{open:!0,onClose:r,title:s("nfts_burn_title"),actions:u.createElement(u.Fragment,null,u.createElement(o.Z,{type:"submit",variant:"contained",onClick:this.onDeleteClick},s("action_delete"))),children:u.createElement(u.Fragment,null,u.createElement(a.Z,{display:"flex",mb:4},u.createElement(z.Z,{className:l.image,image:i.nft.image}),u.createElement(a.Z,{ml:2},u.createElement(c.Z,{variant:"h3"},i.nft.name||"..."),u.createElement(c.Z,{variant:"body2",component:"span",color:"textSecondary"},s("table_type"),":"),u.createElement(c.Z,{variant:"body2",component:"span",className:l.categoryText},null===(e=i.nft)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.category))),u.createElement(D.Z,{light:!0}),u.createElement(a.Z,{mt:2},u.createElement(c.Z,{variant:"subtitle2"},s("nfts_burn_are_you_sure"))))})}}])&&dn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(u.Component),gn(un,"propTypes",{t:K().func,onSubmit:K().func,onClose:K().func,classes:K().object,wallet:K().object,token:K().object}),ln=un))||ln)||ln)||ln,Pn=n("./src/common/components/ConfirmationHelpers/MintNft.js"),Sn=n("./node_modules/@solana/web3.js/lib/index.browser.esm.js"),xn=n("./src/actions/config.js"),Zn=n("./src/common/components/Icons/IconShare.js"),Cn=n("./src/common/components/ConfirmationHelpers/SetProfilePicture.js"),Tn=n("./src/wallet/shared.js");function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function An(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mn(e,t){return Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mn(e,t)}function Dn(e,t){if(t&&("object"===Rn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return In(e)}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bn(e){return Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Bn(e)}function Fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hn=(wn=(0,ae.Z)(),En=(0,p.a)({protectedPage:!0,Fallback:function(){return u.createElement(s.l_,{to:"/"})}}),jn=(0,f.$j)(M,{getWalletData:m.zE,nftTransferTransaction:m.rZ,nftDeleteTransaction:m.ui,setProfilePicture:y.B7,mintNft:m.cf,getNftConfig:d.$H,toggleTheme:xn.X8,fetchProfilePictures:y.mA,copyClipboard:ht.Md}),wn(_n=(0,l.Z)(_n=En(_n=jn((kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mn(e,t)}(p,e);var t,n,l,s,f=(l=p,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bn(l);if(s){var n=Bn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Dn(this,e)});function p(){var e;An(this,p);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return Fn(In(e=f.call.apply(f,[this].concat(n))),"state",{receiveModal:!1,previewModal:!1,transferModal:!1,transferToken:null,deleteModal:!1,deleteToken:null,setProfilePictureModal:!1,profileToken:null,previewToken:null}),Fn(In(e),"fetchWalletItems",(function(){var t=e.props.wallet;t.loggedIn&&e.props.getWalletData(t.getPublicKey())})),Fn(In(e),"openItem",(function(t){e.setState({previewModal:!0,previewToken:t})})),Fn(In(e),"isFtxExchange",(function(){return e.props.wallet.instance.type===Tn.SD})),Fn(In(e),"onMintNft",(function(){var t=e.props,n=t.wallet,r=t.nftMintConfig,o=t.toggleTheme,a=t.theme;if(r){var i=r.data;e.props.mintNft({sign:n.sign,pubkey:n.getPublicKey(),nftMintConfig:i,commitment:"processed",confirmData:u.createElement(Pn.Z,{price:i.mintPriceLamports?i.mintPriceLamports/Sn.LAMPORTS_PER_SOL:0,name:i.campaignDisplayName,image:i.nftImage,description:i.modalBody}),onConfirm:function(){e.fetchWalletItems(),e.setState({previewModal:!1}),o(a.dark?"christmasDark":"christmasLight")}})}})),Fn(In(e),"onTransferNft",(function(t,n){var r=n.token,o=n.fullRightsTransfer,a=n.initialSale,i=e.props.wallet;e.props.nftTransferTransaction({sign:i.sign,from:i.getPublicKey(),token:r,recepient:t,fullRightsTransfer:o,initialSale:a,commitment:"processed",onConfirm:function(){e.fetchWalletItems(),e.setState({previewModal:!1})}})})),Fn(In(e),"onDeleteNft",(function(t){var n=t.token,r=e.props.wallet;e.props.nftDeleteTransaction({sign:r.sign,from:r.getPublicKey(),token:n,commitment:"processed",onConfirm:function(){e.fetchWalletItems(),e.setState({deleteModal:!1,previewModal:!1})}})})),Fn(In(e),"onSetProfilePicture",(function(t){var n=t.token,r=e.props.wallet;e.props.setProfilePicture({sign:r.sign,from:r.getPublicKey(),fromPubkey:r.getPublicKey(),mintPubkey:n.mint,tokenPubkey:n.pubkey,confirmData:u.createElement(Cn.Z,{token:n}),commitment:"confirmed",onConfirm:function(){console.log("confirmed???"),e.fetchWalletItems(),e.props.fetchProfilePictures(),e.setState({previewModal:!1})}})})),Fn(In(e),"onShareGallery",(function(){e.props.copyClipboard("https://solflare.com/g/".concat(e.props.wallet.getPublicKey()))})),Fn(In(e),"renderData",(function(){var t=e.props,n=t.nfts,l=t.mints,s=t.t;return(0,At.kR)(n)||n.data.length>0?0===n.data.length?u.createElement(u.Fragment,null,u.createElement(fn.Z,{mints:l,onMintNft:e.onMintNft,key:"empty",marginBottom:!0}),u.createElement(Lt,{onReceive:function(){return e.setState({receiveModal:!0})}})):u.createElement(u.Fragment,null,u.createElement(fn.Z,{mints:l,onMintNft:e.onMintNft,key:"grid",marginBottom:!0}),u.createElement(a.Z,{display:"flex",alignItems:"center",justifyContent:"space-between"},u.createElement(c.Z,{variant:"h2"},s("nfts_title")),u.createElement(a.Z,{display:"flex",alignItems:"center"},u.createElement(i.Z,{color:"primary",onClick:e.onShareGallery},u.createElement(Zn.F,{color:"primary"})),u.createElement(a.Z,{width:8}),u.createElement(o.Z,{size:"small",variant:"contained",color:"primary",onClick:function(){return e.setState({receiveModal:!0})}},s("action_receive")))),u.createElement(a.Z,null,u.createElement(r.Z,{container:!0,spacing:4},u.createElement(r.Z,{item:!0,xs:12},u.createElement(Oe,{nfts:n,onClick:e.openItem}))))):u.createElement("div",null,s("loading"))})),e}return t=p,(n=[{key:"componentDidMount",value:function(){this.props.getNftConfig(),this.fetchWalletItems()}},{key:"render",value:function(){var e=this,t=this.props.wallet;return this.isFtxExchange()?u.createElement(a.Z,{display:"flex",alignItems:"center",justifyContent:"center"},u.createElement(c.Z,{variant:"h3"},"Collectibles not available for FTX exchange")):u.createElement(u.Fragment,null,this.renderData(),this.state.previewModal&&u.createElement(Rt,{tokenPubkey:this.state.previewToken.pubkey,onSend:function(t){return e.setState({transferModal:!0,transferToken:t})},onClose:function(){return e.setState({previewModal:!1,previewToken:null})},onDelete:function(t){return e.setState({deleteModal:!0,deleteToken:t})},onSetProfilePicture:function(t){return e.onSetProfilePicture({token:t})},readOnly:!1}),this.state.receiveModal&&u.createElement(Kt.Z,{name:"NFT",fullScreen:!0,address:t.getPublicKey(),onClose:function(){return e.setState({receiveModal:!1})}}),this.state.transferModal&&u.createElement(sn,{token:this.state.transferToken,onSubmit:this.onTransferNft,onClose:function(){return e.setState({transferModal:!1,transferToken:null})}}),this.state.deleteModal&&u.createElement(On,{token:this.state.deleteToken,onSubmit:this.onDeleteNft,onClose:function(){return e.setState({deleteModal:!1,deleteToken:null})}}))}}])&&Nn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(u.Component),Fn(kn,"propTypes",{t:K().func,wallet:K().object,nfts:K().object,getWalletData:K().func,mintNft:K().func,nftTransferTransaction:K().func,nftDeleteTransaction:K().func,setProfilePicture:K().func,fetchProfilePictures:K().func,copyClipboard:K().func,nftMintConfig:K().object,getNftConfig:K().func,toggleTheme:K().func,theme:K().object,mints:K().object}),_n=kn))||_n)||_n)||_n)||_n)},"./src/assets/logo.svg":function(e,t,n){e.exports=n.p+"assets/logo.26659b6d..svg"}}]);