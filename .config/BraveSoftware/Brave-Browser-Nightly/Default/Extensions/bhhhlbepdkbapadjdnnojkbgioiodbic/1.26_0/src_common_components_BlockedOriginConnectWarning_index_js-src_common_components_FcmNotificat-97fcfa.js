"use strict";(self.webpackChunksolflare=self.webpackChunksolflare||[]).push([["src_common_components_BlockedOriginConnectWarning_index_js-src_common_components_FcmNotificat-97fcfa"],{"./src/common/components/BlockedOriginConnectWarning/index.js":function(e,t,n){n.d(t,{Z:function(){return _}});var r,o,i=n("./node_modules/@material-ui/core/esm/Container/Container.js"),a=n("./node_modules/@material-ui/core/esm/Button/Button.js"),c=n("./node_modules/@material-ui/core/esm/Box/Box.js"),s=n("./node_modules/@material-ui/core/esm/Typography/Typography.js"),u=n("./node_modules/react/index.js"),l=n("./node_modules/prop-types/index.js"),f=n.n(l),p=n("./node_modules/@material-ui/core/esm/styles/withStyles.js"),m=n("./src/assets/connect-blocked-icon.png");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function h(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var w,j,O,_=(0,p.Z)((function(e){return{redTextButton:{marginTop:e.spacing(2),color:e.palette.error.main},whiteButton:{color:e.palette.common.black,background:e.palette.common.white},image:{width:64,height:64,marginBottom:e.spacing(2),marginTop:e.spacing(2)},link:{textDecoration:"underline",marginLeft:4,color:e.dark?e.palette.common.white:e.palette.common.black}}}))((o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(f,e);var t,n,r,o,l=(r=f,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function f(){return y(this,f),l.apply(this,arguments)}return t=f,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.origin,r=e.onReject,o=e.onApprove;return u.createElement(i.Z,{maxWidth:"sm"},u.createElement(c.Z,{mb:4,textAlign:"center"},u.createElement("img",{className:t.image,src:m,alt:""}),u.createElement(s.Z,{variant:"body1",color:"error"},n)),u.createElement(c.Z,{mb:6,textAlign:"center"},u.createElement(s.Z,{variant:"body2",gutterBottom:!0},"This website is blocked because itâ€™s been reported as a malicious website."),u.createElement(c.Z,{my:2}),u.createElement(s.Z,{variant:"body2"},"If you believe the website has been blocked in error, please",u.createElement(s.Z,{component:"a",href:"https://solflare.com/support",target:"_blank",variant:"body1",className:t.link},"contact our support."))),u.createElement(c.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",mb:2},u.createElement(a.Z,{variant:"contained",className:t.whiteButton,onClick:r},"Back to safety"),u.createElement(a.Z,{className:t.redTextButton,variant:"text",color:"error",onClick:o},"Ignore warning")))}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(u.Component),w=o,j="propTypes",O={classes:f().object,onApprove:f().func,onReject:f().func,origin:f().string},j in w?Object.defineProperty(w,j,{value:O,enumerable:!0,configurable:!0,writable:!0}):w[j]=O,r=o))||r},"./src/common/components/EnableNotificationsModal/index.js":function(e,t,n){var r,o,i=n("./node_modules/@material-ui/core/esm/Button/Button.js"),a=n("./node_modules/@material-ui/core/esm/Box/Box.js"),c=n("./node_modules/@material-ui/core/esm/Typography/Typography.js"),s=n("./node_modules/react/index.js"),u=n("./node_modules/prop-types/index.js"),l=n.n(u),f=n("./node_modules/@material-ui/core/esm/styles/withStyles.js"),p=n("./node_modules/react-i18next/dist/es/withTranslation.js"),m=n("./src/common/components/Modal/index.js");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function h(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var w,j,O,_=(0,p.Z)()(r=(0,f.Z)((function(){return{message:{flexGrow:1},dividedList:{paddingTop:8,paddingBottom:0},checkBoxItem:{padding:"0 0 10px 0",display:"flex",justifyContent:"space-between",alignItems:"center"}}}))((o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(l,e);var t,n,r,o,u=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function l(){return y(this,l),u.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.t,n=e.onClose,r=e.onNotNow,o=e.onEnable;return s.createElement(m.Z,{bottom:!0,open:!0,onClose:n,title:t("connect_page_enable_notifications_title"),children:s.createElement(s.Fragment,null,s.createElement(a.Z,null,s.createElement(a.Z,{mt:2},s.createElement(c.Z,{color:"textSecondary",variant:"subtitle1"},t("connect_page_enable_notifications_body"))),s.createElement(a.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",mt:4},s.createElement(i.Z,{variant:"outlined",color:"primary",onClick:r,size:"medium",style:{border:0,paddingLeft:0,paddingRight:0}},t("action_not_now")),s.createElement(i.Z,{variant:"contained",color:"primary",onClick:o,size:"medium"},t("action_enable")))))})}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(s.Component),w=o,j="propTypes",O={t:l().func,classes:l().object,onEnable:l().func,onNotNow:l().func,onClose:l().func},j in w?Object.defineProperty(w,j,{value:O,enumerable:!0,configurable:!0,writable:!0}):w[j]=O,r=o))||r)||r;t.Z=_},"./src/common/components/FcmNotifications/index.js":function(e,t,n){n.d(t,{default:function(){return H}});var r,o,i,a,c,s,u=n("./node_modules/@material-ui/core/esm/IconButton/IconButton.js"),l=n("./node_modules/@material-ui/icons/esm/Close.js"),f=n("./node_modules/@material-ui/core/esm/Container/Container.js"),p=n("./node_modules/@material-ui/core/esm/Button/Button.js"),m=n("./node_modules/@material-ui/core/esm/Box/Box.js"),d=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),b=n.n(y),g=n("./node_modules/firebase/app/dist/index.esm.js"),h=n("./node_modules/firebase/messaging/dist/index.esm.js"),v=n("./src/actions/notifications.js"),w=n("./src/actions/notificationProtocol.js"),j=n("./src/common/utils/extension.js"),O=n("./src/common/utils/notifications.js"),_=n("./node_modules/react-redux/es/index.js"),E=n("./node_modules/react-i18next/dist/es/withTranslation.js"),x=n("./node_modules/@material-ui/core/esm/styles/withStyles.js"),k=n("./node_modules/lodash/lodash.js"),P=n("./node_modules/reselect/es/index.js"),S=n("./src/selectors/config.js"),Z=n("./src/selectors/data.js"),T=(0,P.P1)(S.ut,(function(e){var t=e.wallets,n=e.accounts;return e.loggedIn?{accounts:n.map((function(e){var n=e.name,r=e.publicKey;return{name:n,publicKey:r,type:t[r].type}}))}:{accounts:[]}})),R=(0,P.zB)({walletAccounts:T,network:S.eN,notificationProtocol:Z.Cj}),C=n("./node_modules/react-router/esm/react-router.js");function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function B(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){B(i,r,o,a,c,"next",e)}function c(e){B(i,r,o,a,c,"throw",e)}a(void 0)}))}}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function z(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return W(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=(r=(0,n("./src/common/components/withWallet/index.js").a)(),o=(0,E.Z)(),i=(0,x.Z)((function(e){var t;return{strip:{position:"relative",backgroundColor:e.palette.primary.light},valign:{position:"absolute",top:"50%",right:10,transform:"translateY(-50%)"},content:(t={display:"flex",alignItems:"center",justifyContent:"space-between"},q(t,e.breakpoints.down("sm"),{flexDirection:"column"}),q(t,"paddingTop",10),q(t,"paddingBottom",10),q(t,"color",e.palette.text.primary),t),buttonLabel:{fontSize:"14px !important"},text:{opacity:.5}}})),a=(0,_.$j)(R,{initializeNotifications:v._R,initializeNotificationsFromRemote:v.Bn,getRemoteDeviceState:v.HU,removeRemoteDeviceState:v.zH,notificationPlatformConnections:w.WB}),(0,C.EN)(c=r(c=o(c=i(c=a((s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(w,e);var t,n,r,o,i,a,c,s,y,b,v=(y=w,b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(y);if(b){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return z(this,e)});function w(){var e;F(this,w);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return q(W(e=v.call.apply(v,[this].concat(n))),"state",{show:!1,listener:!1,worker:null,workerPort:null}),q(W(e),"firebaseConfig",{apiKey:"AIzaSyBnuytdyhVuSzo0qAhX5QWYu6Z2jTBPWog",authDomain:"solflare-d0638.firebaseapp.com",projectId:"solflare-d0638",storageBucket:"solflare-d0638.appspot.com",messagingSenderId:"191112318129",appId:"1:191112318129:web:a3555b4ee54f13a6efa690"}),q(W(e),"debouncedGetFirebaseToken",(function(){var t=e.state,n=t.worker,r=t.workerPort;n&&n.port.postMessage({id:"notification-permission-".concat(Math.floor(Date.now()/2e3)),type:"NOTIFICATION_PERMISSION",portId:r})})),q(W(e),"registerSharedWorker",(function(){var t=e.props,n=t.i18n,r=t.initializeNotificationsFromRemote,o=new SharedWorker("notification-worker.js");o.port.addEventListener("message",(function(t){"CONNECTION"===t.data.type?(e.setState(A(A({},e.state),{},{workerPort:t.data.portId})),e.debouncedGetFirebaseToken()):"NOTIFICATION_PERMISSION"===t.data.type?e.getFirebaseToken():"NOTIFICATION_RELOAD_STATE"===t.data.type?r(n.language).then():"NOTIFICATION"===t.data.type&&(new Notification(t.data.notificationTitle,t.data.notificationOptions).onclick=function(e){e.preventDefault(),e.target.close();var t=e.target.data,n=j.p?"/wallet.html#":"",r="".concat(n,"/portfolio");t&&t.publicKey&&(r="".concat(n,"/deeplink/").concat(t.publicKey,"/activity")),t&&t.actionUrl&&(r=t.actionUrl),window.open(r,"_self")})})),o.port.start(),e.setState(A(A({},e.state),{},{worker:o}))})),q(W(e),"askForNotifications",(function(){(0,O.AX)(e.props.location,e.props.history),e.onClose()})),q(W(e),"onClose",(function(){var t=e.props.notificationProtocol.connections.length?Date.now()+O.vM:0;localStorage.setItem("solflareEnableNotificationsModal","".concat(t)),e.setState(A(A({},e.state),{},{show:!1}))})),e}return t=w,n=[{key:"componentDidMount",value:(s=I(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.wallet,r=t.network,o=t.notificationPlatformConnections,(0,O.Yz)()&&"mainnet"===r.cluster){e.next=3;break}return e.abrupt("return");case 3:if(!j.p||!window.location.pathname.includes("confirm_popup.html")){e.next=6;break}return this.setupNotifications().then(),e.abrupt("return");case 6:if(!("permissions"in navigator)){e.next=11;break}return e.next=9,navigator.permissions.query({name:"notifications"});case 9:this.permissionStatus=e.sent,this.permissionStatus.addEventListener("change",this.debouncedGetFirebaseToken);case 11:this.setupNotifications().then(),this.checkPromptAvailability().then(),(0,O.YE)(n.instance.type)&&o({publicKey:n.instance.publicKey,timestamp:Date.now(),wallet:n});case 14:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e,t,n){(0,k.isEqual)(e.notificationProtocol,this.props.notificationProtocol)||this.checkPromptAvailability().then()}},{key:"componentWillUnmount",value:(c=I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.permissionStatus&&this.permissionStatus.removeEventListener("change",this.debouncedGetFirebaseToken);case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"setupNotifications",value:(a=I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,g.ZF)(this.firebaseConfig),this.registerSharedWorker(),this.props.initializeNotifications().then();case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"checkPromptAvailability",value:(i=I(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.notificationProtocol,null!==(n=localStorage.getItem("solflareEnableNotificationsModal"))){e.next=5;break}return this.setState(A(A({},this.state),{},{show:!0})),e.abrupt("return");case 5:(0===(n="true"===n?0:parseInt(n,10))||Date.now()>n)&&t.connections.length&&this.setState(A(A({},this.state),{},{show:!0}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"handleMessage",value:(o=I(regeneratorRuntime.mark((function e(t){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.worker){e.next=2;break}return e.abrupt("return");case 2:n=null,r=null,o="/assets/logo-128.png",t.data.icon&&(o=t.data.icon),t.data&&(["notification","broadcast","cast","event"].includes(t.data.type)&&(n=t.data.title,r={body:t.data.body,icon:o,data:t.data}),this.state.worker.port.postMessage({type:"NOTIFICATION",notificationId:null!==(i=t.data.uuid)&&void 0!==i?i:t.messageId,notificationTitle:n,notificationOptions:r,portId:this.state.workerPort}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getFirebaseToken",value:(r=I(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.i18n,r=t.t,o=t.walletAccounts,"granted"!==Notification.permission){e.next=14;break}return i=(0,h.KL)(),e.next=5,(0,h.LP)(i,{vapidKey:"BJaqqoHkXBHpbb5TjC0jks2gmd6rEfFrDu9BBk89E7IaU6bvzD6BscmDf9ryfyfsmyH-c_e0aqEwX-86UD0VHII"});case 5:if(!(a=e.sent)){e.next=14;break}return this.state.listener||((0,h.ps)(i,(function(e){c.handleMessage(e)})),this.setState({listener:!0})),e.next=10,this.props.getRemoteDeviceState({language:n.language,pushToken:a,osVersion:"1",accounts:o.accounts});case 10:return e.sent||this.state.worker.port.postMessage({type:"NOTIFICATION",notificationId:"enabled-notifications-".concat(Math.floor(Date.now()/2e3)),notificationTitle:r("notifications_enabled_title"),notificationOptions:{body:r("notifications_enabled_body"),icon:"/assets/logo-128.png"},portId:this.state.workerPort}),this.state.worker.port.postMessage({type:"NOTIFICATION_RELOAD_STATE",portId:this.state.workerPort}),e.abrupt("return");case 14:return e.next=16,this.props.removeRemoteDeviceState({language:n.language});case 16:this.state.worker.port.postMessage({type:"NOTIFICATION_RELOAD_STATE",portId:this.state.workerPort});case 17:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.t,n=e.classes;return!j.C&&j.p?null:this.state.show&&"granted"!==Notification.permission?!j.p&&location.pathname.includes("/provider")?null:d.createElement(m.Z,{className:n.strip},d.createElement(f.Z,{className:n.content},d.createElement(m.Z,null,d.createElement(m.Z,{display:"inline"},t("notifications_prompt_title")),d.createElement(m.Z,{display:"inline",ml:2,className:n.text},t("notifications_prompt_text"))),d.createElement(p.Z,{type:"button",size:"small",color:"primary",classes:{label:n.buttonLabel},onClick:this.askForNotifications},t("notifications_prompt_enable"))),d.createElement(m.Z,{className:n.valign},d.createElement(u.Z,{onClick:this.onClose},d.createElement(l.Z,{color:"primary"})))):null}}],n&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),w}(d.Component),q(s,"propTypes",{t:b().func,i18n:b().object,wallet:b().object,history:b().object,classes:b().object,network:b().object,location:b().object,walletAccounts:b().object,getRemoteDeviceState:b().func,notificationProtocol:b().object,removeRemoteDeviceState:b().func,initializeNotifications:b().func,initializeNotificationsFromRemote:b().func,notificationPlatformConnections:b().func}),c=s))||c)||c)||c)||c)||c),H=U},"./src/common/utils/buffer.js":function(e,t,n){n.d(t,{T:function(){return u},q:function(){return s}});var r=n("./node_modules/lodash/lodash.js"),o=n("./node_modules/buffer/index.js").Buffer;function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){if(e.length)return Uint8Array.from(e);var t=(0,r.max)((0,r.keys)(e).map((function(e){return parseInt(e,10)})));return Uint8Array.from(a(a({},e),{},{length:t+1}))}function u(e){if(!e)return e;var t=o.alloc(e.length,e).filter((function(e){return 0!==e}));return(new TextDecoder).decode(t)}},"./src/common/utils/origin.js":function(e,t,n){function r(e){if(!e)return"";try{return new URL(e).host||e}catch(t){return e}}n.d(t,{mv:function(){return r}})},"./src/pages/Onboard/index.js":function(e,t,n){n.d(t,{default:function(){return w}});var r=n("./node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),i=n.n(o),a=n("./node_modules/react-router/esm/react-router.js"),c=n("./src/pages/Onboard/Chooser.js"),s=n("./src/pages/Onboard/Create/index.js"),u=n("./src/pages/Onboard/Access/index.js"),l=n("./src/pages/Onboard/Ledger/index.js");function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var g,h,v,w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(g,e);var t,n,o,i,f=(o=g,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(o);if(i){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function g(){return p(this,g),f.apply(this,arguments)}return t=g,(n=[{key:"render",value:function(){return r.createElement(r.Fragment,null,r.createElement(a.rs,null,r.createElement(a.AW,{path:"/onboard/ledger",component:l.Z}),r.createElement(a.AW,{path:"/onboard/access",component:u.Z}),r.createElement(a.AW,{path:"/onboard/create",component:s.Z}),r.createElement(a.AW,{path:"/onboard",component:c.Z})))}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),g}(r.Component);g=w,h="propTypes",v={t:i().func},h in g?Object.defineProperty(g,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[h]=v},"./src/pages/WalletProvider/Connect/index.js":function(e,t,n){n.d(t,{Z:function(){return H}});var r,o,i,a,c,s=n("./node_modules/@material-ui/core/esm/Container/Container.js"),u=n("./node_modules/@material-ui/core/esm/Button/Button.js"),l=n("./node_modules/@material-ui/core/esm/List/List.js"),f=n("./node_modules/@material-ui/core/esm/ListItem/ListItem.js"),p=n("./node_modules/@material-ui/core/esm/Checkbox/Checkbox.js"),m=n("./node_modules/@material-ui/core/esm/Divider/Divider.js"),d=n("./node_modules/@material-ui/lab/esm/Alert/Alert.js"),y=n("./node_modules/@material-ui/icons/esm/ImportExport.js"),b=n("./node_modules/@material-ui/core/esm/Box/Box.js"),g=n("./node_modules/@material-ui/core/esm/Typography/Typography.js"),h=n("./node_modules/react/index.js"),v=n("./node_modules/prop-types/index.js"),w=n.n(v),j=n("./node_modules/@material-ui/core/esm/styles/withStyles.js"),O=n("./src/actions/notificationProtocol.js"),_=n("./node_modules/react-redux/es/index.js"),E=n("./node_modules/reselect/es/index.js"),x=n("./src/selectors/data.js"),k=(0,E.zB)({notifications:x.yu}),P=n("./node_modules/react-router/esm/react-router.js"),S=n("./node_modules/react-i18next/dist/es/withTranslation.js"),Z=n("./src/common/utils/extension.js"),T=n("./src/common/utils/notifications.js"),R=n("./src/common/components/EnableNotificationsModal/index.js"),C=n("./src/common/utils/truncateMiddle.js");function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){D(i,r,o,a,c,"next",e)}function c(e){D(i,r,o,a,c,"throw",e)}a(void 0)}))}}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function z(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return W(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=(r=(0,S.Z)(),o=(0,j.Z)((function(e){return{container:{display:"flex",flexDirection:"column",height:"calc(100vh - 146px)"},message:{flexGrow:1},dividedList:{paddingTop:8,paddingBottom:0},checkBoxItem:{padding:"0 0 10px 0",display:"flex",justifyContent:"space-between",alignItems:"center"}}})),i=(0,_.$j)(k,{subscribeToOrigin:O.ff,unsubscribeFromOrigin:O.NR,checkOriginSubscription:O.Hl}),(0,P.EN)(a=r(a=o(a=i((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(c,e);var t,n,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(o);if(i){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return z(this,e)});function c(){var e;F(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return q(W(e=a.call.apply(a,[this].concat(n))),"state",{enableNotificationsModal:!1,subscriptionStatus:!1,subscriptionOrigin:null,subscriptionLoading:!1}),q(W(e),"toggleSubscription",A(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState(I(I({},e.state),{},{subscriptionStatus:!e.state.subscriptionStatus}));case 1:case"end":return t.stop()}}),t)})))),q(W(e),"syncSubscription",A(regeneratorRuntime.mark((function t(){var n,r,o,i,a,c,s,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.wallet,o=n.origin,i=n.subscribeToOrigin,a=n.unsubscribeFromOrigin,c=e.state,s=c.subscriptionOrigin,u=c.subscriptionStatus,s){t.next=4;break}return t.abrupt("return",!1);case 4:if(null!==s.providedPublicKey!==u){t.next=6;break}return t.abrupt("return",!1);case 6:if(l={domain:o,publicKey:r.instance.publicKey,timestamp:Date.now()},!u){t.next=12;break}return t.next=10,e.updateNotificationProtocolAction(i,I(I({},l),{},{wallet:r}));case 10:t.next=14;break;case 12:return t.next=14,e.updateNotificationProtocolAction(a,I(I({},l),{},{wallet:r}),!0);case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})))),q(W(e),"deny",(function(){e.props.onReject()})),q(W(e),"allow",A(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!e.props.notifications.pushToken&&e.state.subscriptionStatus&&(0,T.Yz)(),t.prev=1,t.next=4,e.syncSubscription();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:if(!Z.p&&n){t.next=12;break}return t.next=12,e.props.onConnect(e.props.wallet.instance.publicKey,!Z.p&&!n);case 12:if(!n){t.next=15;break}return e.setState({enableNotificationsModal:!0}),t.abrupt("return");case 15:Z.p&&e.windowClose();case 16:case"end":return t.stop()}}),t,null,[[1,6]])})))),q(W(e),"windowClose",(function(){window.close()})),q(W(e),"onNotificationNotNow",(function(){Z.p?e.windowClose():e.props.onConnect(e.props.wallet.instance.publicKey,!0)})),q(W(e),"onNotificationEnable",(function(){var t=e.props,n=t.location,r=t.history;if(Z.p){var o=new URLSearchParams(n.pathname.slice(1));(0,T.L5)("tabId-".concat(o.get("tabId"))),e.windowClose()}else(0,T.AX)(n,r,"parentFocus"),e.props.onConnect(e.props.wallet.instance.publicKey,!1)})),e}return t=c,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.wallet,n=e.origin,r=e.checkOriginSubscription;(0,T.YE)(t.instance.type)&&this.updateNotificationProtocolAction(r,{domain:n,publicKey:t.instance.publicKey}).then()}},{key:"updateNotificationProtocolAction",value:(r=A(regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.state.subscriptionOrigin,this.setState(I(I({},this.state),{},{subscriptionOrigin:o,subscriptionLoading:!0})),e.prev=2,e.next=5,t(n);case 5:o=e.sent,r&&(o.providedPublicKey=null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.message);case 12:this.setState(I(I({},this.state),{},{subscriptionStatus:null!==o.providedPublicKey,subscriptionOrigin:o,subscriptionLoading:!1}));case 13:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.origin,n=e.classes,r=e.wallet,o=e.t,i=this.state,a=i.subscriptionLoading,c=i.subscriptionOrigin,v=i.subscriptionStatus,w=i.enableNotificationsModal;return h.createElement(h.Fragment,null,h.createElement(s.Z,{maxWidth:"sm",className:n.container},h.createElement(b.Z,{mb:4},h.createElement(g.Z,{variant:"h2",align:"center"},o("connect_page_allow_site"))),h.createElement(b.Z,{mb:6},h.createElement(g.Z,{variant:"h3",color:"primary",align:"center"},t),h.createElement(b.Z,{display:"flex",alignItems:"center",justifyContent:"center",my:2},h.createElement(y.Z,null)),h.createElement(g.Z,{variant:"h3",align:"center"},r.accountName),h.createElement(g.Z,{variant:"caption",align:"center",display:"block"},(0,C.r)(r.instance.publicKey))),h.createElement(b.Z,{mb:3},h.createElement(d.Z,{severity:"warning",icon:!1,classes:{message:n.message}},h.createElement(g.Z,{align:"center"},o("connect_page_connect_only_trusted")))),c&&h.createElement(b.Z,{mb:3},h.createElement(m.Z,{light:!0}),h.createElement(l.Z,{component:"nav",className:n.dividedList},h.createElement(f.Z,{className:n.checkBoxItem},h.createElement(b.Z,null,h.createElement(g.Z,{color:"textPrimary",variant:"body1"},o("connect_page_subscribe_title")," ",c.account.name),h.createElement(g.Z,{color:"textSecondary",variant:"subtitle2"},o("connect_page_subscribe_body")," ",t)),h.createElement(p.Z,{color:"primary",disabled:a,checked:v,onClick:this.toggleSubscription}))),h.createElement(m.Z,{light:!0})),h.createElement(b.Z,{flexGrow:"1"}),h.createElement(b.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},h.createElement(u.Z,{variant:"outlined",color:"primary",onClick:this.deny,size:"large"},o("action_deny")),h.createElement(u.Z,{variant:"contained",color:"primary",onClick:this.allow,size:"large"},o("action_connect")))),w&&h.createElement(R.Z,{onEnable:this.onNotificationEnable,onNotNow:this.onNotificationNotNow}))}}],n&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(h.Component),q(c,"propTypes",{t:w().func,origin:w().string,location:w().object,history:w().object,wallet:w().object,classes:w().object,onConnect:w().func,onReject:w().func,subscribeToOrigin:w().func,unsubscribeFromOrigin:w().func,checkOriginSubscription:w().func,notifications:w().object}),a=c))||a)||a)||a)||a),H=U},"./src/pages/WalletProvider/Sign/index.js":function(e,t,n){n.d(t,{Z:function(){return Ye}});var r,o,i=n("./node_modules/@material-ui/core/esm/Container/Container.js"),a=n("./node_modules/@material-ui/core/esm/Button/Button.js"),c=n("./node_modules/@material-ui/core/esm/Box/Box.js"),s=n("./node_modules/react/index.js"),u=n("./node_modules/prop-types/index.js"),l=n.n(u),f=n("./node_modules/bs58/index.js"),p=n.n(f),m=n("./node_modules/@material-ui/core/esm/Divider/Divider.js"),d=n("./node_modules/@material-ui/core/esm/Paper/Paper.js"),y=n("./node_modules/@material-ui/core/esm/Typography/Typography.js"),b=n("./node_modules/@material-ui/core/esm/Avatar/Avatar.js"),g=n("./node_modules/@material-ui/lab/esm/Alert/Alert.js"),h=n("./node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js"),v=n("./node_modules/@material-ui/core/esm/styles/withStyles.js"),w=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/reselect/es/index.js"),O=n("./src/selectors/data.js"),_=n("./src/selectors/config.js"),E=(0,j.zB)({mints:O.Th,storedNetwork:_.eN}),x=n("./src/actions/account.js"),k=n("./node_modules/lodash/lodash.js"),P=n("./src/constants/networks.js"),S=n("./src/common/utils/truncateMiddle.js"),Z=n("./src/constants/mints.js"),T=n("./node_modules/react-i18next/dist/es/withTranslation.js");function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function C(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){C(i,r,o,a,c,"next",e)}function c(e){C(i,r,o,a,c,"throw",e)}a(void 0)}))}}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}function A(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z,W,K=(0,T.Z)()(r=(0,v.Z)((function(e){return{paper:{padding:20},avatar:{width:28,height:28},plusBalance:{color:e.palette.success.main},minusBalance:{color:e.palette.error.main}}}))(r=(0,w.$j)(E,{getSimulatedBalanceChanges:x.qg})((o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(r);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return A(this,e)});function a(){var e;B(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return L(F(e=i.call.apply(i,[this].concat(n))),"state",{isLoading:!0,diffs:[],error:!1}),L(F(e),"simulateTransaction",N(regeneratorRuntime.mark((function t(){var n,r,o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.message,o=n.network,i=n.getSimulatedBalanceChanges,t.next=3,i({message:r,network:o});case 3:if(a=t.sent){t.next=7;break}return e.setState({isLoading:!1,error:!0}),t.abrupt("return");case 7:e.setState({isLoading:!1,diffs:(0,k.orderBy)(a,["type","mint"],["desc","asc"])});case 8:case"end":return t.stop()}}),t)})))),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.simulateTransaction()}},{key:"render",value:function(){var e=this,t=this.props,n=t.mints,r=t.classes,o=t.storedNetwork,i=t.network,a=t.t;return this.state.isLoading?s.createElement(c.Z,{display:"flex",alignItems:"center",justifyContent:"center"},s.createElement(h.Z,null)):this.state.error?s.createElement(g.Z,{severity:"warning"},a("simulate_transaction_failed_on_network",{network:P.g[i||(null==o?void 0:o.cluster)||"mainnet"].name})):s.createElement(d.Z,{elevation:2,className:r.paper},!this.state.diffs.length&&s.createElement(y.Z,{variant:"body1"},a("simulate_transaction_no_changes",{network:P.g[i||(null==o?void 0:o.cluster)||"mainnet"].name})),this.state.diffs.map((function(t,o){var i=n[t.mint],a="wallet"===t.type?"SOL":null==i?void 0:i.symbol,u=t.uiDifference.startsWith("-");return s.createElement(c.Z,{key:o},s.createElement(c.Z,{display:"flex",alignItems:"center"},s.createElement(c.Z,{mr:1},s.createElement(b.Z,{src:"wallet"===t.type?Z.vx.logoURI:null==i?void 0:i.logoURI,className:r.avatar})),s.createElement(y.Z,{variant:"body1"},a||(0,S.r)(t.mint)),s.createElement(c.Z,{flexGrow:1}),s.createElement(y.Z,{variant:"body1",className:u?r.minusBalance:r.plusBalance},!u&&"+",t.uiDifference," ",a)),o<e.state.diffs.length-1&&s.createElement(c.Z,{mt:2,mb:2},s.createElement(m.Z,{light:!0})))})))}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s.Component),L(o,"propTypes",{t:l().func,classes:l().object,message:l().any,network:l().string,storedNetwork:l().object,mints:l().object,index:l().number,multiple:l().bool,getSimulatedBalanceChanges:l().func}),r=o))||r)||r)||r;function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},G(e,t)}function Y(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return X(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q,J,ee=(0,T.Z)()((W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Y(this,e)});function u(){var e;U(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $(X(e=i.call.apply(i,[this].concat(n))),"state",{key:0}),$(X(e),"reload",(function(){e.setState((function(e){return{key:e.key+1}}))})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.network,n=e.index,r=e.multiple,o=e.message,i=e.t;return s.createElement(c.Z,null,s.createElement(c.Z,{mb:2,display:"flex",alignItems:"center",justifyContent:"space-between"},s.createElement(y.Z,{variant:"body1"},r?i("transaction_number_simulation",{number:n+1}):i("transaction_simulation"),":"),s.createElement(a.Z,{size:"small",variant:"text",color:"primary",onClick:this.reload},i("action_reload"))),s.createElement(K,{key:this.state.key,network:t,message:o}))}}])&&H(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(s.Component),$(W,"propTypes",{t:l().func,message:l().any,network:l().string,index:l().number,multiple:l().bool}),z=W))||z,te=n("./node_modules/@material-ui/core/esm/Collapse/Collapse.js");function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le,fe,pe=(0,T.Z)()(Q=(0,v.Z)((function(e){return{paper:{padding:20,overflow:"auto"},message:{wordBreak:"break-all"}}}))((J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=se(r);if(o){var n=se(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ae(this,e)});function u(){var e;re(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ue(ce(e=i.call.apply(i,[this].concat(n))),"state",{isOpen:!1}),ue(ce(e),"toggleOpen",(function(){e.setState((function(e){return{isOpen:!e.isOpen}}))})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.message,r=e.index,o=e.multiple,i=e.t;return s.createElement(c.Z,null,s.createElement(c.Z,{display:"flex",alignItems:"center",justifyContent:"space-between"},s.createElement(y.Z,{variant:"body1"},o?i("sign_transaction_raw_number",{number:r+1}):i("sign_transaction_raw"),":"),s.createElement(a.Z,{size:"small",variant:"text",color:"primary",onClick:this.toggleOpen},this.state.isOpen?i("action_hide"):i("action_show"))),s.createElement(te.Z,{in:this.state.isOpen},s.createElement(c.Z,{mt:2},s.createElement(d.Z,{elevation:2,className:t.paper},s.createElement(y.Z,{variant:"caption",className:t.message},n)))))}}])&&oe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(s.Component),ue(J,"propTypes",{t:l().func,message:l().string,classes:l().object,index:l().number,multiple:l().bool}),Q=J))||Q)||Q,me=n("./node_modules/@solana/web3.js/lib/index.browser.esm.js");function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},be(e,t)}function ge(e,t){if(t&&("object"===de(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}var ve,we,je,Oe,_e,Ee=(0,T.Z)()(le=(0,v.Z)((function(e){return{paper:{padding:20,maxHeight:150,overflow:"auto"},message:{wordBreak:"break-all"}}}))((fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=he(r);if(o){var n=he(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ge(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).signMessages=t.props.messages.map((function(e){return function(e){try{var t=me.Message.from(e),n=t.accountKeys;if(1===t.instructions.length&&"mock6kYRs9QHRodqcUHcUn3NWXWmPAdFV3LGuvsYvec"===n[t.instructions[0].programIdIndex].toString()){var r=t.instructions[0],o=p().decode(r.data);return(new TextDecoder).decode(o)}return null}catch(e){return null}}(e)})),t.messages=t.props.messages.map((function(e){return p().encode(e)})),t}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.origin,r=t.messages,o=t.network,i=t.classes,a=t.t;return s.createElement(s.Fragment,null,s.createElement(c.Z,{mb:6},s.createElement(y.Z,{variant:"h2",align:"center"},a("sign_transaction",{count:this.messages.length}))),s.createElement(c.Z,{mb:4},s.createElement(y.Z,{variant:"body1",align:"center"},a("origin_requesting_sign",{origin:n,count:this.messages.length}))),s.createElement(c.Z,{mb:4},this.messages.map((function(t,n){return s.createElement(c.Z,{mb:3,key:n},e.signMessages[n]?s.createElement(c.Z,{mb:3},s.createElement(y.Z,{variant:"body1",gutterBottom:!0},a("transaction_message"),":"),s.createElement(d.Z,{elevation:2,className:i.paper},s.createElement(y.Z,{variant:"caption",className:i.message},e.signMessages[n]))):s.createElement(s.Fragment,null,s.createElement(c.Z,{mb:3},s.createElement(ee,{message:r[n],network:o,index:n,multiple:e.messages.length>1})),s.createElement(c.Z,{mb:3},s.createElement(pe,{message:t,index:n,multiple:e.messages.length>1}))),n<e.messages.length-1&&s.createElement(m.Z,{light:!0}))}))))}}])&&ye(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s.Component),ve=fe,we="propTypes",je={t:l().func,origin:l().string,network:l().string,messages:l().any,classes:l().object},we in ve?Object.defineProperty(ve,we,{value:je,enumerable:!0,configurable:!0,writable:!0}):ve[we]=je,le=fe))||le)||le;function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pe(e,t)}function Se(e,t){if(t&&("object"===xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ze(e)}function Ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce,Ne,Be=(0,T.Z)()(Oe=(0,v.Z)((function(e){return{paper:{padding:20,maxHeight:150,overflow:"auto"},message:{wordBreak:"break-all"}}}))((_e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(r);if(o){var n=Te(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Se(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Re(Ze(t=i.call(this,e)),"getMessage",(function(e){var n=e.message,r=e.display,o=t.props.t;return"utf8"===r?(new TextDecoder).decode(n):"hex"===r?"0x".concat(function(e){return Array.prototype.map.call(e,(function(e){return"00".concat(e.toString(16)).slice(-2)})).join("")}(n)):s.createElement("i",null,o("error_unable_to_decode_message"))})),t.message=t.getMessage(e),t}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.origin,n=e.classes,r=e.t;return s.createElement(s.Fragment,null,s.createElement(c.Z,{mb:6},s.createElement(y.Z,{variant:"h2",align:"center"},r("transaction_sign_message"))),s.createElement(c.Z,{mb:4},s.createElement(y.Z,{variant:"body1",align:"center"},r("transaction_origin_is_requesting_sign",{origin:t}),":")),s.createElement(c.Z,{mb:4},s.createElement(y.Z,{variant:"body1",gutterBottom:!0},r("transaction_message"),":"),s.createElement(d.Z,{elevation:2,className:n.paper},s.createElement(y.Z,{variant:"caption",className:n.message},this.message))))}}])&&ke(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s.Component),Re(_e,"propTypes",{t:l().func,origin:l().string,message:l().any,display:l().any,classes:l().object}),Oe=_e))||Oe)||Oe,Ie=n("./src/common/utils/buffer.js"),De=n("./src/common/utils/localStorage.js"),Ae=n("./node_modules/uuid/dist/esm-browser/v4.js"),Fe=function(e){var t=e.message,n=e.origin,r=(0,De.er)("solflaresigneddata")||[],o=(0,Ae.Z)();r.length>100&&r.shift(),r.push({id:o,message:t,origin:n,timestamp:Math.floor(new Date/1e3)}),(0,De.BU)(r,"solflaresigneddata")};function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Le(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Le(i,r,o,a,c,"next",e)}function c(e){Le(i,r,o,a,c,"throw",e)}a(void 0)}))}}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ke(e,t)}function qe(e,t){if(t&&("object"===Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ue(e)}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=(0,T.Z)()(Ce=(0,v.Z)((function(e){return{actionsContainer:{background:e.dark?"linear-gradient(180deg, #29292B 0%, #232326 100%)":"linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0.9) 100%)"}}}))((Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}(l,e);var t,n,r,o,u=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=He(r);if(o){var n=He(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qe(this,e)});function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Ge(Ue(t=u.call(this,e)),"getMessageType",(function(e,t){if("signTransaction"===e.method||"signAllTransactions"===e.method)return"transaction";try{var n=me.Message.from(t[0]);if(me.Transaction.populate(n,[]))return"transaction"}catch(e){}return"message"})),Ge(Ue(t),"getDataToSign",(function(e){var t,n=e.method,r=e.params;return"signTransaction"===n?[p().decode(null==r?void 0:r.message)]:"signAllTransactions"===n?null==r||null===(t=r.messages)||void 0===t?void 0:t.map((function(e){return p().decode(e)})):"sign"===n?[(0,Ie.q)(null==r?void 0:r.data)]:"signMessage"===n?[(0,Ie.q)(null==r?void 0:r.message)]:null})),Ge(Ue(t),"reject",(function(){var e=t.props.t;t.props.onCancelSign(e("transaction_canceled"))})),Ge(Ue(t),"approve",ze(regeneratorRuntime.mark((function e(){var n,r,o,i,a,c,s,u,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,r=n.wallet,o=n.onSign,i=n.onCancelSign,a=n.request,c=n.origin,s=n.t,e.prev=1,"signAllTransactions"!==a.method){e.next=12;break}return e.next=5,r.createSignatureMultiple(t.dataToSign,!0,null,!0);case 5:if(u=e.sent){e.next=9;break}return i(s("transaction_canceled")),e.abrupt("return");case 9:o({signatures:u}),e.next=20;break;case 12:return e.next=14,r.createSignature(t.dataToSign[0],!0,null,!0);case 14:if(l=e.sent){e.next=18;break}return i(s("transaction_canceled")),e.abrupt("return");case 18:"message"===t.messageType&&(f=(new TextDecoder).decode(t.dataToSign[0]),Fe({message:f,origin:c})),o({signature:l});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),i((null===e.t0||void 0===e.t0?void 0:e.t0.message)||s("error_signing_failed"));case 25:case"end":return e.stop()}}),e,null,[[1,22]])}))));try{t.dataToSign=t.getDataToSign(e.request)}catch(e){t.dataToSign=null}return t.messageType=t.getMessageType(e.request,t.dataToSign),t}return t=l,(n=[{key:"render",value:function(){var e,t=this.props,n=t.classes,r=t.origin,o=t.request,u=t.network,l=t.t;return s.createElement(i.Z,{maxWidth:"sm"},s.createElement(c.Z,{pb:10},"transaction"===this.messageType&&s.createElement(Ee,{messages:this.dataToSign,origin:r,network:u}),"message"===this.messageType&&s.createElement(Be,{message:this.dataToSign[0],display:null==o||null===(e=o.params)||void 0===e?void 0:e.display,origin:r})),s.createElement(c.Z,{className:n.actionsContainer,display:"flex",alignItems:"center",justifyContent:"space-around",position:"fixed",p:2,bottom:0,left:0,right:0},s.createElement(a.Z,{variant:"outlined",color:"primary",onClick:this.reject,size:"large"},l("action_reject")),s.createElement(a.Z,{variant:"contained",color:"primary",onClick:this.approve,size:"large"},l("action_approve"))))}}])&&We(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(s.Component),Ge(Ne,"propTypes",{t:l().func,classes:l().object,origin:l().string,network:l().string,wallet:l().object,request:l().object,onSign:l().func,onCancelSign:l().func}),Ce=Ne))||Ce)||Ce},"./src/assets/connect-blocked-icon.png":function(e,t,n){e.exports=n.p+"assets/connect-blocked-icon.179b7492..png"}}]);