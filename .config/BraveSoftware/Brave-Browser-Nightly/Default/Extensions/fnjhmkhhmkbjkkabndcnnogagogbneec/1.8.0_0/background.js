(()=>{var e,t={67294:(e,t,n)=>{"use strict";e.exports=n(72408)},75447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={staticServerAddress:"https://axieinfinity.com/wallet-server",graphql:"https://graphql-gateway.axieinfinity.com/graphql",multicallMainnetAddress:"0xc76d0d0d3aa608190f78db02bf2f5aef374fc0b9",multicallTestnetAddress:"0x31c9ef8a631e2489e69833df3b2cb4bf0dc413bc"}},61982:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionTrackerModule=t.getStore=t.storage=void 0;var s=n(84569),u=n(22358),l=c(n(17187)),d=n(19416);t.storage={get:function(e){return i(void 0,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,d.browser.storage.local.get(e)];case 1:return[2,t.sent()[e.toString()]||[]]}}))}))},set:function(e,t){var n;return d.browser.storage.local.set(((n={})[e.toString()]=t,n))}},t.getStore=function(e){return new s.TransactionStore(e,"transactions.v1",t.storage)};var f=function(e){function n(r){var o=e.call(this,r,{})||this;o.event=new l.default;var i=t.getStore(r.network.id);return o.store=i,o.currentTracker=new s.TransactionTracker(i,n.intervalDuration,r.provider),o}return o(n,e),n.prototype.getAllTransactions=function(e){return i(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,this.store.get()];case 1:return t=n.sent(),void 0!==e?[2,t.filter((function(t){return t.txParams.from===e}))]:[2,t]}}))}))},n.prototype.updateConfig=function(e){e.network&&e.provider?(this.restartTracker(e),this.setConfig(e)):console.error("Network and provider must be provided")},n.prototype.stopCurrent=function(){this.currentTracker.stop(),this.currentTracker.removeAllListeners()},n.prototype.restartTracker=function(e){this.stopCurrent();var r=t.getStore(e.network.id);return this.store=r,this.currentTracker=new s.TransactionTracker(r,n.intervalDuration,e.provider),this.registerEvent(),this.currentTracker.start(),this.currentTracker},n.prototype.registerEvent=function(){var e=this;this.currentTracker.on(s.TxEvent.TxCreated,(function(t){e.event.emit(s.TxEvent.TxCreated,t)})),this.currentTracker.on(s.TxEvent.TxUpdated,(function(t){e.event.emit(s.TxEvent.TxUpdated,t)})),this.currentTracker.on(s.TxEvent.TxRemoved,(function(t){e.event.emit(s.TxEvent.TxRemoved,t)}))},n.prototype.on=function(e,t){this.event.on(e,t)},n.intervalDuration=15e3,n}(u.BaseModule);t.TransactionTrackerModule=f},49976:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(39089),a=n(17045),c=n(19416),s=n(75447),u=n(38300),l=n(48097),d=n(28187),f=n(97215),h=n(32966);console.log("%c Initializing background script.","background: red; color: white; font-size: 20px");var p=function(e){return r(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return[4,fetch(s.config.staticServerAddress+"/networks/"+e+"/contracts")];case 1:return[4,r.sent().json()];case 2:return t=r.sent(),n=new l.ContractStorage(e),t.length&&n.set(t),[2]}}))}))};r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,d.enableModules()];case 1:return e.sent(),h.store.getActions().account.checkIsWalletCreated(),p("ronin-mainnet"),p("ronin-testnet"),a.wrapStore(h.store,{dispatchResponder:i.enhancedPromiseResponder}),[2]}}))}));var v=function(e){return e&&"eth_signTransaction"===e.method?Promise.reject("Signing transaction is not supported. Please use eth_sendTransaction"):e&&"eth_accounts"===e.method?new Promise((function(t,n){var r;try{var o=null===(r=h.store.getState().account.selectedAccount)||void 0===r?void 0:r.address;t({id:e.id,jsonrpc:e.jsonrpc,result:o?[o]:[]})}catch(e){n("Can not get selected account")}})):e&&!["eth_accounts","eth_sendTransaction","eth_sign","personal_sign","eth_signTypedData","eth_getFreeGasRequests"].includes(e.method)?new Promise((function(t,n){d.networkModule.provider.send(e,(function(e,r){e&&(console.log(e),n(e)),t(r)}))})):new Promise((function(t,n){d.networkModule.provider.send(e,(function(e,r){e&&n(e),t(r)}))}))};c.browser.runtime.onMessage.addListener((function(e,t){if(c.browser.runtime.id!==t.id)return console.error("Receiving message from unauthorized sender "+t+"."),Promise.reject();switch(e.type){case u.REQUEST_TYPES.ASK_PROVIDER_FROM_CONTENT_SCRIPT:return f.actionQueue.setShouldOpenWindow(!0),v(e.message);case u.REQUEST_TYPES.ASK_PROVIDER_FROM_POPUP:return f.actionQueue.setShouldOpenWindow(!1),v(e.message)}})),f.actionQueue.on(f.Event.ActionAdded,(function(){var e=f.actionQueue.actions[0];e&&h.store.getActions().currentAction.setCurrent(e)}))},10587:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.emptyWalletMiddleware=t.Encryptor=t.crypto=void 0;var c=n(86210),s=n(55835),u=n(22140),l=n(89539);t.crypto={pbkdf2:l.promisify(s.pbkdf2)};var d=function(e){function t(){return e.call(this,void 0)||this}return o(t,e),t.prototype.setPassword=function(e){this.password=e},t}(c.BrowserEncryptor);t.Encryptor=d,t.emptyWalletMiddleware=function(){u.createWalletMiddleware({getAccounts:function(){return i(void 0,void 0,void 0,(function(){return a(this,(function(e){return[2,[]]}))}))}})}},28187:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ledgerModule=t.contactModule=t.privateKeyModule=t.trezorModule=t.userSettingModule=t.transactionTrackerModule=t.networkModule=t.encryptor=t.keychainModule=t.enableModules=t.privateKeyModuleStore=t.vaultStore=void 0;var i=n(22358),a=n(2153),c=n(19416),s=n(32966),u=c.browser.storage.local,l=n(84569),d=n(43942),f=n(10587),h=n(97215),p=n(83491),v=n(12207),y=n(67549),g=n(35641),w=n(61982),b=n(94154),m=n(58667),_=i.roninNetworks[0];t.vaultStore={get:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,u.get("encryptedVault")];case 1:return[2,e.sent().encryptedVault]}}))}))},set:function(e){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,u.set({encryptedVault:e})];case 1:return t.sent(),[2,e]}}))}))}};var A={key:"userSettings",get:function(){return r(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,u.get(A.key)];case 1:return(e=t.sent())[A.key]?[2,JSON.parse(e[A.key])]:[2]}}))}))},set:function(e){return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return[4,u.set((t={},t[A.key]=JSON.stringify(e),t))];case 1:return n.sent(),[2]}}))}))}},k=new i.UserSettingModule({currentFiatOption:"USD",selectedNetwork:i.roninNetworks[0].id},A);t.userSettingModule=k;var S=new f.Encryptor;t.encryptor=S;var T=new i.KeychainModule({encryptor:S,crypto:f.crypto,validateSeedphrase:a.validateMnemonic},t.vaultStore);t.keychainModule=T;var P=new i.NetworkModule({network:_,middlewares:[f.emptyWalletMiddleware]});t.networkModule=P;var x=b.rpcEngineProviderToLegacy(P.provider),M=new w.TransactionTrackerModule({network:_,provider:x});t.transactionTrackerModule=M;var E=new g.TrezorModule;t.trezorModule=E;var O=new y.LedgerModule;t.ledgerModule=O,t.privateKeyModuleStore=b.createModuleStore("privateKeyAccounts.v2");var C=new i.PrivateKeyModule({encryptor:S},{accounts:[]},t.privateKeyModuleStore);t.privateKeyModule=C;var j=m.composeWalletMiddleware(P,h.actionQueue,M);P.updateConfig({middlewares:[j]});var N=new v.ContactModule;t.contactModule=N,t.enableModules=function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return P.subscribe((function(e){var t;s.store.getActions().network._setNetwork(e.activeNetwork);var n=b.rpcEngineProviderToLegacy(P.provider);M.updateConfig({network:e.activeNetwork,provider:n});var r=null===(t=s.store.getState().account.selectedAccount)||void 0===t?void 0:t.address;r&&s.store.getActions().activities.fetchByAddress(r)})),M.on(p.TxEvent.TxCreated,(function(e){s.store.getActions().activities.addOrUpdateRecord(e)})),M.on(p.TxEvent.TxUpdated,(function(e){e.status===l.TransactionStatus.Dropped&&d.trackEvent(d.TrackingCategory.Transactions,d.TrackingActionType.Noop,"Tx Dropped"),s.store.getActions().activities.addOrUpdateRecord(e)})),M.on(p.TxEvent.TxRemoved,(function(e){s.store.getActions().activities.removeRecord(e)})),k.subscribe((function(e){var t=i.roninNetworks.find((function(t){return t.id===e.selectedNetwork}));t&&P.updateConfig({network:t})})),[4,k.enable()];case 1:return e.sent(),P.enable(),T.enable(),[4,E.enable()];case 2:return e.sent(),[4,E.migrateFromPreviousVersion()];case 3:return e.sent(),E.initTrezor(),M.enable(),C.enable(),N.enable(),[4,O.enable()];case 4:return e.sent(),[2]}}))}))}},97215:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.actionQueue=t.ActionQueue=t.ActionType=t.Event=void 0;var a,c,s=n(17187),u=n(18269),l=n(19416);!function(e){e.ActionUpdate="action-update",e.ActionAdded="queue-added",e.ActionRemoved="queue-removed"}(a=t.Event||(t.Event={})),function(e){e.SignMessage="sign-message",e.SignTransaction="sign-transaction",e.ApproveContract="approve-contract",e.Enable="enable"}(c=t.ActionType||(t.ActionType={}));var d=function(e){function t(){var t=e.call(this)||this;return t.actions=[],t.nextId=0,t.shouldOpenWindow=!1,t}return o(t,e),t.prototype.setShouldOpenWindow=function(e){this.shouldOpenWindow=e},t.prototype.add=function(e){var t=this.nextId;return this.actions.push(i(i({},e),{id:t,createdAt:Date.now()})),this.nextId++,this.emit(a.ActionAdded),this.shouldOpenWindow&&(navigator.userAgent.toLowerCase().includes("firefox")?l.browser.windows.create({url:"popup.html?closeOnComplete=true",type:"detached_panel",width:395,height:600,top:0}):window.open("popup.html?closeOnComplete=true","Ronin","width=395,height=600,status=no,scrollbars=no,resizable=no,screenX="+(screen.width-372)+",screenY=0")),t},t.prototype.updateTxGas=function(e,t){var n=t.gas,r=t.gasPrice;if(!this.actions.length)throw new Error("No action found");var o=this.actions.findIndex((function(t){return t.id===e}));if(o<0)throw new Error("No action found");if(this.actions[o].type!==c.SignTransaction)throw new Error("Invalid action type");if(void 0===n&&void 0===r)return this.actions[o];if(void 0!==n&&!u.isHexStrict(n)||void 0!==r&&!u.isHexStrict(r))throw new Error("Invalid gas or gasPrice");return n&&(this.actions[o].data.data.gasLimit=n),r&&(this.actions[o].data.data.gasPrice=r),this.actions[o]},t.prototype.onActionUpdate=function(e){this.addListener(a.ActionUpdate,e)},t.prototype.removeActionUpdateListener=function(e){this.removeListener(a.ActionUpdate,e)},t.prototype.rejectAction=function(e){var t=this.actions.findIndex((function(t){return t.id===e}));void 0!==t&&(this.actions.splice(t,1),this.emit(a.ActionUpdate,{id:e,status:"reject"}))},t.prototype.approveAction=function(e){var t=this.actions.findIndex((function(t){return t.id===e}));void 0!==t&&(this.actions.splice(t,1),this.emit(a.ActionUpdate,{id:e,status:"approve"}))},t.prototype.waitForApproval=function(e){var t=this;return new Promise((function(n,r){t.on(a.ActionUpdate,(function(t){var o=t.id,i=t.status;o===e&&("approve"===i?n():r())}))}))},t}(s.EventEmitter);t.ActionQueue=d,t.actionQueue=new d},83491:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getStore=t.storage=t.TxEvent=void 0;var i=n(84569),a=n(19416);t.TxEvent=i.TxEvent,t.storage={get:function(e){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,a.browser.storage.local.get(e)];case 1:return[2,t.sent()[e.toString()]||[]]}}))}))},set:function(e,t){var n;return a.browser.storage.local.set(((n={})[e.toString()]=t,n))}},t.getStore=function(e){return new i.TransactionStore(e,"transactions.v1",t.storage)}},37903:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRandomId=void 0;var n=Number.MAX_SAFE_INTEGER,r=Math.round(Math.random()*n);t.createRandomId=function(){return r%=n,r++}},32966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.store=t.initial=void 0;var r=n(39089),o=n(63649),i=n(67742),a=n(22762),c=n(68671),s=n(1666),u=n(73964);t.initial={route:{location:"/",replaceLocation:r.action((function(e,t){e.location=t}))},fullPageRoute:{location:"/",replaceLocation:r.action((function(e,t){e.location=t}))},network:u.initial,account:o.initial,contact:c.initial,currentAction:s.initial,autoLock:a.initial,activities:i.initial},t.store=r.createStore(t.initial)},63649:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},a=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.initial=t.selectedAccountStore=t.nicknameStore=t.vaultStore=t.AccountType=void 0;var c,s=n(86210),u=n(22358),l=n(2153),d=n(21964),f=n(39089),h=n(19416),p=n(38300),v=n(10587),y=n(28187),g=n(94154),w=h.browser.storage.local;!function(e){e.Software="Software",e.PrivateKey="PrivateKey",e.Hardware="Hardware"}(c=t.AccountType||(t.AccountType={})),t.vaultStore={get:function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,w.get("encryptedVault")];case 1:return[2,e.sent().encryptedVault]}}))}))},set:function(e){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,w.set({encryptedVault:e})];case 1:return t.sent(),[2,e]}}))}))}},t.nicknameStore={get:function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,w.get("nickname")];case 1:return[2,e.sent().nickname||{}]}}))}))},set:function(e){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,w.set({nickname:e})];case 1:return t.sent(),[2,e]}}))}))}},t.selectedAccountStore={get:function(){return o(void 0,void 0,Promise,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,w.get("selectedAccount")];case 1:return[2,e.sent().selectedAccount]}}))}))},set:function(e){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,w.set({selectedAccount:e})];case 1:return t.sent(),[2,e]}}))}))}},t.initial={selectedAccount:void 0,setSelectedAccount:f.action((function(e,t){e.selectedAccount=t})),changeAccount:f.alias((function(e,n){return o(void 0,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,t.selectedAccountStore.set(n)];case 1:return r.sent()?(e.setSelectedAccount(n),g.notifyDapps(p.RONIN_EVENT.ACCOUNT_CHANGED),[2,!0]):[2,!1]}}))}))})),accounts:[],setAccounts:f.action((function(e,t){e.accounts=t;var n=t.find((function(t){var n;return t.address===(null===(n=e.selectedAccount)||void 0===n?void 0:n.address)}));n&&(e.selectedAccount=n)})),createNewWallet:f.alias((function(e,n){return o(void 0,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:if(!l.validateMnemonic(n.seedPhrase))throw new Error("Invalid seed phrase.");return e=new s.BrowserEncryptor(n.password),[4,s.MnemonicVault.createMnemonicVault(n.seedPhrase,e,t.vaultStore)];case 1:return r.sent(),[4,y.privateKeyModule.updateAndPersist({accounts:[]})];case 2:return r.sent(),[2]}}))}))})),isUnlocked:!1,setIsUnlocked:f.action((function(e,t){e.isUnlocked=t})),unlock:f.alias((function(e,n){return o(void 0,void 0,void 0,(function(){var r,o,a,c,u,l;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,8,,9]),r=new s.BrowserEncryptor(n),o=new s.MnemonicVault({encryptor:r,store:t.vaultStore}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,o.retrieveFromStore()];case 2:return i.sent(),[3,4];case 3:throw i.sent(),new Error("Wrong password");case 4:return y.keychainModule.updateConfig({encryptor:r}),[4,y.keychainModule.restoreKeychain()];case 5:return i.sent(),y.privateKeyModule.updateConfig({encryptor:r}),y.contactModule.updateConfig({encryptor:r}),[4,t.selectedAccountStore.get()];case 6:return a=i.sent(),[4,e.getAllAccounts()];case 7:return(c=i.sent())[0]&&(u=c.find((function(e){return e.address===(null==a?void 0:a.address)})),e.changeAccount(null!=u?u:c[0]),e.setIsUnlocked(!0)),[3,9];case 8:throw l=i.sent(),console.error(l),new Error("Wrong password");case 9:return[2]}}))}))})),lock:f.action((function(e){e.isUnlocked=!1,e.selectedAccount=void 0,e.accounts=[],y.keychainModule.keychain=void 0,y.keychainModule.updateConfig({encryptor:new v.Encryptor}),y.privateKeyModule.updateConfig({encryptor:new v.Encryptor}),y.contactModule.updateConfig({encryptor:new v.Encryptor})})),isWalletCreated:void 0,setIsWalletCreated:f.action((function(e,t){e.isWalletCreated=t})),checkIsWalletCreated:f.alias((function(e){return o(void 0,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,t.vaultStore.get()];case 1:return n=r.sent(),e.setIsWalletCreated(void 0!==n),[2,void 0!==n]}}))}))})),getSeedPhrase:f.alias((function(e,n){return o(void 0,void 0,void 0,(function(){var e,r,o,a;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e=new s.BrowserEncryptor(n),r=new s.MnemonicVault({encryptor:e,store:t.vaultStore}),[4,(o=new s.Keychain(r)).getAccounts()];case 1:return i.sent()[0]?[2,null===(a=o.vault.getVault())||void 0===a?void 0:a.mnemonic]:[3,3];case 2:throw i.sent(),new Error("Wrong password");case 3:return[2]}}))}))})),getPrivateKey:f.alias((function(e,n){return o(void 0,void 0,void 0,(function(){var e,r,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e=new s.BrowserEncryptor(n),r=new s.MnemonicVault({encryptor:e,store:t.vaultStore}),[4,new s.Keychain(r).getAccounts()];case 1:return(o=i.sent())[0]?[2,o[0].privateKey]:[3,3];case 2:throw i.sent(),new Error("Wrong password");case 3:return[2]}}))}))})),getPrivateKeyForAccount:f.alias((function(e,n){var r=n.password,a=n.address;return o(void 0,void 0,void 0,(function(){var e,n,o,c,l;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=new s.BrowserEncryptor(r),y.privateKeyModule.getState().accounts.find((function(e){return e.address===a}))?[4,new u.PrivateKeyModule({encryptor:e},{accounts:[]},y.privateKeyModuleStore).enable()]:[3,2];case 1:return i.sent(),[2,y.privateKeyModule.getPrivateKeyFor(a)];case 2:return n=new s.MnemonicVault({encryptor:e,store:t.vaultStore}),[4,(o=new s.Keychain(n)).getAccounts()];case 3:if(i.sent(),null!==(c=o.getAccountByAddress(a)))return[2,c.privateKey];throw new Error("Cannot find account");case 4:throw l=i.sent(),console.error(l),new Error("Wrong password");case 5:return[2]}}))}))})),getAllAccounts:f.alias((function(e){return o(void 0,void 0,void 0,(function(){var n,r,o,s,u,l,d,f,h,p;return i(this,(function(i){switch(i.label){case 0:return[4,t.nicknameStore.get()];case 1:return n=i.sent(),r=[y.keychainModule.getState().accounts.map((function(e){return e.address})),y.privateKeyModule.getState().accounts.map((function(e){return e.address})),y.trezorModule.getState().addresses,y.ledgerModule.getState().addresses.map((function(e){return e.address}))],o=r[1],s=r[2],u=r[3],l=r[0].map((function(e,t){return{address:e,type:c.Software,name:n[e]||"Account #"+(t+1),index:t}})),d=o.map((function(e,t){return{address:e,type:c.PrivateKey,name:n[e]||"Private Key #"+(t+1),index:t}})),f=s.map((function(e,t){return{address:e,type:c.Hardware,name:n[e]||"Trezor #"+(t+1),index:t}})),h=u.map((function(e,t){return{address:e,type:c.Hardware,name:n[e]||"Ledger #"+(t+1),index:t}})),p=a(a(a(a([],l),d),f),h),e.setAccounts(p),[2,p]}}))}))})),latestAccount:void 0,setLatestAccount:f.action((function(e,t){e.latestAccount=t})),createAccountFromSeed:f.alias((function(e,t){var n=t.nickname;return o(void 0,void 0,void 0,(function(){var t,r,o;return i(this,(function(i){switch(i.label){case 0:return[4,y.keychainModule.createNewAccount()];case 1:return t=i.sent(),n?[4,e.setAccountNickname({address:t,nickname:n})]:[3,3];case 2:i.sent(),i.label=3;case 3:return[4,e.getAllAccounts()];case 4:if(r=i.sent(),o=r.find((function(e){return e.address===t})))return[2,o];throw new Error("Can not get account information")}}))}))})),setAccountNickname:f.alias((function(e,n){var a=n.address,c=n.nickname;return o(void 0,void 0,void 0,(function(){var e,n,o;return i(this,(function(i){switch(i.label){case 0:return[4,t.nicknameStore.get()];case 1:return e=i.sent(),n=r(r({},e),((o={})[a]=c,o)),[4,t.nicknameStore.set(n)];case 2:return i.sent(),[2]}}))}))})),trezorAccounts:[],setTrezorAccounts:f.action((function(e,t){e.trezorAccounts=t})),getTrezorAccounts:f.alias((function(e){return o(void 0,void 0,void 0,(function(){var t;return i(this,(function(n){return t=y.trezorModule.getState().addresses,e.setTrezorAccounts(t),[2,!0]}))}))})),exploreTrezorAccounts:f.alias((function(e,t){var n=t.from,r=t.to;return o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,y.trezorModule.getAccountsFromDevice(n,r)];case 1:return[2,e.sent()]}}))}))})),createNewTrezorAccount:f.alias((function(e,t){return o(void 0,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return[4,y.trezorModule.saveNewAccount(t)];case 1:return o.sent(),[4,e.getAllAccounts()];case 2:return n=o.sent(),(r=n.find((function(e){return e.address===t})))?[4,e.changeAccount(r)]:[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))})),removeTrezorAccount:f.alias((function(e,t){return o(void 0,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return y.trezorModule.removeAccount(t),[4,e.getAllAccounts()];case 1:return(n=r.sent())[0]?[4,e.changeAccount(n[0])]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))})),removeHadrwareAccount:f.alias((function(e,t){return o(void 0,void 0,void 0,(function(){var n,r,o,a;return i(this,(function(i){return n=y.trezorModule.getAccounts(),r=y.ledgerModule.getState().addresses.map((function(e){return e.address})),o=n.includes(t),a=r.includes(t),o?[2,e.removeTrezorAccount(t)]:a?[2,e.removeLedgerAccount(t)]:[2]}))}))})),createNewLedgerAccount:f.alias((function(e,t){return o(void 0,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return[4,y.ledgerModule.saveNewAccount(t)];case 1:return o.sent(),[4,e.getAllAccounts()];case 2:return n=o.sent(),(r=n.find((function(e){return e.address===t.address})))?[4,e.changeAccount(r)]:[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))})),removeLedgerAccount:f.alias((function(e,t){return o(void 0,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return y.ledgerModule.removeAccount(t),[4,e.getAllAccounts()];case 1:return(n=r.sent())[0]?[4,e.changeAccount(n[0])]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))})),tryConnectLedgerModule:f.alias((function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,y.ledgerModule.connect(!1)];case 1:return e.sent(),[4,y.ledgerModule.closeConnection()];case 2:return e.sent(),[2,!0];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))})),findLedgerAddress:f.alias((function(e,t){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,y.ledgerModule.getState().addresses.find((function(e){return e.address===t}))]}))}))})),importPrivateKeyAccount:f.alias((function(e,t){return o(void 0,void 0,void 0,(function(){var n,r,o,a,c,s;return i(this,(function(i){switch(i.label){case 0:return[4,e.getAllAccounts()];case 1:if(n=i.sent(),r=n.map((function(e){return e.address})),o=d.bufferToHex(d.privateToAddress(d.toBuffer(t))),r.includes(o))throw new Error("Account existed");return[4,y.privateKeyModule.importAccount(t)];case 2:return a=i.sent(),[4,e.getAllAccounts()];case 3:return c=i.sent(),(s=c.find((function(e){return e.address===a.address})))?[4,e.changeAccount(s)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))})),removePrivateKeyAccount:f.alias((function(e,t){return o(void 0,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,y.privateKeyModule.removeAccount(t)];case 1:return r.sent(),[4,e.getAllAccounts()];case 2:return(n=r.sent())[0]?[4,e.changeAccount(n[0])]:[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}))}},67742:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.initial=void 0;var i=n(39089),a=n(28187);t.initial={records:[],replaceRecords:i.action((function(e,t){e.records=t})),removeRecord:i.action((function(e,t){var n=e.records.findIndex((function(e){return e.id===t.id}));n>-1&&e.records.splice(n,1)})),addOrUpdateRecord:i.action((function(e,t){if(t.txParams.from===e.selectedAccount){var n=e.records.findIndex((function(e){return e.id===t.id}));n>-1?e.records.splice(n,1,t):e.records.push(t),e.records.sort((function(e,t){return void 0===e.createdAtTimestamp?-1:void 0===t.createdAtTimestamp?1:e.createdAtTimestamp&&t.createdAtTimestamp?t.createdAtTimestamp-e.createdAtTimestamp:0}))}})),onAccountChange:i.thunkOn((function(e,t){return[t.account.setSelectedAccount]}),(function(e,t){return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(r){return n=t.payload.address,e.setSelectedAccount(n),e.fetchByAddress(n),[2]}))}))})),setSelectedAccount:i.action((function(e,t){e.selectedAccount=t})),fetchByAddress:i.alias((function(e,t){return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,a.transactionTrackerModule.getAllTransactions(t)];case 1:return n=r.sent().sort((function(e,t){return(t.createdAtTimestamp||0)-(e.createdAtTimestamp||0)})).splice(0,50),e.replaceRecords(n),[2]}}))}))}))}},22762:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.initial=t.getInitLockSetting=t.defaultLockSetting=t.storageLockSettingKey=void 0;var o=n(39089),i=n(32966);t.storageLockSettingKey="lockSetting",t.defaultLockSetting={time:300},t.getInitLockSetting=function(){var e=r(r({},t.defaultLockSetting),{ready:!0}),n=localStorage.getItem(t.storageLockSettingKey);try{n&&(e=JSON.parse(n))}catch(e){console.error(e)}return e};var a=function(e){if(0!==e)try{return setTimeout((function(){(0,i.store.getActions().account.lock)(),console.info("Auto lock")}),1e3*e)}catch(e){console.error(e)}},c=t.getInitLockSetting();t.initial={lockSetting:c,lockTimeout:a(c.time),setLockSetting:o.action((function(e,t){e.lockSetting=t})),resetLockAlarm:o.action((function(e,t){e.lockTimeout&&clearTimeout(e.lockTimeout),e.lockTimeout=a(t.time)})),onSetLockSetting:o.thunkOn((function(e,t){return[t.autoLock.setLockSetting]}),(function(e,t){var n=t.payload;e.resetLockAlarm(n)}))}},68671:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.initial=void 0;var i=n(36124),a=n(39089),c=n(28187);t.initial={contacts:[],setContacts:a.action((function(e,t){e.contacts=t})),getAccountAddress:a.alias((function(){var e,t=null===(e=c.keychainModule.getState().accounts[0])||void 0===e?void 0:e.address;if(void 0===t)throw new Error("first account address is not found");return t})),generateEncryptionKey:a.alias((function(e){return r(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return t=e.getAccountAddress(),[4,c.keychainModule.getPrivateKeyFor(t)];case 1:return n=r.sent(),[2,i.cipher.keygen(n,t)]}}))}))})),encryptString:a.alias((function(e,t){return r(void 0,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,c.contactModule.manager.getCipherKey()];case 1:return e=r.sent(),[4,c.contactModule.manager.getCipherIV()];case 2:return n=r.sent(),[2,i.cipher.encrypt(t,e,n)]}}))}))})),isAuthenticated:a.alias((function(e,t){return c.contactModule.manager.isAuthenticated(t)})),auth:a.alias((function(e){return r(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return t=e.getAccountAddress(),[4,e.generateEncryptionKey()];case 1:return n=r.sent(),[2,c.contactModule.manager.auth(t,n)]}}))}))})),getContacts:a.alias((function(e){return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return[4,c.contactModule.manager.getContacts()];case 1:return t=n.sent(),e.setContacts(t),[2,t]}}))}))})),getContact:a.alias((function(e,t){return c.contactModule.manager.getContact(t)})),addContact:a.alias((function(e,t){return c.contactModule.manager.addContact(t)})),updateContact:a.alias((function(e,t){return c.contactModule.manager.updateContact(t)})),deleteContact:a.alias((function(e,t){return c.contactModule.manager.deleteContact(t)})),resetContact:a.alias((function(){return c.contactModule.manager.reset()}))}},1666:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.initial=void 0;var o=n(39089),i=n(19416),a=n(97215),c=function(e){i.browser.browserAction.setBadgeBackgroundColor({color:"#ff0000"}),i.browser.browserAction.setBadgeText({text:e})};t.initial={current:void 0,setCurrent:o.action((function(e,t){e.current=t,e.queueCount=a.actionQueue.actions.length,c(e.queueCount>0?e.queueCount.toString():"")})),updateCurrentGas:o.action((function(e,t){var n,o=t.gas,i=t.gasPrice;if(null===(n=e.current)||void 0===n?void 0:n.data){var c=a.actionQueue.updateTxGas(e.current.id,{gas:o,gasPrice:i});e.current=r({},c)}})),queueCount:0,approveCurrent:o.action((function(e){void 0!==e.current&&(a.actionQueue.approveAction(e.current.id),e.current=a.actionQueue.actions[0],e.queueCount=a.actionQueue.actions.length,c(e.queueCount>0?e.queueCount.toString():""))})),rejectCurrent:o.action((function(e){void 0!==e.current&&(a.actionQueue.rejectAction(e.current.id),e.current=a.actionQueue.actions[0],e.queueCount=a.actionQueue.actions.length,c(e.queueCount>0?e.queueCount.toString():""))}))}},73964:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.initial=void 0;var i=n(22358),a=n(39089),c=n(28187);t.initial={selectedConfig:i.roninNetworks[0],_setNetwork:a.action((function(e,t){e.selectedConfig=t})),attachTrezorSubprovider:a.action((function(e){})),changeNetwork:a.alias((function(e,t){return r(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){if(void 0===(e=i.roninNetworks.find((function(e){return e.id===t}))))throw new Error("Network id cannot be found");return c.userSettingModule.setSetting({selectedNetwork:e.id}),[2]}))}))})),testNetwork:a.alias((function(e,t){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))}))}},12207:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContactModule=void 0;var c=n(36124),s=n(22358),u=n(18269),l=n(19416),d=n(28187),f=n(94154),h=l.browser.storage.local,p=f.createModuleStore("contactCipher"),v=function(e,t){return d.keychainModule.signPersonalMessage(e,u.stringToHex(t))},y=function(e){function t(){var t=e.call(this,{},{cipherKey:""},{cipherKey:{persist:!0}},p)||this,n={get:function(e){return i(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return e!==c.StorageKeys.CKey?[3,2]:[4,this.getCipherKey()];case 1:return[2,t.sent()];case 2:return[4,h.get(e)];case 3:return[2,t.sent()[e]]}}))}))},set:function(e,n){return i(t,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return e!==c.StorageKeys.CKey?[3,2]:[4,this.updateCipherKey(n)];case 1:return r.sent(),[3,4];case 2:return[4,h.set((t={},t[e]=n,t))];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},remove:function(e){return e===c.StorageKeys.CKey?t.removeCipherKey():h.remove(e)}},r=new c.ContactManager(v,n,"https://contact.roninchain.com");return t.manager=r,t}return o(t,e),t.prototype.getCipherKey=function(){return i(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:if(!(e=this.config.encryptor))throw new Error("Could not find encryptor");return[4,e.decrypt(this.state.cipherKey)];case 1:return[2,t.sent()]}}))}))},t.prototype.updateCipherKey=function(e){return i(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:if(!(t=this.config.encryptor))throw new Error("Could not find encryptor");return[4,t.encrypt(e)];case 1:return n=r.sent(),[4,this.updateAndPersist({cipherKey:n})];case 2:return r.sent(),[2]}}))}))},t.prototype.removeCipherKey=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.updateAndPersist({cipherKey:""})];case 1:return e.sent(),[2]}}))}))},t.prototype.validatePassword=function(e){var t=this.config.encryptor;return(null==t?void 0:t.password)===e},t}(s.WithStorageModule);t.ContactModule=y},67549:function(e,t,n){"use strict";var r,o=n(48764).Buffer,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LedgerModule=void 0;var l=n(22358),d=u(n(2832)),f=n(66052),h=u(n(55287)),p=u(n(11078)),v=n(21964),y=n(6636),g=n(94154).createModuleStore("ledgerAccounts.v1"),w=function(e){function t(){var t=e.call(this,{},{addresses:[]},{addresses:{persist:!0}},g)||this;return t.getHdPath=function(e){return"m/44'/60'/0'/0/"+e},t.findAccount=function(e){return t.getState().addresses.find((function(t){return t.address===e}))},t.ledgerEth=void 0,t.connected=!1,t}return i(t,e),t.prototype.isConnected=function(){return this.connected&&this.ledgerEth},t.prototype.testConnect=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.connect()];case 1:return e.sent(),[4,this.closeConnection()];case 2:return e.sent(),[2]}}))}))},t.prototype.connect=function(e){return a(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return this.isConnected()&&void 0!==this.ledgerEth?[2,this.ledgerEth]:e?[4,p.default.request()]:[3,2];case 1:return n=r.sent(),[3,4];case 2:return[4,p.default.create()];case 3:n=r.sent(),r.label=4;case 4:return t=n,this.ledgerEth=new h.default(t),this.connected=!0,[2,this.ledgerEth]}}))}))},t.prototype.closeConnection=function(){var e;return a(this,void 0,void 0,(function(){return c(this,(function(t){return null===(e=this.ledgerEth)||void 0===e||e.transport.close(),this.ledgerEth=void 0,this.connected=!1,[2]}))}))},t.prototype.getAccounts=function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,i,a;return c(this,(function(c){switch(c.label){case 0:t=Math.max(t-e,5)+e,n=[],r=e,c.label=1;case 1:return r<=t?[4,this.connect()]:[3,5];case 2:return o=c.sent(),i=this.getHdPath(r),[4,o.getAddress(i)];case 3:a=c.sent(),n.push({address:a.address.toLowerCase(),hdPath:i}),c.label=4;case 4:return r++,[3,1];case 5:return[2,n]}}))}))},t.prototype.signPersonalMessage=function(e,t){return a(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:if(void 0===(n=this.findAccount(e)))throw new Error("Address not found");return[4,this.connect()];case 1:return[4,i.sent().signPersonalMessage(n.hdPath,v.stripHexPrefix(t))];case 2:return r=i.sent(),[4,this.closeConnection()];case 3:return i.sent(),[2,v.toRpcSig(r.v,o.from(r.r,"hex"),o.from(r.s,"hex"))]}}))}))},t.prototype.signTransaction=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i,a,s,u,l,h,p;return c(this,(function(c){switch(c.label){case 0:if(void 0===(r=this.findAccount(e)))throw new Error("Address not found");return i=f.Transaction.fromTxData(t,{common:d.default.custom({chainId:n})}),a=i.getMessageToSign(!1),s=o.isBuffer(a)?a.toString("hex"):y.encode(a).toString("hex"),[4,this.connect()];case 1:return[4,(u=c.sent()).getAddress(r.hdPath)];case 2:if(c.sent().address.toLowerCase()!==e)throw new Error("Hd path does not match address");return[4,u.signTransaction(r.hdPath,s)];case 3:return l=c.sent(),[4,this.closeConnection()];case 4:return c.sent(),(h=Object.assign({},t)).v=v.addHexPrefix(l.v),h.r=v.addHexPrefix(l.r),h.s=v.addHexPrefix(l.s),p=f.Transaction.fromTxData(h,{common:d.default.custom({chainId:n}),freeze:!0}),[2,v.addHexPrefix(p.serialize().toString("hex"))]}}))}))},t.prototype.saveNewAccount=function(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return void 0!==this.state.addresses.find((function(t){return t.address===e.address.toLowerCase()}))?[2]:[4,this.updateAndPersist({addresses:s(s([],this.state.addresses),[{address:e.address.toLowerCase(),hdPath:e.hdPath}])})];case 1:return t.sent(),[2]}}))}))},t.prototype.removeAccount=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return(t=this.state.addresses.findIndex((function(t){return t.address===e})))>-1?(this.state.addresses.splice(t,1),[4,this.updateAndPersist({addresses:this.state.addresses})]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t}(l.WithStorageModule);t.LedgerModule=w},35641:function(e,t,n){"use strict";var r,o=n(48764).Buffer,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return c(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},d=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TrezorModule=void 0;var h=n(22358),p=f(n(2832)),v=n(66052),y=s(n(21964)),g=n(21964),w=f(n(49840)),b=f(n(8875)),m=n(19416),_=n(94154),A="m/44'/60'/0'/0",k=function(e){return new Promise((function(t){return setTimeout(t,e)}))},S=_.createModuleStore("trezorAccounts.v1"),T=function(e){function t(){var t=e.call(this,{},{addresses:[]},{addresses:{persist:!0}},S)||this;return t.hdk=new w.default,t.paths={},t}return i(t,e),t.prototype.initTrezor=function(){b.default.init({manifest:{email:"support@axieinfinity.com",appUrl:"https://wallet.roninchain.com/"}})},t.prototype.migrateFromPreviousVersion=function(){return u(this,void 0,void 0,(function(){var e,t,n=this;return l(this,(function(r){switch(r.label){case 0:return[4,m.browser.storage.local.get("trezorAccounts")];case 1:return e=r.sent(),(t=e.trezorAccounts||[]).length>0?(t.forEach((function(e){return u(n,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=e.toLowerCase(),this.state.addresses.find((function(e){return e===t}))?[2]:[4,this.saveNewAccount(t)];case 1:return n.sent(),[2]}}))}))})),[4,m.browser.storage.local.set({trezorAccounts:[]})]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.getAccountsFromDevice=function(e,t){return u(this,void 0,void 0,(function(){var n,r,o;return l(this,(function(i){switch(i.label){case 0:if(t<0||e<0)throw new Error("Invalid from and to");return[4,this.unlock()];case 1:for(i.sent(),n=[],r=e;r<t;r++)o=this.addressFromIndex("m",r),n.push(o.toLowerCase()),this.paths[y.toChecksumAddress(o)]=r;return[2,n]}}))}))},t.prototype.getAccounts=function(){if(!1===this.enabled)throw new Error("Module has to be enabled to get accounts");return this.state.addresses},t.prototype.saveNewAccount=function(e){return u(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return void 0!==this.state.addresses.find((function(t){return t===e}))?[2]:[4,this.updateAndPersist({addresses:d(d([],this.state.addresses),[e.toLowerCase()])})];case 1:return t.sent(),[2]}}))}))},t.prototype.removeAccount=function(e){return u(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return(t=this.state.addresses.findIndex((function(t){return t===e})))>-1?(this.state.addresses.splice(t,1),[4,this.updateAndPersist({addresses:this.state.addresses})]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.isUnlocked=function(){return Boolean(this.hdk&&this.hdk.publicKey)},t.prototype.unlock=function(){return u(this,void 0,Promise,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return this.isUnlocked()?[2,{justUnlocked:!1}]:[4,b.default.getPublicKey({path:A,coin:"ETH"})];case 1:if(!1===(e=t.sent()).success)throw new Error("There was an error while getting publickey");return this.hdk.publicKey=o.from(e.payload.publicKey,"hex"),this.hdk.chainCode=o.from(e.payload.chainCode,"hex"),[2,{justUnlocked:!0}]}}))}))},t.prototype.signPersonalMessage=function(e,t){return u(this,void 0,void 0,(function(){var n,r;return l(this,(function(o){switch(o.label){case 0:return[4,this.unlock()];case 1:return o.sent().justUnlocked?[4,k(1e3)]:[3,3];case 2:o.sent(),o.label=3;case 3:return n=this.pathFromAddress(e),[4,b.default.ethereumSignMessage({path:n,message:y.stripHexPrefix(t),hex:!0})];case 4:if(!1===(r=o.sent()).success)throw new Error("Unknow error ");if(r.payload.address!==y.toChecksumAddress(e))throw new Error("Signature does not match address");return[2,"0x"+r.payload.signature]}}))}))},t.prototype.signMessage=function(e,t){return u(this,void 0,void 0,(function(){return l(this,(function(n){return[2,this.signPersonalMessage(e,t)]}))}))},t.prototype.signTransaction=function(e,t,n){return u(this,void 0,void 0,(function(){var r,o,i,a,c,s;return l(this,(function(u){switch(u.label){case 0:return[4,this.unlock()];case 1:return u.sent().justUnlocked?[4,k(1e3)]:[3,3];case 2:u.sent(),u.label=3;case 3:return r=this.pathFromAddress(e),[4,b.default.ethereumSignTransaction({path:r,transaction:{to:t.to,value:t.value,gasPrice:t.gasPrice,gasLimit:t.gasLimit,nonce:t.nonce,data:t.data,chainId:n}})];case 4:if(!1===(o=u.sent()).success)throw new Error("Something went wrong");if(i=o.payload,(a=Object.assign({},t)).v=y.addHexPrefix(i.v),a.r=y.addHexPrefix(i.r),a.s=y.addHexPrefix(i.s),c=v.Transaction.fromTxData(a,{common:p.default.custom({chainId:n}),freeze:!0}),s=y.addHexPrefix(c.getSenderAddress().toString("hex")),!1===this.compareAddress(s,e))throw new Error("Signature does not match address");return[2,g.addHexPrefix(c.serialize().toString("hex"))]}}))}))},t.prototype.compareAddress=function(e,t){var n=[e,t].map((function(e){return y.toChecksumAddress(e)}));return n[0]===n[1]},t.prototype.addressFromIndex=function(e,t){var n=this.hdk.derive(e+"/"+t),r=y.publicToAddress(n.publicKey,!0).toString("hex");return y.toChecksumAddress("0x"+r)},t.prototype.pathFromAddress=function(e){var t=y.toChecksumAddress(e),n=this.paths[t];if(void 0===n)for(var r=0;r<1e3;r++)if(t===this.addressFromIndex("m",r)){n=r;break}if(void 0===n)throw new Error("Unknown address");return A+"/"+n},t}(h.WithStorageModule);t.TrezorModule=T},94154:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.createModuleStore=t.rpcEngineProviderToLegacy=t.notifyDapps=void 0;var i=n(19416);t.notifyDapps=function(e,t){return r(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,i.browser.tabs.query({currentWindow:!0})];case 1:return n.sent().forEach((function(n){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),n.id?[4,i.browser.tabs.sendMessage(n.id,{roninEvent:e,payload:t})]:[3,2];case 1:o.sent(),o.label=2;case 2:return[3,4];case 3:return"Could not establish connection. Receiving end does not exist."===(r=o.sent()).message?[2]:(console.error(r),[3,4]);case 4:return[2]}}))}))})),[2]}}))}))},t.rpcEngineProviderToLegacy=function(e){if(void 0===e.send)throw new Error("provider.send is empty");return{sendAsync:function(t,n){e.send(t,n)}}},t.createModuleStore=function(e){var t=i.browser.storage.local,n={key:e,get:function(){return r(void 0,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return[4,t.get(n.key)];case 1:return(e=r.sent())[n.key]?[2,JSON.parse(e[n.key])]:[2]}}))}))},set:function(e){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return[4,t.set((r={},r[n.key]=JSON.stringify(e),r))];case 1:return o.sent(),[2]}}))}))}};return n}},58667:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.composeWalletMiddleware=t.emptyWalletMiddleware=void 0;var a,c=n(70687),s=n(81367),u=n(22140),l=n(18269),d=n(28187),f=n(37903),h=n(32966);t.emptyWalletMiddleware=function(){return u.createWalletMiddleware({getAccounts:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2,[]]}))}))}})},function(e){e.Trezor="trezor",e.Keychain="keychain",e.PrivateKey="privateKey",e.Ledger="ledger"}(a||(a={}));var p=function(e){return e.toLowerCase()};t.composeWalletMiddleware=function(e,t,n){var v=new c.Web3Wrapper({sendAsync:function(t,n){e.provider.send(t,n)}}),y=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return void 0===(n=e).data&&(n.data="0x"),void 0===n.gasPrice&&(n.gasPrice=l.numberToHex(0)),void 0!==n.gas&&(n.gasLimit=n.gas,n.gas=void 0),void 0!==n.nonce?[3,2]:[4,v.getAccountNonceAsync(t)];case 1:r=o.sent(),n.nonce=l.numberToHex(r),o.label=2;case 2:return void 0!==n.gasLimit?[3,4]:[4,v.sendRawPayloadAsync({method:"eth_estimateGas",params:[n]})];case 3:i=o.sent(),n.gasLimit=i,o.label=4;case 4:return void 0===n.value&&(n.value=l.numberToHex(0)),[2,n]}}))}))},g=function(){var e=d.keychainModule.getState().accounts.map((function(e){return{type:a.Keychain,address:p(e.address)}})),t=d.privateKeyModule.getState().accounts.map((function(e){return{type:a.PrivateKey,address:p(e.address)}})),n=d.trezorModule.getState().addresses.map((function(e){return{type:a.Trezor,address:p(e)}})),r=d.ledgerModule.getState().addresses.map((function(e){return{type:a.Ledger,address:p(e.address)}}));return i(i(i(i([],e),t),n),r)},w=function(e){return r(void 0,void 0,Promise,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:if(t=g(),void 0===(n=t.find((function(t){return t.address===p(e)}))))throw new Error("Address does not existed in this wallet");if(n.type===a.Trezor)return[2,d.trezorModule];if(n.type!==a.Ledger)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d.ledgerModule.testConnect()];case 2:return r.sent(),[3,4];case 3:throw r.sent(),h.store.getActions().fullPageRoute.replaceLocation("/connect-ledger"),window.open("full-page.html"),new Error("Could not connect Ledger. Connect and try again.");case 4:return[2,d.ledgerModule];case 5:if(n.type===a.Keychain)return[2,d.keychainModule];if(n.type===a.PrivateKey)return[2,d.privateKeyModule];throw new Error("Could not find supported singer")}}))}))},b=function(e){var n=e.from,i=e.data;return r(void 0,void 0,void 0,(function(){var e,r,a,c;return o(this,(function(o){switch(o.label){case 0:if(e=i,r=i,l.isHex(i))try{e=l.hexToString(i)}catch(t){e=i}else r=l.stringToHex(i);return[4,w(n)];case 1:return a=o.sent(),c=t.add({type:s.ActionType.SignMessage,data:{data:e,address:n}}),[4,t.waitForApproval(c)];case 2:return o.sent(),[4,a.signPersonalMessage(n,r)];case 3:return[2,o.sent()]}}))}))};return u.createWalletMiddleware({getAccounts:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2,g().map((function(e){return e.address}))]}))}))},processPersonalMessage:b,processEthSignMessage:b,processTransaction:function(e,i){var a=e.from;return new Promise((function(e,c){return r(void 0,void 0,void 0,(function(){var r,u,l,h,p,g,b;return o(this,(function(o){switch(o.label){case 0:return[4,w(a)];case 1:return r=o.sent(),[4,y(i.params[0],a)];case 2:u=o.sent(),l=t.add({type:s.ActionType.SignTransaction,data:{data:u}}),o.label=3;case 3:return o.trys.push([3,7,,8]),[4,t.waitForApproval(l)];case 4:return o.sent(),[4,r.signTransaction(a,u,d.networkModule.getState().activeNetwork.chainId)];case 5:return h=o.sent(),[4,v.sendRawPayloadAsync({method:"eth_sendRawTransaction",params:[h]})];case 6:return p=o.sent(),g=f.createRandomId(),n.currentTracker.createNewTransaction({id:g,txParams:u}),n.currentTracker.onNewHash({id:g,txHash:p}),e(p),[3,8];case 7:return b=o.sent(),console.error(b),c("rejected"),[3,8];case 8:return[2]}}))}))}))}})}},38300:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.RONIN_EVENT=t.REQUEST_TYPES=void 0,(n=t.REQUEST_TYPES||(t.REQUEST_TYPES={})).ASK_PROVIDER_FROM_CONTENT_SCRIPT="ask_provider_from_content_script",n.RONIN_WALLET_ENABLE_REQUEST="ronin_wallet_enable_request",n.ASK_PROVIDER_FROM_POPUP="ask_provider_from_popup",(t.RONIN_EVENT||(t.RONIN_EVENT={})).ACCOUNT_CHANGED="account_changed"},48097:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContractStorage=void 0;var i=n(19416),a=function(){function e(e){this.key="contracts."+e}return e.prototype.set=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){return[2,i.browser.storage.local.set((t={},t[this.key]=e,t))]}))}))},e.prototype.get=function(){return r(this,void 0,Promise,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,i.browser.storage.local.get(this.key)];case 1:return[2,e.sent()[this.key]||[]]}}))}))},e}();t.ContractStorage=a},43942:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.trackEvent=t.tracker=t.TrackingCategory=t.TrackingActionType=t.urlToPageName=t.setTrackMode=t.isTrackingEnabled=t.setAskedForTracking=t.askedForTracking=void 0;var i=o(n(8891));i.default.init("01f442a2c224f2f1c21200574a22da9e");var a,c,s="asked-for-tracking";t.askedForTracking=function(){return"true"===localStorage.getItem(s)},t.setAskedForTracking=function(e){return localStorage.setItem(s,e?"true":"false")},t.isTrackingEnabled=function(){return"true"===localStorage.getItem("tracking")},t.setTrackMode=function(e){localStorage.setItem("tracking",e?"true":"false")},t.urlToPageName=function(e){var t=e.split("/")[e.includes("/")?1:0];return t?t.split("-").map((function(e){return e[0].toUpperCase()+e.slice(1,e.length)})).join(" ")+" Page":"Home Page"},(c=t.TrackingActionType||(t.TrackingActionType={})).Click="Click",c.KeyPress="KeyPress",c.Access="Access",c.Noop="Noop",(a=t.TrackingCategory||(t.TrackingCategory={})).Navigation="Navigation",a.Swap="Swap",a.Purchase="Purchase",a.Onboarding="Onboarding",a.Settings="Settings",a.Transactions="Transactions",a.Accounts="Accounts",a.Messages="Messages",a.Retention="Retention",a.Wallet="Wallet",a.Network="Network",a.Contact="Contact";var u=function(){function e(){}return e.prototype.setSource=function(e){this.source=e},e.prototype.trackEvent=function(e,n,o,a){try{var c=t.isTrackingEnabled();i.default&&c&&i.default.track(n+" "+o.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1,e.length)})).join(" "),r(r({},a),{category:e,source:this.source,actionType:n}))}catch(e){console.error("There was an error while tracking event. "+e)}},e}();t.tracker=new u,t.trackEvent=t.tracker.trackEvent},89589:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){return function(){return function(t){return function(n){var r=e[n.type];return t(r?r(n):n)}}}}},17910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PORT_NAME=t.PATCH_STATE_TYPE=t.STATE_TYPE=t.DISPATCH_TYPE=void 0,t.DISPATCH_TYPE="chromex.dispatch",t.STATE_TYPE="chromex.state",t.PATCH_STATE_TYPE="chromex.patch_state",t.DEFAULT_PORT_NAME="chromex.port_name"},17045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Store",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"applyMiddleware",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"wrapStore",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"alias",{enumerable:!0,get:function(){return a.default}});var r=c(n(76863)),o=c(n(44600)),i=c(n(18553)),a=c(n(89589));function c(e){return e&&e.__esModule?e:{default:e}}},45277:(e,t)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.withSerializer=t.withDeserializer=t.noop=void 0;var o=function(e){return e};t.noop=o;var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n({},e,e.payload?{payload:t(e.payload)}:{})},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2?arguments[2]:void 0;return n?function(r){for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return n.apply(void 0,[r].concat(a))?e.apply(void 0,[i(r,t)].concat(a)):e.apply(void 0,[r].concat(a))}:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return e.apply(void 0,[i(n,t)].concat(o))}};t.withDeserializer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return function(t){return function(n,r){return t(a(n,e,r))}}},t.withSerializer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];if(o.length<=n)throw new Error("Message in request could not be serialized. "+"Expected message in position ".concat(n," but only received ").concat(o.length," args."));return o[n]=i(o[n],e),t.apply(void 0,o)}}}},76863:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(5089)),o=n(17910),i=n(45277),a=s(n(96610)),c=n(96179);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d={portName:o.DEFAULT_PORT_NAME,state:{},extensionId:null,serializer:i.noop,deserializer:i.noop,patchStrategy:a.default},f=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,r=n.portName,a=void 0===r?d.portName:r,s=n.state,l=void 0===s?d.state:s,f=n.extensionId,h=void 0===f?d.extensionId:f,p=n.serializer,v=void 0===p?d.serializer:p,y=n.deserializer,g=void 0===y?d.deserializer:y,w=n.patchStrategy,b=void 0===w?d.patchStrategy:w;if(u(this,e),!a)throw new Error("portName is required in options");if("function"!=typeof v)throw new Error("serializer must be a function");if("function"!=typeof g)throw new Error("deserializer must be a function");if("function"!=typeof b)throw new Error("patchStrategy must be one of the included patching strategies or a custom patching function");this.portName=a,this.readyResolved=!1,this.readyPromise=new Promise((function(e){return t.readyResolve=e})),this.browserAPI=(0,c.getBrowserAPI)(),this.extensionId=h,this.port=this.browserAPI.runtime.connect(this.extensionId,{name:a}),this.safetyHandler=this.safetyHandler.bind(this),this.browserAPI.runtime.onMessage&&(this.safetyMessage=this.browserAPI.runtime.onMessage.addListener(this.safetyHandler)),this.serializedPortListener=(0,i.withDeserializer)(g)((function(){var e;return(e=t.port.onMessage).addListener.apply(e,arguments)})),this.serializedMessageSender=(0,i.withSerializer)(v)((function(){var e;return(e=t.browserAPI.runtime).sendMessage.apply(e,arguments)}),1),this.listeners=[],this.state=l,this.patchStrategy=b,this.serializedPortListener((function(e){switch(e.type){case o.STATE_TYPE:t.replaceState(e.payload),t.readyResolved||(t.readyResolved=!0,t.readyResolve());break;case o.PATCH_STATE_TYPE:t.patchState(e.payload)}})),this.dispatch=this.dispatch.bind(this)}var t,n;return t=e,(n=[{key:"ready",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e?this.readyPromise.then(e):this.readyPromise}},{key:"subscribe",value:function(e){var t=this;return this.listeners.push(e),function(){t.listeners=t.listeners.filter((function(t){return t!==e}))}}},{key:"patchState",value:function(e){this.state=this.patchStrategy(this.state,e),this.listeners.forEach((function(e){return e()}))}},{key:"replaceState",value:function(e){this.state=e,this.listeners.forEach((function(e){return e()}))}},{key:"getState",value:function(){return this.state}},{key:"replaceReducer",value:function(){}},{key:"dispatch",value:function(e){var t=this;return new Promise((function(n,i){t.serializedMessageSender(t.extensionId,{type:o.DISPATCH_TYPE,portName:t.portName,payload:e},null,(function(e){var t=e.error,o=e.value;if(t){var a=new Error("".concat("\nLooks like there is an error in the background page. You might want to inspect your background page for more details.\n").concat(t));i((0,r.default)(a,t))}else n(o&&o.payload)}))}))}},{key:"safetyHandler",value:function(e){"storeReady"===e.action&&e.portName===this.portName&&(this.browserAPI.runtime.onMessage.removeListener(this.safetyHandler),this.readyResolved||(this.readyResolved=!0,this.readyResolve()))}}])&&l(t.prototype,n),e}();t.default=f},44600:(e,t)=>{"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];var a=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},c={getState:e.getState.bind(e),dispatch:function(){return a.apply(void 0,arguments)}};return o=(o||[]).map((function(e){return e(c)})),a=r.apply(void 0,n(o))(e.dispatch),e.dispatch=a,e}},33410:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=[];return Object.keys(t).forEach((function(o){e[o]!==t[o]&&n.push({key:o,value:t[o],change:r.DIFF_STATUS_UPDATED})})),Object.keys(e).forEach((function(e){t.hasOwnProperty(e)||n.push({key:e,change:r.DIFF_STATUS_REMOVED})})),n};var r=n(79028)},96610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Object.assign({},e);return t.forEach((function(e){var t=e.change,o=e.key,i=e.value;switch(t){case r.DIFF_STATUS_UPDATED:n[o]=i;break;case r.DIFF_STATUS_REMOVED:Reflect.deleteProperty(n,o)}})),n};var r=n(79028)},96179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserAPI=function(){var e;try{e=self.chrome||self.browser||browser}catch(t){e=browser}if(!e)throw new Error("Browser API is not present");return e}},18553:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(17910),i=n(45277),a=n(96179),c=(r=n(33410))&&r.__esModule?r:{default:r},s={portName:o.DEFAULT_PORT_NAME,dispatchResponder:function(e,t){Promise.resolve(e).then((function(e){t({error:null,value:e})})).catch((function(e){console.error("error dispatching result:",e),t({error:e.message,value:null})}))},serializer:i.noop,deserializer:i.noop,diffStrategy:c.default};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=t.portName,r=void 0===n?s.portName:n,c=t.dispatchResponder,u=void 0===c?s.dispatchResponder:c,l=t.serializer,d=void 0===l?s.serializer:l,f=t.deserializer,h=void 0===f?s.deserializer:f,p=t.diffStrategy,v=void 0===p?s.diffStrategy:p;if(!r)throw new Error("portName is required in options");if("function"!=typeof d)throw new Error("serializer must be a function");if("function"!=typeof h)throw new Error("deserializer must be a function");if("function"!=typeof v)throw new Error("diffStrategy must be one of the included diffing strategies or a custom diff function");var y=(0,a.getBrowserAPI)(),g=function(t,n,i){if(t.type===o.DISPATCH_TYPE&&t.portName===r){var a=Object.assign({},t.payload,{_sender:n}),c=null;try{c=e.dispatch(a)}catch(e){c=Promise.reject(e.message),console.error(e)}return u(c,i),!0}},w=function(t){if(t.name===r){var n=(0,i.withSerializer)(d)((function(){return t.postMessage.apply(t,arguments)})),a=e.getState(),c=e.subscribe((function(){var t=e.getState(),r=v(a,t);r.length&&(a=t,n({type:o.PATCH_STATE_TYPE,payload:r}))}));t.onDisconnect.addListener(c),n({type:o.STATE_TYPE,payload:a})}},b=(0,i.withDeserializer)(h),m=function(e){return e.type===o.DISPATCH_TYPE&&e.portName===r};b((function(){var e;return(e=y.runtime.onMessage).addListener.apply(e,arguments)}))(g,m),y.runtime.onMessageExternal?b((function(){var e;return(e=y.runtime.onMessageExternal).addListener.apply(e,arguments)}))(g,m):console.warn("runtime.onMessageExternal is not supported"),y.runtime.onConnect.addListener(w),y.runtime.onConnectExternal?y.runtime.onConnectExternal.addListener(w):console.warn("runtime.onConnectExternal is not supported"),y.tabs.query({},(function(e){var t=!0,n=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var c=i.value;y.tabs.sendMessage(c.id,{action:"storeReady",portName:r},(function(){chrome.runtime.lastError}))}}catch(e){n=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}}))}},98573:()=>{},62859:()=>{},75304:()=>{},46601:()=>{},89214:()=>{},71922:()=>{},2363:()=>{},96419:()=>{},56353:()=>{},42480:()=>{},5566:()=>{},34498:()=>{},53396:()=>{},69386:()=>{},31616:()=>{},52361:()=>{},94616:()=>{}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,r.amdO={},e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,o,i]=e[u],c=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(c=!1,i<a&&(a=i));c&&(e.splice(u--,1),t=o())}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.j=352,(()=>{var e={352:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,c,s]=n,u=0;for(o in c)r.o(c,o)&&(r.m[o]=c[o]);for(s&&s(r),t&&t(n);u<a.length;u++)i=a[u],r.o(e,i)&&e[i]&&e[i][0](),e[a[u]]=0;r.O()},n=self.webpackChunk_axie_ronin_wallet=self.webpackChunk_axie_ronin_wallet||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[216],(()=>r(49976)));o=r.O(o)})();