LavaPack.loadBundle([[5827,{"./end-of-stream":5830,_process:5420},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=e("./end-of-stream"),i=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function h(e){var t=e[i];if(null!==t){var n=e[f].read();null!==n&&(e[l]=null,e[i]=null,e[a]=null,t(p(n,!1)))}}function m(e){n.nextTick(h,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((s(r={get stream(){return this[f]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(p(undefined,!0));if(this[f].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[c]?r(e[c]):t(p(undefined,!0))}))}));var r,s=this[l];if(s)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[u]?n(p(undefined,!0)):t[d](n,r)}),r)}}(s,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[d])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),s(r,"return",(function(){var e=this;return new Promise((function(t,n){e[f].destroy(null,(function(e){e?n(e):t(p(undefined,!0))}))}))})),r),g);t.exports=function(e){var t,n=Object.create(b,(s(t={},f,{value:e,writable:!0}),s(t,i,{value:null,writable:!0}),s(t,a,{value:null,writable:!0}),s(t,c,{value:null,writable:!0}),s(t,u,{value:e._readableState.endEmitted,writable:!0}),s(t,d,{value:function(e,t){var r=n[f].read();r?(n[l]=null,n[i]=null,n[a]=null,e(p(r,!1))):(n[i]=e,n[a]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[i]=null,n[a]=null,t(e)),void(n[c]=e)}var r=n[i];null!==r&&(n[l]=null,n[i]=null,n[a]=null,r(p(undefined,!0))),n[u]=!0})),e.on("readable",m.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[5828,{buffer:2081,util:2080},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=e("buffer").Buffer,a=e("util").inspect,c=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,u;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return i.alloc(0);for(var t,n,r,s=i.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=s,r=a,i.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return s}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var s=t.data,o=e>s.length?s.length:e;if(o===s.length?r+=s:r+=s.slice(0,e),0==(e-=o)){o===s.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=s.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=i.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,o),0==(e-=o)){o===s.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(o));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),u&&o(t,u),e}()}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[5829,{_process:5420},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){s(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var i=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(s,this,t)):e.nextTick(s,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?i._writableState?i._writableState.errorEmitted?e.nextTick(r,i):(i._writableState.errorEmitted=!0,e.nextTick(n,i,t)):e.nextTick(n,i,t):o?(e.nextTick(r,i),o(t)):e.nextTick(r,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[583,{through2:584},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.storeTransformStream=void 0;const r=e("through2");n.storeTransformStream=function(e){return r.obj(((t,n,r)=>{try{return r(null,e(t)),undefined}catch(e){return r(e),undefined}}))}}}},{package:"@metamask/obs-store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/transform.js"}],[5830,{"../../../errors":5821},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}t.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.apply(this,r)}}}(o||s);var i=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,i||o.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){i=!1,d=!0,a||o.call(t)},p=function(e){o.call(t,e)},h=function(){var e;return i&&!d?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",h),t.req?m():t.on("request",m)),t.on("end",f),t.on("finish",l),!1!==n.error&&t.on("error",p),t.on("close",h),function(){t.removeListener("complete",l),t.removeListener("abort",h),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",p),t.removeListener("close",h)}}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[5831,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[5832,{"../../../errors":5821,"./end-of-stream":5830},function(){with(this)return function(){"use strict";return function(e,t,n){var r;var s=e("../../../errors").codes,o=s.ERR_MISSING_ARGS,i=s.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(t,n,s,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;t.on("close",(function(){a=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:s},(function(e){if(e)return o(e);a=!0,o()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new i("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,s=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var i=t.map((function(e,n){var o=n<t.length-1;return c(e,o,n>0,(function(e){r||(r=e),e&&i.forEach(u),o||(i.forEach(u),s(r))}))}));return t.reduce(l)}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[5833,{"../../../errors":5821},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,s){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,s,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(s?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/state.js"}],[5834,{events:2082},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[5835,{"./lib/_stream_duplex.js":5822,"./lib/_stream_passthrough.js":5823,"./lib/_stream_readable.js":5824,"./lib/_stream_transform.js":5825,"./lib/_stream_writable.js":5826,"./lib/internal/streams/end-of-stream.js":5830,"./lib/internal/streams/pipeline.js":5832},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/simple-peer/node_modules/readable-stream/readable-browser.js"}],[5838,{"./manager":5839,"./socket":5841,"./url":5842,debug:5843,"socket.io-parser":5847},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./url"),s=e("socket.io-parser"),o=e("./manager"),i=e("debug")("socket.io-client");t.exports=n=c;var a=n.managers={};function c(e,t){"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,s=r(e),c=s.source,u=s.id,l=s.path,d=a[u]&&l in a[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(i("ignoring socket cache for %s",c),n=o(c,t)):(a[u]||(i("new io instance for %s",c),a[u]=o(c,t)),n=a[u]),s.query&&!t.query&&(t.query=s.query),n.socket(s.path,t)}n.protocol=s.protocol,n.connect=c,n.Manager=e("./manager"),n.Socket=e("./socket")}}},{package:"socket.io-client",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-client/lib/index.js"}],[5839,{"./on":5840,"./socket":5841,backo2:1943,"component-bind":2147,"component-emitter":2148,debug:5843,"engine.io-client":2340,indexof:4403,"socket.io-parser":5847},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("engine.io-client"),s=e("./socket"),o=e("component-emitter"),i=e("socket.io-parser"),a=e("./on"),c=e("component-bind"),u=e("debug")("socket.io-client:manager"),l=e("indexof"),d=e("backo2"),f=Object.prototype.hasOwnProperty;function p(e,t){if(!(this instanceof p))return new p(e,t);e&&"object"==typeof e&&(t=e,e=undefined),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||Infinity),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||i;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}t.exports=p,p.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},p.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},p.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},o(p.prototype),p.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},p.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},p.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,s=this;this.readyState="opening",this.skipReconnect=!1;var o=a(n,"open",(function(){s.onopen(),e&&e()})),i=a(n,"error",(function(t){if(u("connect_error"),s.cleanup(),s.readyState="closed",s.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else s.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;u("connect attempt will timeout after %d",c),0===c&&o.destroy();var l=setTimeout((function(){u("connect attempt timed out after %d",c),o.destroy(),n.close(),n.emit("error","timeout"),s.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(o),this.subs.push(i),this},p.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(e,"ping",c(this,"onping"))),this.subs.push(a(e,"pong",c(this,"onpong"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(e){this.decoder.add(e)},p.prototype.ondecoded=function(e){this.emit("packet",e)},p.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},p.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new s(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",o),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&o()}function o(){~l(r.connecting,n)||r.connecting.push(n)}return n},p.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},p.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},p.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}}}},{package:"socket.io-client",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-client/lib/manager.js"}],[584,{_process:5420,"readable-stream":5700,util:2087,xtend:6171},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("readable-stream").Transform,s=e("util").inherits,o=e("xtend");function i(e){r.call(this,e),this._destroyed=!1}function a(e,t,n){n(null,e)}function c(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=a),"function"!=typeof r&&(r=null),e(t,n,r)}}s(i,r),i.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,n){var r=new i(e);return r._transform=t,n&&(r._flush=n),r})),t.exports.ctor=c((function(e,t,n){function r(t){if(!(this instanceof r))return new r(t);this.options=o(e,t),i.call(this,this.options)}return s(r,i),r.prototype._transform=t,n&&(r.prototype._flush=n),r})),t.exports.obj=c((function(e,t,n){var r=new i(o({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r}))}).call(this)}).call(this,e("_process"))}}},{package:"through2",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/through2/through2.js"}],[5840,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}}}},{package:"socket.io-client",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-client/lib/on.js"}],[5841,{"./on":5840,"component-bind":2147,"component-emitter":2148,debug:5843,"has-binary2":4355,parseqs:5393,"socket.io-parser":5847,"to-array":5940},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("socket.io-parser"),s=e("component-emitter"),o=e("to-array"),i=e("./on"),a=e("component-bind"),c=e("debug")("socket.io-client:socket"),u=e("parseqs"),l=e("has-binary2");t.exports=p;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=s.prototype.emit;function p(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}s(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[i(e,"open",a(this,"onopen")),i(e,"packet",a(this,"onpacket")),i(e,"close",a(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},p.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){if(d.hasOwnProperty(e))return f.apply(this,arguments),this;var t=o(arguments),n={type:(this.flags.binary!==undefined?this.flags.binary:l(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?u.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},p.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},p.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var s=o(arguments);c("sending ack %j",s),t.packet({type:l(s)?r.BINARY_ACK:r.ACK,id:e,data:s})}}},p.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(e){return this.flags.compress=e,this},p.prototype.binary=function(e){return this.flags.binary=e,this}}}},{package:"socket.io-client",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-client/lib/socket.js"}],[5842,{debug:5843,parseuri:5394},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("parseuri"),s=e("debug")("socket.io-client:url");t.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(s("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),s("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}}}},{package:"socket.io-client",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-client/lib/url.js"}],[5843,{"./debug":5844,_process:5420},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){function s(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var s=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(s++,"%c"===e&&(o=s))})),e.splice(o,0,r)},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=s,n.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(s())}).call(this)}).call(this,e("_process"))}}},{package:"debug",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-client/node_modules/debug/src/browser.js"}],[5844,{ms:5845},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){var t;function r(){if(r.enabled){var e=r,s=+new Date,o=s-(t||s);e.diff=o,e.prev=t,e.curr=s,t=s;for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=n.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(t,r){if("%%"===t)return t;c++;var s=n.formatters[r];if("function"==typeof s){var o=i[c];t=s.call(e,o),i.splice(c,1),c--}return t})),n.formatArgs.call(e,i);var u=r.log||n.log||console.log.bind(console);u.apply(e,i)}}return r.namespace=e,r.enabled=n.enabled(e),r.useColors=n.useColors(),r.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}(e),r.destroy=s,"function"==typeof n.init&&n.init(r),n.instances.push(r),r}function s(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}(n=t.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length;for(t=0;t<s;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var o=n.instances[t];o.enabled=n.enabled(o.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.instances=[],n.names=[],n.skips=[],n.formatters={}}}},{package:"debug",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-client/node_modules/debug/src/debug.js"}],[5845,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=1e3,s=60*r,o=60*s,i=24*o,a=365.25*i;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*i;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}(e);if("number"===u&&!1===isNaN(e))return t.long?c(n=e,i,"day")||c(n,o,"hour")||c(n,s,"minute")||c(n,r,"second")||n+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=s)return Math.round(e/s)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}},{package:"ms",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-client/node_modules/ms/index.js"}],[5846,{"./is-buffer":5848,isarray:5851},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("isarray"),s=e("./is-buffer"),o=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);function c(e,t){if(!e)return e;if(s(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(r(e)){for(var o=new Array(e.length),i=0;i<e.length;i++)o[i]=c(e[i],t);return o}if("object"==typeof e&&!(e instanceof Date)){o={};for(var a in e)o[a]=c(e[a],t);return o}return e}function u(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(r(e))for(var n=0;n<e.length;n++)e[n]=u(e[n],t);else if("object"==typeof e)for(var s in e)e[s]=u(e[s],t);return e}n.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=c(n,t),r.attachments=t.length,{packet:r,buffers:t}},n.reconstructPacket=function(e,t){return e.data=u(e.data,t),e.attachments=undefined,e},n.removeBlobs=function(e,t){var n=0,o=e;!function e(c,u,l){if(!c)return c;if(i&&c instanceof Blob||a&&c instanceof File){n++;var d=new FileReader;d.onload=function(){l?l[u]=this.result:o=this.result,--n||t(o)},d.readAsArrayBuffer(c)}else if(r(c))for(var f=0;f<c.length;f++)e(c[f],f,c);else if("object"==typeof c&&!s(c))for(var p in c)e(c[p],p,c)}(o),n||t(o)}}}},{package:"socket.io-parser",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-parser/binary.js"}],[5847,{"./binary":5846,"./is-buffer":5848,"component-emitter":2148,debug:5849,isarray:5851},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("debug")("socket.io-parser"),s=e("component-emitter"),o=e("./binary"),i=e("isarray"),a=e("./is-buffer");function c(){}n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=c,n.Decoder=d;var u=n.ERROR+'"encode error"';function l(e){var t=""+e.type;if(n.BINARY_EVENT!==e.type&&n.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var s=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===s)return u;t+=s}return r("encoded %j as %s",e,t),t}function d(){this.reconstructor=null}function f(e){this.reconPack=e,this.buffers=[]}function p(e){return{type:n.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,t){(r("encoding packet %j",e),n.BINARY_EVENT===e.type||n.BINARY_ACK===e.type)?function(e,t){function n(e){var n=o.deconstructPacket(e),r=l(n.packet),s=n.buffers;s.unshift(r),t(s)}o.removeBlobs(e,n)}(e,t):t([l(e)])},s(d.prototype),d.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t=0,s={type:Number(e.charAt(0))};if(null==n.types[s.type])return p("unknown packet type "+s.type);if(n.BINARY_EVENT===s.type||n.BINARY_ACK===s.type){for(var o=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var a=e.substring(o,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");s.attachments=Number(a)}if("/"===e.charAt(t+1)){for(o=t+1;++t;){if(","===(u=e.charAt(t)))break;if(t===e.length)break}s.nsp=e.substring(o,t)}else s.nsp="/";var c=e.charAt(t+1);if(""!==c&&Number(c)==c){for(o=t+1;++t;){var u;if(null==(u=e.charAt(t))||Number(u)!=u){--t;break}if(t===e.length)break}s.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!(!1!==l&&(s.type===n.ERROR||i(l))))return p("invalid payload");s.data=l}return r("decoded %s as %j",e,s),s}(e),n.BINARY_EVENT===t.type||n.BINARY_ACK===t.type?(this.reconstructor=new f(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}}},{package:"socket.io-parser",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-parser/index.js"}],[5848,{buffer:2081},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){t.exports=function(t){return n&&e.isBuffer(t)||r&&(t instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(t))};var n="function"==typeof e&&"function"==typeof e.isBuffer,r="function"==typeof ArrayBuffer}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"socket.io-parser",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-parser/is-buffer.js"}],[5849,{"./debug":5850,_process:5420},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){function s(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var s=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(s++,"%c"===e&&(o=s))})),e.splice(o,0,r)},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=s,n.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(s())}).call(this)}).call(this,e("_process"))}}},{package:"debug",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-parser/node_modules/debug/src/browser.js"}],[5850,{ms:5852},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){var t;function r(){if(r.enabled){var e=r,s=+new Date,o=s-(t||s);e.diff=o,e.prev=t,e.curr=s,t=s;for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=n.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(t,r){if("%%"===t)return t;c++;var s=n.formatters[r];if("function"==typeof s){var o=i[c];t=s.call(e,o),i.splice(c,1),c--}return t})),n.formatArgs.call(e,i);var u=r.log||n.log||console.log.bind(console);u.apply(e,i)}}return r.namespace=e,r.enabled=n.enabled(e),r.useColors=n.useColors(),r.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}(e),r.destroy=s,"function"==typeof n.init&&n.init(r),n.instances.push(r),r}function s(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}(n=t.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length;for(t=0;t<s;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var o=n.instances[t];o.enabled=n.enabled(o.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.instances=[],n.names=[],n.skips=[],n.formatters={}}}},{package:"debug",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-parser/node_modules/debug/src/debug.js"}],[5851,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}}}},{package:"isarray",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-parser/node_modules/isarray/index.js"}],[5852,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=1e3,s=60*r,o=60*s,i=24*o,a=365.25*i;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*i;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}(e);if("number"===u&&!1===isNaN(e))return t.long?c(n=e,i,"day")||c(n,o,"hour")||c(n,s,"minute")||c(n,r,"second")||n+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=s)return Math.round(e/s)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}},{package:"ms",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-parser/node_modules/ms/index.js"}],[5853,{"./common":5854,_process:5420},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}n.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":s(console))&&console.log&&(e=console).log.apply(e,arguments)},n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(s=r))})),e.splice(s,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){var e;try{e=n.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=e("./common")(n),t.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))}}},{package:"debug",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-pull-stream/node_modules/debug/src/browser.js"}],[5854,{ms:5204},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(t){function n(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var t;function i(){if(i.enabled){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var o=i,a=Number(new Date),c=a-(t||a);o.diff=c,o.prev=t,o.curr=a,t=a,n[0]=r.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,t){if("%%"===e)return e;u++;var s=r.formatters[t];if("function"==typeof s){var i=n[u];e=s.call(o,i),n.splice(u,1),u--}return e})),r.formatArgs.call(o,n);var l=o.log||r.log;l.apply(o,n)}}return i.namespace=e,i.enabled=r.enabled(e),i.useColors=r.useColors(),i.color=n(e),i.destroy=s,i.extend=o,"function"==typeof r.init&&r.init(i),r.instances.push(i),i}function s(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),s=n.length;for(t=0;t<s;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),Object.keys(t).forEach((function(e){r[e]=t[e]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=n,r.enable(r.load()),r}}}},{package:"debug",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-pull-stream/node_modules/debug/src/common.js"}],[5855,{"./v1":5858,"./v4":5859},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./v1"),s=e("./v4"),o=s;o.v1=r,o.v4=s,t.exports=o}}},{package:"uuid",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-pull-stream/node_modules/uuid/index.js"}],[5856,{},function(){with(this)return function(){"use strict";return function(e,t,n){for(var r=[],s=0;s<256;++s)r[s]=(s+256).toString(16).substr(1);t.exports=function(e,t){var n=t||0,s=r;return[s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]]].join("")}}}},{package:"uuid",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-pull-stream/node_modules/uuid/lib/bytesToUuid.js"}],[5857,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var s=new Uint8Array(16);t.exports=function(){return r(s),s}}else{var o=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}}}},{package:"uuid",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-pull-stream/node_modules/uuid/lib/rng-browser.js"}],[5858,{"./lib/bytesToUuid":5856,"./lib/rng":5857},function(){with(this)return function(){"use strict";return function(e,t,n){var r,s,o=e("./lib/rng"),i=e("./lib/bytesToUuid"),a=0,c=0;t.exports=function(e,t,n){var u=t&&n||0,l=t||[],d=(e=e||{}).node||r,f=e.clockseq!==undefined?e.clockseq:s;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=s=16383&(p[6]<<8|p[7]))}var h=e.msecs!==undefined?e.msecs:(new Date).getTime(),m=e.nsecs!==undefined?e.nsecs:c+1,g=h-a+(m-c)/1e4;if(g<0&&e.clockseq===undefined&&(f=f+1&16383),(g<0||h>a)&&e.nsecs===undefined&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,c=m,s=f;var b=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;l[u++]=b>>>24&255,l[u++]=b>>>16&255,l[u++]=b>>>8&255,l[u++]=255&b;var y=h/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var v=0;v<6;++v)l[u+v]=d[v];return t||i(l)}}}},{package:"uuid",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-pull-stream/node_modules/uuid/v1.js"}],[5859,{"./lib/bytesToUuid":5856,"./lib/rng":5857},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./lib/rng"),s=e("./lib/bytesToUuid");t.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[o+a]=i[a];return t||s(i)}}}},{package:"uuid",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-pull-stream/node_modules/uuid/v4.js"}],[5860,{buffer:2081,"data-queue":2231,debug:5853,"pull-stream":5477,uuid:5855},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("data-queue"),s=e("uuid"),o=e("pull-stream"),i=(e,t)=>"socket.io-pull-stream."+e+(t?"."+t:""),a=e("debug")("socket.io-pull-stream");function c(e,t){if(null==t)return t;try{return e(t)}catch(e){return console.error("Codec Error"),console.error(e),!1}}const u={hex:{encode:e=>e.toString("hex"),decode:e=>n.from(e,"hex")},plain:{encode:e=>e,decode:e=>e},buffer:{encode:e=>n.from(e),decode:e=>n.from(e)}};function l(e){if(e||(e="plain"),"object"==typeof e)return e;const t=u[e];if(!t)throw new Error("Invalid codec "+e);return t}t.exports=function(e,t){e.createSink||(e.sioplog=e.id?a.bind(a,"["+e.id+"]"):a,e.createSink=(n,o)=>{n||(n=s());const a=function(e,t,n){const s=r(),o=e.sioplog.bind(e.sioplog,"  sink("+t+")"),a=l(n.codec).encode;let u;function d(e){s.append({err:e}),u=e}return o("create sink"),e.once(i("accept",t),(()=>{o("start transmission"),function n(){s.get(((r,u)=>{let{data:l,err:d}=u||{};if(r&&(d=r),o("send",d&&!0===d?"finish":d?"error":l?"data":"<invalid>"),d&&!r&&s.error(d),d)return e.emit(i("error",t),d);l&&e.emit(i("queue",t),c(a,l)),n()}))}()})),e.once("disconnect",(()=>d(!0))),function(e){e(null,(function t(n,r){return n?d(n):u?e(u,t):(s.append({data:r}),void e(null,t))}))}}(e,n,t||o);return a.id=n,a},e.createSource=(n,s)=>{const o=function(e,t,n){const s=r(),o=e.sioplog.bind(e.sioplog,"source("+t+")"),a=l(n.codec).decode;function u(){e.removeAllListeners(i("error",t)),e.removeAllListeners(i("queue",t))}return o("create source"),e.emit(i("accept",t)),e.on(i("error",t),(e=>{o(!0===e?"finish":"error"),u(),s.append({end:e})})),e.on(i("queue",t),(e=>{o("queue data"),s.append({data:c(a,e)})})),e.once("disconnect",(()=>{u(),s.append({end:!0})})),function(e,t){if(o("reading"),e)return t(e);s.get(((e,n)=>e?t(e):n.end?(s.error(n.end),t(n.end)):t(null,n.data)))}}(e,n,t||s);return o.id=n,o},e.createProxy=(t,n,r)=>{o(e.createSource(t,r),n.createSink(t,r))})}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"socket.io-pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-pull-stream/src/index.js"}],[5861,{"is-plain-obj":4700},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("is-plain-obj");t.exports=(e,t)=>{if(!r(e))throw new TypeError("Expected a plain object");if("function"==typeof(t=t||{}))throw new TypeError("Specify the compare function as an option instead");const n=t.deep,s=[],o=[],i=e=>{const a=s.indexOf(e);if(-1!==a)return o[a];const c={},u=Object.keys(e).sort(t.compare);s.push(e),o.push(c);for(let t=0;t<u.length;t++){const s=u[t],o=e[s];if(n&&Array.isArray(o)){const e=[];for(let t=0;t<o.length;t++)e[t]=r(o[t])?i(o[t]):o[t];c[s]=e}else c[s]=n&&r(o)?i(o):o}return c};return i(e)}}}},{package:"sort-keys",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/sort-keys/index.js"}],[5862,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){return e+s(t)}function s(e){let t=e;return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}function o(e,t){return e[0]-t[0]}function i(e){return e[1]}t.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(t===undefined)-1!==n&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let r=!1;-1===n?(n=this._data.length,this._setBit(e),this._changedData=!0):r=!0,this._setInternalPos(n,e,t,r),this._changedLength=!0}}unset(e){this.set(e,undefined)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);return-1===t?undefined:this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,r=t;for(;n<this.length;){r=e(r,this.get(n),n),n++}return r}find(e){let t,n,r=0;for(;r<this.length&&!t;)n=this.get(r),t=e(n),r++;return t?n:undefined}_internalPositionFor(e,t){const n=this._bytePosFor(e,t);if(n>=this._bitArrays.length)return-1;const o=this._bitArrays[n],i=e-7*n;if(!((o&1<<i)>0))return-1;return this._bitArrays.slice(0,n).reduce(r,0)+s(o&~(4294967295<<i+1))-1}_bytePosFor(e,t){const n=Math.floor(e/7),r=n+1;for(;!t&&this._bitArrays.length<r;)this._bitArrays.push(0);return n}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}_setInternalPos(e,t,n,r){const s=this._data,o=[t,n];if(r)this._sortData(),s[e]=o;else{if(s.length)if(s[s.length-1][0]>=t)s.push(o);else if(s[0][0]<=t)s.unshift(o);else{const e=Math.round(s.length/2);this._data=s.slice(0,e).concat(o).concat(s.slice(e))}else this._data.push(o);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(o),this._changedData=!1}bitField(){const e=[];let t,n=8,r=0,s=0;const o=this._bitArrays.slice();for(;o.length||r;){0===r&&(t=o.shift(),r=7);const i=Math.min(r,n);s|=(t&~(255<<i))<<8-n,t>>>=i,r-=i,n-=i,n&&(r||o.length)||(e.push(s),s=0,n=8)}for(var i=e.length-1;i>0;i--){if(0!==e[i])break;e.pop()}return e}compactArray(){return this._sortData(),this._data.map(i)}}}}},{package:"sparse-array",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/sparse-array/index.js"}],[5863,{},function(){with(this)return function(){"use strict";return function(e,t,n){
//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//! © 2018 Angry Bytes and contributors. MIT licensed.
!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.stable=r()}(this,(function(){var e=function(e,n){return t(e.slice(),n)};function t(e,t){"function"!=typeof t&&(t=function(e,t){return String(e).localeCompare(t)});var r=e.length;if(r<=1)return e;for(var s=new Array(r),o=1;o<r;o*=2){n(e,t,o,s);var i=e;e=s,s=i}return e}e.inplace=function(e,r){var s=t(e,r);return s!==e&&n(s,null,e.length,e),e};var n=function(e,t,n,r){var s,o,i,a,c,u=e.length,l=0,d=2*n;for(s=0;s<u;s+=d)for(i=(o=s+n)+n,o>u&&(o=u),i>u&&(i=u),a=s,c=o;;)if(a<o&&c<i)t(e[a],e[c])<=0?r[l++]=e[a++]:r[l++]=e[c++];else if(a<o)r[l++]=e[a++];else{if(!(c<i))break;r[l++]=e[c++]}};return e}))}}},{package:"stable",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/stable/stable.js"}],[5864,{"../plugins/json2":5865,"../src/store-engine":5867,"../storages/all":5869},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/store-engine"),s=e("../storages/all"),o=[e("../plugins/json2")];t.exports=r.createStore(s,o)}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/dist/store.legacy.js"}],[5865,{"./lib/json2":5866},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){return e("./lib/json2"),{}}}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/plugins/json2.js"}],[5866,{},function(){with(this)return function(){"use strict";return function(e,t,n){"object"!=typeof JSON&&(JSON={}),function(){var e,t,n,r,s=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,a=/(?:^|:|,)(?:\s*\[)+/g,c=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function l(e){return e<10?"0"+e:e}function d(){return this.valueOf()}function f(e){return c.lastIndex=0,c.test(e)?'"'+e.replace(c,(function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function p(n,s){var o,i,a,c,u,l=e,d=s[n];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(n)),"function"==typeof r&&(d=r.call(s,n,d)),typeof d){case"string":return f(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(e+=t,u=[],"[object Array]"===Object.prototype.toString.apply(d)){for(c=d.length,o=0;o<c;o+=1)u[o]=p(o,d)||"null";return a=0===u.length?"[]":e?"[\n"+e+u.join(",\n"+e)+"\n"+l+"]":"["+u.join(",")+"]",e=l,a}if(r&&"object"==typeof r)for(c=r.length,o=0;o<c;o+=1)"string"==typeof r[o]&&(a=p(i=r[o],d))&&u.push(f(i)+(e?": ":":")+a);else for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(a=p(i,d))&&u.push(f(i)+(e?": ":":")+a);return a=0===u.length?"{}":e?"{\n"+e+u.join(",\n"+e)+"\n"+l+"}":"{"+u.join(",")+"}",e=l,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+l(this.getUTCMonth()+1)+"-"+l(this.getUTCDate())+"T"+l(this.getUTCHours())+":"+l(this.getUTCMinutes())+":"+l(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=d,Number.prototype.toJSON=d,String.prototype.toJSON=d),"function"!=typeof JSON.stringify&&(n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(n,s,o){var i;if(e="",t="","number"==typeof o)for(i=0;i<o;i+=1)t+=" ";else"string"==typeof o&&(t=o);if(r=s,s&&"function"!=typeof s&&("object"!=typeof s||"number"!=typeof s.length))throw new Error("JSON.stringify");return p("",{"":n})}),"function"!=typeof JSON.parse&&(JSON.parse=function(e,t){var n;if(e=String(e),u.lastIndex=0,u.test(e)&&(e=e.replace(u,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),s.test(e.replace(o,"@").replace(i,"]").replace(a,"")))return n=(0,eval)("("+e+")"),"function"==typeof t?function e(n,r){var s,o,i=n[r];if(i&&"object"==typeof i)for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&((o=e(i,s))!==undefined?i[s]=o:delete i[s]);return t.call(n,r,i)}({"":n},""):n;throw new SyntaxError("JSON.parse")})}()}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/plugins/lib/json2.js"}],[5867,{"./util":5868},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./util"),s=r.slice,o=r.pluck,i=r.each,a=r.bind,c=r.create,u=r.isList,l=r.isFunction,d=r.isObject;t.exports={createStore:p};var f={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return t===undefined?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(n,r){e.call(t,t._deserialize(n),(r||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return p.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return p(this.storage,this.plugins,e)}};function p(e,t,n){n||(n=""),e&&!u(e)&&(e=[e]),t&&!u(t)&&(t=[t]);var r=n?"__storejs_"+n+"_":"",p=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var h={_namespacePrefix:r,_namespaceRegexp:p,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){var t=s(arguments,0),r=this;function o(){if(n)return i(arguments,(function(e,n){t[n]=e})),n.apply(r,t)}var a=[o].concat(t);return e.apply(r,a)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(t){n=e}return n!==undefined?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(u(e))i(e,(function(e){t._addPlugin(e)}));else if(!o(this.plugins,(function(t){return e===t}))){if(this.plugins.push(e),!l(e))throw new Error("Plugins must be function values that return objects");var n=e.call(this);if(!d(n))throw new Error("Plugins must return an object of function properties");i(n,(function(n,r){if(!l(n))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,r)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;if(e){(e.warn?e.warn:e.log).apply(e,arguments)}}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},m=c(h,f,{plugins:[]});return m.raw={},i(m,(function(e,t){l(e)&&(m.raw[t]=a(m,e))})),i(e,(function(e){m._addStorage(e)})),i(t,(function(e){m._addPlugin(e)})),m}}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/src/store-engine.js"}],[5868,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=Object.assign?Object.assign:function(e,t,n,r){for(var s=1;s<arguments.length;s++)c(Object(arguments[s]),(function(t,n){e[n]=t}));return e},s=function(){if(Object.create)return function(e,t,n,s){var o=a(arguments,1);return r.apply(this,[Object.create(e)].concat(o))};{function e(){}return function(t,n,s,o){var i=a(arguments,1);return e.prototype=t,r.apply(this,[new e].concat(i))}}}(),o=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},i="undefined"!=typeof window?window:global;function a(e,t){return Array.prototype.slice.call(e,t||0)}function c(e,t){u(e,(function(e,n){return t(e,n),!1}))}function u(e,t){if(l(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function l(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}t.exports={assign:r,create:s,trim:o,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:a,each:c,map:function(e,t){var n=l(e)?[]:{};return u(e,(function(e,r){return n[r]=t(e,r),!1})),n},pluck:u,isList:l,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:i}}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/src/util.js"}],[5869,{"./cookieStorage":5870,"./localStorage":5871,"./memoryStorage":5872,"./oldFF-globalStorage":5873,"./oldIE-userDataStorage":5874,"./sessionStorage":5875},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=[e("./localStorage"),e("./oldFF-globalStorage"),e("./oldIE-userDataStorage"),e("./cookieStorage"),e("./sessionStorage"),e("./memoryStorage")]}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/storages/all.js"}],[5870,{"../src/util":5868},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/util"),s=r.Global,o=r.trim;t.exports={name:"cookieStorage",read:function(e){if(!e||!u(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(i.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){if(!e)return;i.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:a,remove:c,clearAll:function(){a((function(e,t){c(t)}))}};var i=s.document;function a(e){for(var t=i.cookie.split(/; ?/g),n=t.length-1;n>=0;n--)if(o(t[n])){var r=t[n].split("="),s=unescape(r[0]);e(unescape(r[1]),s)}}function c(e){e&&u(e)&&(i.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function u(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(i.cookie)}}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/storages/cookieStorage.js"}],[5871,{"../src/util":5868},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/util").Global;function s(){return r.localStorage}function o(e){return s().getItem(e)}t.exports={name:"localStorage",read:o,write:function(e,t){return s().setItem(e,t)},each:function(e){for(var t=s().length-1;t>=0;t--){var n=s().key(t);e(o(n),n)}},remove:function(e){return s().removeItem(e)},clearAll:function(){return s().clear()}}}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/storages/localStorage.js"}],[5872,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={name:"memoryStorage",read:function(e){return r[e]},write:function(e,t){r[e]=t},each:function(e){for(var t in r)r.hasOwnProperty(t)&&e(r[t],t)},remove:function(e){delete r[e]},clearAll:function(e){r={}}};var r={}}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/storages/memoryStorage.js"}],[5873,{"../src/util":5868},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/util").Global;t.exports={name:"oldFF-globalStorage",read:function(e){return s[e]},write:function(e,t){s[e]=t},each:o,remove:function(e){return s.removeItem(e)},clearAll:function(){o((function(e,t){delete s[e]}))}};var s=r.globalStorage;function o(e){for(var t=s.length-1;t>=0;t--){var n=s.key(t);e(s[n],n)}}}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/storages/oldFF-globalStorage.js"}],[5874,{"../src/util":5868},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/util").Global;t.exports={name:"oldIE-userDataStorage",write:function(e,t){if(a)return;var n=u(e);i((function(e){e.setAttribute(n,t),e.save(s)}))},read:function(e){if(a)return;var t=u(e),n=null;return i((function(e){n=e.getAttribute(t)})),n},each:function(e){i((function(t){for(var n=t.XMLDocument.documentElement.attributes,r=n.length-1;r>=0;r--){var s=n[r];e(t.getAttribute(s.name),s.name)}}))},remove:function(e){var t=u(e);i((function(e){e.removeAttribute(t),e.save(s)}))},clearAll:function(){i((function(e){var t=e.XMLDocument.documentElement.attributes;e.load(s);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(s)}))}};var s="storejs",o=r.document,i=function(){if(!o||!o.documentElement||!o.documentElement.addBehavior)return null;var e,t,n,r="script";try{(t=new ActiveXObject("htmlfile")).open(),t.write("<"+r+">document.w=window</"+r+'><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,n=e.createElement("div")}catch(t){n=o.createElement("div"),e=o.body}return function(t){var r=[].slice.call(arguments,0);r.unshift(n),e.appendChild(n),n.addBehavior("#default#userData"),n.load(s),t.apply(this,r),e.removeChild(n)}}(),a=(r.navigator?r.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);var c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function u(e){return e.replace(/^\d/,"___$&").replace(c,"___")}}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/storages/oldIE-userDataStorage.js"}],[5875,{"../src/util":5868},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../src/util").Global;function s(){return r.sessionStorage}function o(e){return s().getItem(e)}t.exports={name:"sessionStorage",read:o,write:function(e,t){return s().setItem(e,t)},each:function(e){for(var t=s().length-1;t>=0;t--){var n=s().key(t);e(o(n),n)}},remove:function(e){return s().removeItem(e)},clearAll:function(){return s().clear()}}}}},{package:"store",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/store/storages/sessionStorage.js"}],[5895,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t=e._readableState;return t?t.objectMode?e.read():e.read(function(e){if(e.buffer.length)return e.buffer.head?e.buffer.head.data.length:e.buffer[0].length;return e.length}(t)):null}}}},{package:"stream-shift",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/stream-shift/index.js"}],[5896,{_process:5420,looper:5184,"pull-stream/pull":5478},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){e("pull-stream/pull");var s=e("looper");function o(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \n"+"the wrapped node-stream does not implement `destroy`, \n"+"this may cause resource leaks.")}function i(e,t,n){var i,a,c=!1;function u(){a||(a=!0,n&&n(!0===i?null:i))}function l(){c||(c=!0,f(),i?u():e(i=!0,u))}function d(t){f(),i||e(i=t,u)}function f(){t.on("finish",l),t.removeListener("close",l),t.removeListener("error",d)}t.on("close",l),t.on("finish",l),t.on("error",d),r.nextTick((function(){s((function(n){e(null,(function(e,r){if(i=i||e,!0===e)return t._isStdio?u():t.end();if(i=i||e)return o(t),u();t._isStdio?t.write(r,(function(){n()})):!1===t.write(r)?t.once("drain",n):n()}))}))}))}function a(e){var t,n=[],r=[],s=!1;function i(){for(;(n.length||t)&&r.length;)r.shift()(n.length?null:t,n.shift());!n.length&&s&&(s=!1,e.resume())}return e.on("data",(function(t){n.push(t),i(),n.length&&e.pause&&(s=!0,e.pause())})),e.on("end",(function(){t=!0,i()})),e.on("close",(function(){t=!0,i()})),e.on("error",(function(e){t=e,i()})),function(n,s){if(!s)throw new Error("*must* provide cb");if(n){function i(){for(;r.length;)r.shift()(n);s(n)}if(t)return i();e.once("close",i),o(e)}else r.push(s),i()}}var c=a,u=function(e,t){return function(n){return i(n,e,t)}},l=function(e){return a(e)};(n=t.exports=function(e,t){return e.writable&&e.write?e.readable?function(n){return i(n,e,t),a(e)}:u(e,t):l(e)}).sink=u,n.source=l,n.read=c,n.read1=a,n.read2=function(e){var t,n=!1,r=!1;function s(){var n=e.read();if(null!==n&&t){var r=t;t=null,r(null,n)}}return e.on("readable",(function(){r=!0,t&&s()})).on("end",(function(){n=!0,t&&t(n)})).on("error",(function(e){n=e,t&&t(n)})),function(e,o){t=o,n?o(n):r&&s()}},n.duplex=function(e,t){return{source:l(e),sink:u(e,t)}},n.transform=function(e){return function(t){var n=l(e);return u(e)(t),n}}}).call(this)}).call(this,e("_process"))}}},{package:"stream-to-pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/stream-to-pull-stream/index.js"}],[59,{"../../../shared/constants/app":6184,"../../../shared/modules/random-id":6201,"../metamask-controller":82,"@babel/runtime/helpers/interopRequireDefault":195,"@metamask/obs-store":1193,buffer:2081,"eth-rpc-errors":2455,"ethereumjs-util":2521,events:2082},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.normalizeMsgData=f;var s=r(e("events")),o=e("@metamask/obs-store"),i=e("ethereumjs-util"),a=e("eth-rpc-errors"),c=e("../../../shared/constants/app"),u=e("../metamask-controller"),l=r(e("../../../shared/modules/random-id"));class d extends s.default{constructor({metricsEvent:e}){super(),this.memStore=new o.ObservableStore({unapprovedMsgs:{},unapprovedMsgCount:0}),this.messages=[],this.metricsEvent=e}get unapprovedMsgCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}async addUnapprovedMessageAsync(e,t){const n=this.addUnapprovedMessage(e,t);return await new Promise(((t,r)=>{this.once(`${n}:finished`,(n=>{switch(n.status){case"signed":return t(n.rawSig);case"rejected":return r(a.ethErrors.provider.userRejectedRequest("MetaMask Message Signature: User denied message signature."));case"errored":return r(new Error(`MetaMask Message Signature: ${n.error}`));default:return r(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=f(e.data);const n=(new Date).getTime(),r=(0,l.default)(),s={id:r,msgParams:e,time:n,status:"unapproved",type:c.MESSAGE_TYPE.ETH_SIGN};return this.addMsg(s),this.emit("update"),r}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForSigning(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusSigned(e,t){const n=this.getMsg(e);n.rawSig=t,this._updateMsg(n),this._setMsgStatus(e,"signed")}prepMsgForSigning(e){return delete e.metamaskId,Promise.resolve(e)}rejectMsg(e,t=undefined){if(t){const n=this.getMsg(e);this.metricsEvent({event:t,category:"Transactions",properties:{action:"Sign Request",type:n.type}})}this._setMsgStatus(e,"rejected")}errorMessage(e,t){const n=this.getMsg(e);n.error=t,this._updateMsg(n),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const n=this.getMsg(e);if(!n)throw new Error(`MessageManager - Message not found for id: "${e}".`);n.status=t,this._updateMsg(n),this.emit(`${e}:${t}`,n),"rejected"!==t&&"signed"!==t||this.emit(`${e}:finished`,n)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedMsgs:e,unapprovedMsgCount:t}),this.emit(u.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}}function f(e){return"0x"===e.slice(0,2)?e:(0,i.bufferToHex)(t.from(e,"utf8"))}n.default=d}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/message-manager.js"}],[5900,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){r.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),r.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},t.exports=r}}},{package:"superagent",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/superagent/lib/agent-base.js"}],[5901,{"./agent-base":5900,"./is-object":5902,"./request-base":5903,"./response-base":5904,"component-emitter":2148},function(){with(this)return function(){"use strict";return function(e,t,n){var r;"undefined"!=typeof window?r=window:"undefined"!=typeof self?r=self:(console.warn("Using browser-only version of superagent in non-browser environment"),r=this);var s=e("component-emitter"),o=e("./request-base"),i=e("./is-object"),a=e("./response-base"),c=e("./agent-base");function u(){}var l=n=t.exports=function(e,t){return"function"==typeof t?new n.Request("GET",e).end(t):1==arguments.length?new n.Request("GET",e):new n.Request(e,t)};n.Request=b,l.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var d="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function f(e){if(!i(e))return e;var t=[];for(var n in e)p(t,n,e[n]);return t.join("&")}function p(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach((function(n){p(e,t,n)}));else if(i(n))for(var r in n)p(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function h(e){for(var t,n,r={},s=e.split("&"),o=0,i=s.length;o<i;++o)-1==(n=(t=s[o]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function m(e){return/[\/+]json($|[^-\w])/.test(e)}function g(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,s,o=e.split(/\r?\n/),i={},a=0,c=o.length;a<c;++a)-1!==(t=(n=o[a]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),s=d(n.slice(t+1)),i[r]=s);return i}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function b(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,r=null;try{r=new g(n)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)}))}function y(e,t,n){var r=l("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}l.serializeObject=f,l.parseString=h,l.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},l.serialize={"application/x-www-form-urlencoded":f,"application/json":JSON.stringify},l.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},a(g.prototype),g.prototype._parseBody=function(e){var t=l.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&m(this.type)&&(t=l.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},g.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",s=new Error(r);return s.status=this.status,s.method=t,s.url=n,s},l.Response=g,s(b.prototype),o(b.prototype),b.prototype.type=function(e){return this.set("Content-Type",l.types[e]||e),this},b.prototype.accept=function(e){return this.set("Accept",l.types[e]||e),this},b.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});var r=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,n,r)},b.prototype.query=function(e){return"string"!=typeof e&&(e=f(e)),e&&this._query.push(e),this},b.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},b.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},b.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},b.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},b.prototype.buffer=b.prototype.ca=b.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},b.prototype.pipe=b.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},b.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},b.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||u,this._finalizeQueryString(),this._end()},b.prototype._end=function(){var e=this,t=this.xhr=l.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var s=this._header["content-type"],o=this._serializer||l.serialize[s?s.split(";")[0]:""];!o&&m(s)&&(o=l.serialize["application/json"]),o&&(n=o(n))}for(var i in this.header)null!=this.header[i]&&this.header.hasOwnProperty(i)&&t.setRequestHeader(i,this.header[i]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},l.agent=function(){return new c},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){c.prototype[e.toLowerCase()]=function(t,n){var r=new l.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}})),c.prototype.del=c.prototype.delete,l.get=function(e,t,n){var r=l("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},l.head=function(e,t,n){var r=l("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},l.options=function(e,t,n){var r=l("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.del=y,l.delete=y,l.patch=function(e,t,n){var r=l("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.post=function(e,t,n){var r=l("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},l.put=function(e,t,n){var r=l("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}}}},{package:"superagent",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/superagent/lib/client.js"}],[5902,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return null!==e&&"object"==typeof e}}}},{package:"superagent",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/superagent/lib/is-object.js"}],[5903,{"./is-object":5902},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./is-object");function s(e){if(e)return function(e){for(var t in s.prototype)e[t]=s.prototype[t];return e}(e)}t.exports=s,s.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},s.prototype.parse=function(e){return this._parser=e,this},s.prototype.responseType=function(e){return this._responseType=e,this},s.prototype.serialize=function(e){return this._serializer=e,this},s.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},s.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];s.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~o.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},s.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},s.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},s.prototype.catch=function(e){return this.then(undefined,e)},s.prototype.use=function(e){return e(this),this},s.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},s.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},s.prototype.get=function(e){return this._header[e.toLowerCase()]},s.prototype.getHeader=s.prototype.get,s.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},s.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},s.prototype.field=function(e,t){if(null===e||undefined===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var s in t)this.field(e,t[s]);return this}if(null===t||undefined===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},s.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},s.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},s.prototype.withCredentials=function(e){return e==undefined&&(e=!0),this._withCredentials=e,this},s.prototype.redirects=function(e){return this._maxRedirects=e,this},s.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},s.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},s.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var s in e)this._data[s]=e[s];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||n||this.type("json"),this},s.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},s.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},s.prototype._appendQueryString=function(){console.trace("Unsupported")},s.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},s.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}}}},{package:"superagent",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/superagent/lib/request-base.js"}],[5904,{"./utils":5905},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./utils");function s(e){if(e)return function(e){for(var t in s.prototype)e[t]=s.prototype[t];return e}(e)}t.exports=s,s.prototype.get=function(e){return this.header[e.toLowerCase()]},s.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var s in n)this[s]=n[s];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},s.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}}}},{package:"superagent",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/superagent/lib/response-base.js"}],[5905,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.type=function(e){return e.split(/ *; */).shift()},n.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),s=n.shift();return r&&s&&(e[r]=s),e}),{})},n.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},n.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}}}},{package:"superagent",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/superagent/lib/utils.js"}],[5906,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});class r extends TypeError{static format(e){const{type:t,path:n,value:r}=e;return`Expected a value of type \`${t}\`${n.length?` for \`${n.join(".")}\``:""} but received \`${JSON.stringify(r)}\`.`}constructor(e){super(r.format(e));const{data:t,path:n,value:s,reason:o,type:i,errors:a=[]}=e;this.data=t,this.path=n,this.value=s,this.reason=o,this.type=i,this.errors=a,a.length||a.push(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack}}var s=Object.prototype.toString,o=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t,n=typeof e;if("boolean"===n)return"boolean";if("string"===n)return"string";if("number"===n)return"number";if("symbol"===n)return"symbol";if("function"===n)return t=e,"GeneratorFunction"===i(t)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(e))return"array";if(function(e){if(e.constructor&&"function"==typeof e.constructor.isBuffer)return e.constructor.isBuffer(e);return!1}(e))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}(e))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(e))return"regexp";switch(i(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(e))return"generator";switch(n=s.call(e)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return n.slice(8,-1).toLowerCase().replace(/\s/g,"")};function i(e){return e.constructor?e.constructor.name:null}const a="@@__STRUCT__@@",c="@@__KIND__@@";function u(e){return!(!e||!e[a])}function l(e,t){return"function"==typeof e?e(t):e}var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};class f{constructor(e,t,n){this.name=e,this.type=t,this.validate=n}}function p(e,t,n){if(u(e))return e[c];if(e instanceof f)return e;switch(o(e)){case"array":return e.length>1?_(e,t,n):g(e,t,n);case"function":return m(e,t,n);case"object":return b(e,t,n);case"string":{let r,s=!0;if(e.endsWith("?")&&(s=!1,e=e.slice(0,-1)),e.includes("|")){r=w(e.split(/\s*\|\s*/g),t,n)}else if(e.includes("&")){r=E(e.split(/\s*&\s*/g),t,n)}else r=v(e,t,n);return s||(r=y(r,undefined,n)),r}}throw new Error(`Invalid schema: ${e}`)}function h(e,t,n){if("array"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=e.map((e=>{try{return JSON.stringify(e)}catch(t){return String(e)}})).join(" | ");return new f("enum",r,((n=l(t))=>e.includes(n)?[undefined,n]:[{data:n,path:[],value:n,type:r}]))}function m(e,t,n){if("function"!==o(e))throw new Error(`Invalid schema: ${e}`);const r="<function>";return new f("function",r,((n=l(t),s)=>{const i=e(n,s);let a,c={path:[],reason:null};switch(o(i)){case"boolean":a=i;break;case"string":a=!1,c.reason=i;break;case"object":a=!1,c=d({},c,i);break;default:throw new Error(`Invalid result: ${i}`)}return a?[undefined,n]:[d({type:r,value:n,data:n},c)]}))}function g(e,t,n){if("array"!==o(e)||1!==e.length)throw new Error(`Invalid schema: ${e}`);const r=v("array",undefined,n),s=p(e[0],undefined,n),i=`[${s.type}]`;return new f("list",i,((e=l(t))=>{const[n,o]=r.validate(e);if(n)return n.type=i,[n];e=o;const a=[],c=[];for(let t=0;t<e.length;t++){const n=e[t],[r,o]=s.validate(n);if(r){(r.errors||[r]).forEach((n=>{n.path=[t].concat(n.path),n.data=e,a.push(n)}))}else c[t]=o}if(a.length){const e=a[0];return e.errors=a,[e]}return[undefined,c]}))}function b(e,t,n){if("object"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=v("object",undefined,n),s=[],i={};for(const t in e){s.push(t);const r=p(e[t],undefined,n);i[t]=r}const a=`{${s.join()}}`;return new f("object",a,((e=l(t))=>{const[n]=r.validate(e);if(n)return n.type=a,[n];const s=[],o={},c=Object.keys(e),u=Object.keys(i);if(new Set(c.concat(u)).forEach((n=>{let r=e[n];const a=i[n];if(r===undefined){r=l(t&&t[n],e)}if(!a){const t={data:e,path:[n],value:r};return void s.push(t)}const[c,u]=a.validate(r,e);if(c){(c.errors||[c]).forEach((t=>{t.path=[n].concat(t.path),t.data=e,s.push(t)}))}else(n in e||u!==undefined)&&(o[n]=u)})),s.length){const e=s[0];return e.errors=s,[e]}return[undefined,o]}))}function y(e,t,n){return w([e,"undefined"],t,n)}function v(e,t,n){if("string"!==o(e))throw new Error(`Invalid schema: ${e}`);const{types:r}=n,s=r[e];if("function"!==o(s))throw new Error(`Invalid type: ${e}`);const i=m(s,t),a=e;return new f("scalar",a,(e=>{const[t,n]=i.validate(e);return t?(t.type=a,[t]):[undefined,n]}))}function _(e,t,n){if("array"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=e.map((e=>p(e,undefined,n))),s=v("array",undefined,n),i=`[${r.map((e=>e.type)).join()}]`;return new f("tuple",i,((e=l(t))=>{const[n]=s.validate(e);if(n)return n.type=i,[n];const o=[],a=[],c=Math.max(e.length,r.length);for(let t=0;t<c;t++){const n=r[t],s=e[t];if(!n){const n={data:e,path:[t],value:s};a.push(n);continue}const[i,c]=n.validate(s);if(i){(i.errors||[i]).forEach((n=>{n.path=[t].concat(n.path),n.data=e,a.push(n)}))}else o[t]=c}if(a.length){const e=a[0];return e.errors=a,[e]}return[undefined,o]}))}function w(e,t,n){if("array"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=e.map((e=>p(e,undefined,n))),s=r.map((e=>e.type)).join(" | ");return new f("union",s,((e=l(t))=>{const n=[];for(const t of r){const[r,s]=t.validate(e);if(!r)return[undefined,s];n.push(r)}return n[0].type=s,n}))}function E(e,t,n){if("array"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=e.map((e=>p(e,undefined,n))),s=r.map((e=>e.type)).join(" & ");return new f("intersection",s,((e=l(t))=>{let n=e;for(const e of r){const[t,r]=e.validate(n);if(t)return t.type=s,[t];n=r}return[undefined,n]}))}const k={any:p,dict:function(e,t,n){if("array"!==o(e)||2!==e.length)throw new Error(`Invalid schema: ${e}`);const r=v("object",undefined,n),s=p(e[0],undefined,n),i=p(e[1],undefined,n),a=`dict<${s.type},${i.type}>`;return new f("dict",a,(e=>{const n=l(t);e=n?d({},n,e):e;const[o]=r.validate(e);if(o)return o.type=a,[o];const c={},u=[];for(let t in e){const n=e[t],[r,o]=s.validate(t);if(r){(r.errors||[r]).forEach((n=>{n.path=[t].concat(n.path),n.data=e,u.push(n)}));continue}t=o;const[a,l]=i.validate(n);if(a){(a.errors||[a]).forEach((n=>{n.path=[t].concat(n.path),n.data=e,u.push(n)}))}else c[t]=l}if(u.length){const e=u[0];return e.errors=u,[e]}return[undefined,c]}))},enum:h,enums:function(e,t,n){return g([h(e,undefined)],t,n)},function:m,instance:function(e,t,n){const r=`instance<${e.name}>`;return new f("instance",r,((n=l(t))=>n instanceof e?[undefined,n]:[{data:n,path:[],value:n,type:r}]))},interface:function(e,t,n){if("object"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=[],s={};for(const t in e){r.push(t);const o=p(e[t],undefined,n);s[t]=o}const i=`{${r.join()}}`;return new f("interface",i,(e=>{const n=l(t);e=n?d({},n,e):e;const r=[],o=e;for(const n in s){let i=e[n];const a=s[n];if(i===undefined){i=l(t&&t[n],e)}const[c,u]=a.validate(i,e);if(c){(c.errors||[c]).forEach((t=>{t.path=[n].concat(t.path),t.data=e,r.push(t)}))}else(n in e||u!==undefined)&&(o[n]=u)}if(r.length){const e=r[0];return e.errors=r,[e]}return[undefined,o]}))},lazy:function(e,t,n){if("function"!==o(e))throw new Error(`Invalid schema: ${e}`);let r,s;return r=new f("lazy","lazy...",(t=>(s=e(),r.name=s.kind,r.type=s.type,r.validate=s.validate,r.validate(t)))),r},list:g,literal:function(e,t,n){const r=`literal: ${JSON.stringify(e)}`;return new f("literal",r,((n=l(t))=>n===e?[undefined,n]:[{data:n,path:[],value:n,type:r}]))},object:b,optional:y,partial:function(e,t,n){if("object"!==o(e))throw new Error(`Invalid schema: ${e}`);const r=v("object",undefined,n),s=[],i={};for(const t in e){s.push(t);const r=p(e[t],undefined,n);i[t]=r}const a=`{${s.join()},...}`;return new f("partial",a,((e=l(t))=>{const[n]=r.validate(e);if(n)return n.type=a,[n];const s=[],o={};for(const n in i){let r=e[n];const a=i[n];if(r===undefined){r=l(t&&t[n],e)}const[c,u]=a.validate(r,e);if(c){(c.errors||[c]).forEach((t=>{t.path=[n].concat(t.path),t.data=e,s.push(t)}))}else(n in e||u!==undefined)&&(o[n]=u)}if(s.length){const e=s[0];return e.errors=s,[e]}return[undefined,o]}))},scalar:v,tuple:_,union:w,intersection:E,dynamic:function(e,t,n){if("function"!==o(e))throw new Error(`Invalid schema: ${e}`);return new f("dynamic","dynamic...",((n=l(t),r)=>{const s=e(n,r);if("function"!==o(s))throw new Error(`Invalid schema: ${s}`);const[i,a]=s.validate(n);return i?[i]:[undefined,a]}))}},C={any:e=>e!==undefined};function S(e={}){const t=d({},C,e.types||{});function n(e,n,s={}){u(e)&&(e=e.schema);const o=k.any(e,n,d({},s,{types:t}));function i(e){if(this instanceof i)throw new Error("Invalid `new` keyword!");return i.assert(e)}return Object.defineProperty(i,a,{value:!0}),Object.defineProperty(i,c,{value:o}),i.kind=o.name,i.type=o.type,i.schema=e,i.defaults=n,i.options=s,i.assert=e=>{const[t,n]=o.validate(e);if(t)throw new r(t);return n},i.test=e=>{const[t]=o.validate(e);return!t},i.validate=e=>{const[t,n]=o.validate(e);return t?[new r(t)]:[undefined,n]},i}return Object.keys(k).forEach((e=>{const r=k[e];n[e]=(e,s,o)=>n(r(e,s,d({},o,{types:t})),s,o)})),n}["arguments","array","boolean","buffer","error","float32array","float64array","function","generatorfunction","int16array","int32array","int8array","map","null","number","object","promise","regexp","set","string","symbol","uint16array","uint32array","uint8array","uint8clampedarray","undefined","weakmap","weakset"].forEach((e=>{C[e]=t=>o(t)===e})),C.date=e=>"date"===o(e)&&!isNaN(e);const M=S();n.struct=M,n.superstruct=S,n.isStruct=u,n.StructError=r}}},{package:"superstruct",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/superstruct/lib/index.js"}],[5908,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=()=>!0,s=["newListener","removeListener"],o=e=>!s.includes(e);t.exports=function(e,t){let n=(t=t||{}).eventFilter||r;if("skipInternal"===n&&(n=o),"function"!=typeof n)throw new Error("createEventEmitterProxy - Invalid eventFilter");let s=e;return new Proxy({},{get:(e,t)=>"setTarget"===t?i:s[t],set:(e,t,n)=>"setTarget"===t?(i=n,!0):(s[t]=n,!0)});function i(e){const t=s;s=e,t.eventNames().filter(n).forEach((n=>{(function(e,t){if(e.rawListeners)return e.rawListeners(t);let n=e._events[t]||[];Array.isArray(n)||(n=[n]);return n.slice()})(t,n).forEach((t=>e.on(n,t)))})),t.removeAllListeners()}}}}},{package:"swappable-obj-proxy",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/swappable-obj-proxy/src/createEventEmitterProxy.js"}],[5909,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){let t=e;return new Proxy({},{get:(e,r)=>"setTarget"===r?n:t[r],set:(e,r,s)=>"setTarget"===r?(n=s,!0):(t[r]=s,!0)});function n(e){t=e}}}}},{package:"swappable-obj-proxy",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/swappable-obj-proxy/src/createSwappableProxy.js"}],[5910,{"./createEventEmitterProxy":5908,"./createSwappableProxy":5909},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./createSwappableProxy"),s=e("./createEventEmitterProxy");t.exports={createSwappableProxy:r,createEventEmitterProxy:s}}}},{package:"swappable-obj-proxy",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/swappable-obj-proxy/src/index.js"}],[5911,{"./headers":5912,bl:5915,"readable-stream":5930,util:2087},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("util"),s=e("bl"),o=e("./headers"),i=e("readable-stream").Writable,a=e("readable-stream").PassThrough,c=function(){},u=function(e){return(e&=511)&&512-e},l=function(e,t){this._parent=e,this.offset=t,a.call(this,{autoDestroy:!1})};r.inherits(l,a),l.prototype.destroy=function(e){this._parent.destroy(e)};var d=function(e){if(!(this instanceof d))return new d(e);i.call(this,e),e=e||{},this._offset=0,this._buffer=s(),this._missing=0,this._partial=!1,this._onparse=c,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var t=this,n=t._buffer,r=function(){t._continue()},a=function(e){if(t._locked=!1,e)return t.destroy(e);t._stream||r()},f=function(){t._stream=null;var e=u(t._header.size);e?t._parse(e,p):t._parse(512,y),t._locked||r()},p=function(){t._buffer.consume(u(t._header.size)),t._parse(512,y),r()},h=function(){var e=t._header.size;t._paxGlobal=o.decodePax(n.slice(0,e)),n.consume(e),f()},m=function(){var e=t._header.size;t._pax=o.decodePax(n.slice(0,e)),t._paxGlobal&&(t._pax=Object.assign({},t._paxGlobal,t._pax)),n.consume(e),f()},g=function(){var r=t._header.size;this._gnuLongPath=o.decodeLongPath(n.slice(0,r),e.filenameEncoding),n.consume(r),f()},b=function(){var r=t._header.size;this._gnuLongLinkPath=o.decodeLongPath(n.slice(0,r),e.filenameEncoding),n.consume(r),f()},y=function(){var s,i=t._offset;try{s=t._header=o.decode(n.slice(0,512),e.filenameEncoding,e.allowUnknownFormat)}catch(e){t.emit("error",e)}return n.consume(512),s?"gnu-long-path"===s.type?(t._parse(s.size,g),void r()):"gnu-long-link-path"===s.type?(t._parse(s.size,b),void r()):"pax-global-header"===s.type?(t._parse(s.size,h),void r()):"pax-header"===s.type?(t._parse(s.size,m),void r()):(t._gnuLongPath&&(s.name=t._gnuLongPath,t._gnuLongPath=null),t._gnuLongLinkPath&&(s.linkname=t._gnuLongLinkPath,t._gnuLongLinkPath=null),t._pax&&(t._header=s=function(e,t){return t.path&&(e.name=t.path),t.linkpath&&(e.linkname=t.linkpath),t.size&&(e.size=parseInt(t.size,10)),e.pax=t,e}(s,t._pax),t._pax=null),t._locked=!0,s.size&&"directory"!==s.type?(t._stream=new l(t,i),t.emit("entry",s,t._stream,a),t._parse(s.size,f),void r()):(t._parse(512,y),void t.emit("entry",s,function(e,t){var n=new l(e,t);return n.end(),n}(t,i),a))):(t._parse(512,y),void r())};this._onheader=y,this._parse(512,y)};r.inherits(d,i),d.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.emit("close"))},d.prototype._parse=function(e,t){this._destroyed||(this._offset+=e,this._missing=e,t===this._onheader&&(this._partial=!1),this._onparse=t)},d.prototype._continue=function(){if(!this._destroyed){var e=this._cb;this._cb=c,this._overflow?this._write(this._overflow,undefined,e):e()}},d.prototype._write=function(e,t,n){if(!this._destroyed){var r=this._stream,s=this._buffer,o=this._missing;if(e.length&&(this._partial=!0),e.length<o)return this._missing-=e.length,this._overflow=null,r?r.write(e,n):(s.append(e),n());this._cb=n,this._missing=0;var i=null;e.length>o&&(i=e.slice(o),e=e.slice(0,o)),r?r.end(e):s.append(e),this._overflow=i,this._onparse()}},d.prototype._final=function(e){if(this._partial)return this.destroy(new Error("Unexpected end of data"));e()},t.exports=d}}},{package:"tar-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/extract.js"}],[5912,{buffer:2081},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){var t=e.alloc,r="0".charCodeAt(0),s=e.from("ustar\0","binary"),o=e.from("00","binary"),i=e.from("ustar ","binary"),a=e.from(" \0","binary"),c=parseInt("7777",8),u=257,l=function(e,t,n,r){for(;n<r;n++)if(e[n]===t)return n;return r},d=function(e){for(var t=256,n=0;n<148;n++)t+=e[n];for(var r=156;r<512;r++)t+=e[r];return t},f=function(e,t){return(e=e.toString(8)).length>t?"7777777777777777777".slice(0,t)+" ":"0000000000000000000".slice(0,t-e.length)+e+" "};var p=function(e,t,n){if(128&(e=e.slice(t,t+n))[t=0])return function(e){var t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}for(var n=[],r=e.length-1;r>0;r--){var s=e[r];t?n.push(s):n.push(255-s)}var o=0,i=n.length;for(r=0;r<i;r++)o+=n[r]*Math.pow(256,r);return t?o:-1*o}(e);for(;t<e.length&&32===e[t];)t++;for(var r=(s=l(e,32,t,e.length),o=e.length,i=e.length,"number"!=typeof s?i:(s=~~s)>=o?o:s>=0||(s+=o)>=0?s:0);t<r&&0===e[t];)t++;return r===t?0:parseInt(e.slice(t,r).toString(),8);var s,o,i},h=function(e,t,n,r){return e.slice(t,l(e,0,t,t+n)).toString(r)},m=function(t){var n=e.byteLength(t),r=Math.floor(Math.log(n)/Math.log(10))+1;return n+r>=Math.pow(10,r)&&r++,n+r+t};n.decodeLongPath=function(e,t){return h(e,0,e.length,t)},n.encodePax=function(t){var n="";t.name&&(n+=m(" path="+t.name+"\n")),t.linkname&&(n+=m(" linkpath="+t.linkname+"\n"));var r=t.pax;if(r)for(var s in r)n+=m(" "+s+"="+r[s]+"\n");return e.from(n)},n.decodePax=function(e){for(var t={};e.length;){for(var n=0;n<e.length&&32!==e[n];)n++;var r=parseInt(e.slice(0,n).toString(),10);if(!r)return t;var s=e.slice(n+1,r-1).toString(),o=s.indexOf("=");if(-1===o)return t;t[s.slice(0,o)]=s.slice(o+1),e=e.slice(r)}return t},n.encode=function(n){var i=t(512),a=n.name,l="";if(5===n.typeflag&&"/"!==a[a.length-1]&&(a+="/"),e.byteLength(a)!==a.length)return null;for(;e.byteLength(a)>100;){var p=a.indexOf("/");if(-1===p)return null;l+=l?"/"+a.slice(0,p):a.slice(0,p),a=a.slice(p+1)}return e.byteLength(a)>100||e.byteLength(l)>155||n.linkname&&e.byteLength(n.linkname)>100?null:(i.write(a),i.write(f(n.mode&c,6),100),i.write(f(n.uid,6),108),i.write(f(n.gid,6),116),i.write(f(n.size,11),124),i.write(f(n.mtime.getTime()/1e3|0,11),136),i[156]=r+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(n.type),n.linkname&&i.write(n.linkname,157),s.copy(i,u),o.copy(i,263),n.uname&&i.write(n.uname,265),n.gname&&i.write(n.gname,297),i.write(f(n.devmajor||0,6),329),i.write(f(n.devminor||0,6),337),l&&i.write(l,345),i.write(f(d(i),6),148),i)},n.decode=function(e,t,n){var o=0===e[156]?0:e[156]-r,c=h(e,0,100,t),l=p(e,100,8),f=p(e,108,8),m=p(e,116,8),g=p(e,124,12),b=p(e,136,12),y=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(o),v=0===e[157]?null:h(e,157,100,t),_=h(e,265,32),w=h(e,297,32),E=p(e,329,8),k=p(e,337,8),C=d(e);if(256===C)return null;if(C!==p(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(0===s.compare(e,u,263))e[345]&&(c=h(e,345,155,t)+"/"+c);else if(0===i.compare(e,u,263)&&0===a.compare(e,263,265));else if(!n)throw new Error("Invalid tar header: unknown format.");return 0===o&&c&&"/"===c[c.length-1]&&(o=5),{name:c,mode:l,uid:f,gid:m,size:g,mtime:new Date(1e3*b),type:y,linkname:v,uname:_,gname:w,devmajor:E,devminor:k}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"tar-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/headers.js"}],[5913,{"./extract":5911,"./pack":5931},function(){with(this)return function(){"use strict";return function(e,t,n){n.extract=e("./extract"),n.pack=e("./pack")}}},{package:"tar-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/index.js"}],[5914,{buffer:2081},function(){with(this)return function(){"use strict";return function(e,t,n){const{Buffer:r}=e("buffer"),s=Symbol.for("BufferList");function o(e){if(!(this instanceof o))return new o(e);o._init.call(this,e)}o._init=function(e){Object.defineProperty(this,s,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},o.prototype._new=function(e){return new o(e)},o.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let n=0;n<this._bufs.length;n++){const r=t+this._bufs[n].length;if(e<r||n===this._bufs.length-1)return[n,e-t];t=r}},o.prototype._reverseOffset=function(e){const t=e[0];let n=e[1];for(let e=0;e<t;e++)n+=this._bufs[e].length;return n},o.prototype.get=function(e){if(e>this.length||e<0)return undefined;const t=this._offset(e);return this._bufs[t[0]][t[1]]},o.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},o.prototype.copy=function(e,t,n,s){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof s||s>this.length)&&(s=this.length),n>=this.length)return e||r.alloc(0);if(s<=0)return e||r.alloc(0);const o=!!e,i=this._offset(n),a=s-n;let c=a,u=o&&t||0,l=i[1];if(0===n&&s===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,u),u+=this._bufs[t].length;return e}if(c<=this._bufs[i[0]].length-l)return o?this._bufs[i[0]].copy(e,t,l,l+c):this._bufs[i[0]].slice(l,l+c);o||(e=r.allocUnsafe(a));for(let t=i[0];t<this._bufs.length;t++){const n=this._bufs[t].length-l;if(!(c>n)){this._bufs[t].copy(e,u,l,l+c),u+=n;break}this._bufs[t].copy(e,u,l),u+=n,c-=n,l&&(l=0)}return e.length>u?e.slice(0,u):e},o.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const n=this._offset(e),r=this._offset(t),s=this._bufs.slice(n[0],r[0]+1);return 0===r[1]?s.pop():s[s.length-1]=s[s.length-1].slice(0,r[1]),0!==n[1]&&(s[0]=s[0].slice(n[1])),this._new(s)},o.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},o.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},o.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(r.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"==typeof e&&(e=e.toString()),this._appendBuffer(r.from(e));return this},o.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},o.prototype.indexOf=function(e,t,n){if(n===undefined&&"string"==typeof t&&(n=t,t=undefined),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=r.from([e]):"string"==typeof e?e=r.from(e,n):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=r.from(e.buffer,e.byteOffset,e.byteLength):r.isBuffer(e)||(e=r.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const s=this._offset(t);let o=s[0],i=s[1];for(;o<this._bufs.length;o++){const t=this._bufs[o];for(;i<t.length;){if(t.length-i>=e.length){const n=t.indexOf(e,i);if(-1!==n)return this._reverseOffset([o,n]);i=t.length-e.length+1}else{const t=this._reverseOffset([o,i]);if(this._match(t,e))return t;i++}}i=0}return-1},o.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let n=0;n<t.length;n++)if(this.get(e+n)!==t[n])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)!function(t){o.prototype[t]=null===e[t]?function(e,n){return this.slice(e,e+n)[t](0,n)}:function(n=0){return this.slice(n,n+e[t])[t](0)}}(t)}(),o.prototype._isBufferList=function(e){return e instanceof o||o.isBufferList(e)},o.isBufferList=function(e){return null!=e&&e[s]},t.exports=o}}},{package:"bl",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/bl/BufferList.js"}],[5915,{"./BufferList":5914,inherits:4404,"readable-stream":5930},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("readable-stream").Duplex,s=e("inherits"),o=e("./BufferList");function i(e){if(!(this instanceof i))return new i(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)})),e=null}o._init.call(this,e),r.call(this)}s(i,r),Object.assign(i.prototype,o.prototype),i.prototype._new=function(e){return new i(e)},i.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},i.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},i.prototype.end=function(e){r.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},i.prototype._isBufferList=function(e){return e instanceof i||e instanceof o||i.isBufferList(e)},i.isBufferList=o.isBufferList,t.exports=i,t.exports.BufferListStream=i,t.exports.BufferList=o}}},{package:"bl",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/bl/bl.js"}],[5916,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={};function s(e,t,n){n||(n=Error);var s=function(e){var n,r;function s(n,r,s){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,s))||this}return r=e,(n=s).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,s}(n);s.prototype.name=n.name,s.prototype.code=e,r[e]=s}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}s("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,s,i,a;if("string"==typeof t&&(s="not ",t.substr(!i||i<0?0:+i,s.length)===s)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(n===undefined||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(o(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/errors-browser.js"}],[5917,{"./_stream_readable":5919,"./_stream_writable":5921,_process:5420,inherits:4404},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=u;var s=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(u,s);for(var i=r(o.prototype),a=0;a<i.length;a++){var c=i[a];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);s.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/_stream_duplex.js"}],[5918,{"./_stream_transform":5920,inherits:4404},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=s;var r=e("./_stream_transform");function s(e){if(!(this instanceof s))return new s(e);r.call(this,e)}e("inherits")(s,r),s.prototype._transform=function(e,t,n){n(null,e)}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/_stream_passthrough.js"}],[5919,{"../errors":5916,"./_stream_duplex":5917,"./internal/streams/async_iterator":5922,"./internal/streams/buffer_list":5923,"./internal/streams/destroy":5924,"./internal/streams/from":5926,"./internal/streams/state":5928,"./internal/streams/stream":5929,_process:5420,buffer:2081,events:2082,inherits:4404,"string_decoder/":5897,util:2080},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;t.exports=C,C.ReadableState=k;e("events").EventEmitter;var s=function(e,t){return e.listeners(t).length},o=e("./internal/streams/stream"),i=e("buffer").Buffer,a=global.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,d,f,p=e("./internal/streams/buffer_list"),h=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,b=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(C,o);var w=h.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(t,n,s){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=n instanceof r),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",s),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function C(t){if(r=r||e("./_stream_duplex"),!(this instanceof C))return new C(t);var n=this instanceof r;this._readableState=new k(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function S(e,t,n,r,s){c("readableAddChunk",t);var o,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,u);else if(s||(o=function(e,t){var n;r=t,i.isBuffer(r)||r instanceof a||"string"==typeof t||t===undefined||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(u,t)),o)w(e,o);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===i.prototype||(t=function(e){return i.from(e)}(t)),r)u.endEmitted?w(e,new _):M(e,u,t,!0);else if(u.ended)w(e,new y);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!n?(t=u.decoder.write(t),u.objectMode||0!==t.length?M(e,u,t,!1):R(e,u)):M(e,u,t,!1)}else r||(u.reading=!1,R(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function M(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&P(e)),R(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=h.destroy,C.prototype._undestroy=h.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=i.from(e,t),t=""),n=!0),S(this,e,t,!1,n)},C.prototype.unshift=function(e){return S(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var n=new l(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,s="";null!==r;)s+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this};var T=1073741824;function O(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(A,e))}function A(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,j(e)}function R(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(x,e,t))}function x(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function D(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function I(e){c("readable nexttick read 0"),e.read(0)}function N(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function L(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(F,t,e))}function F(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}C.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):P(this),null;if(0===(e=O(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,s=t.needReadable;return c("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",s=!0),t.ended||t.reading?c("reading or ended",s=!1):s&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=O(n,t))),null===(r=e>0?U(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},C.prototype._read=function(e){w(this,new v("_read()"))},C.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,c("pipe count=%d opts=%j",o.pipesCount,t);var i=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?u:g;function a(t,n){c("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",h),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",a),r.removeListener("end",u),r.removeListener("end",g),r.removeListener("data",f),d=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}o.endEmitted?n.nextTick(i):r.once("end",i),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,j(e))}}(r);e.on("drain",l);var d=!1;function f(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==B(o.pipes,e))&&!d&&(c("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function p(t){c("onerror",t),g(),e.removeListener("error",p),0===s(e,"error")&&w(e,t)}function h(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",h),g()}function g(){c("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",h),e.once("finish",m),e.emit("pipe",r),o.flowing||(c("pipe resume"),r.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<s;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var i=B(t.pipes,e);return-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},C.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),s=this._readableState;return"data"===e?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===e&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,c("on readable",s.length,s.reading),s.length?P(this):s.reading||n.nextTick(I,this))),r},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(D,this),r},C.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||n.nextTick(D,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(N,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var s in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(s){(c("wrapped data"),n.decoder&&(s=n.decoder.write(s)),!n.objectMode||null!==s&&s!==undefined)&&((n.objectMode||s&&s.length)&&(t.push(s)||(r=!0,e.pause())))})),e)this[s]===undefined&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=U,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(t,n){return f===undefined&&(f=e("./internal/streams/from")),f(C,t,n)})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/_stream_readable.js"}],[5920,{"../errors":5916,"./_stream_duplex":5917,inherits:4404},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=l;var r=e("../errors").codes,s=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,i=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,n){f(e,t,n)}))}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new i;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new s("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/_stream_transform.js"}],[5921,{"../errors":5916,"./_stream_duplex":5917,"./internal/streams/destroy":5924,"./internal/streams/state":5928,"./internal/streams/stream":5929,_process:5420,buffer:2081,inherits:4404,"util-deprecate":6008},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var s=r.callback;t.pendingcb--,s(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var s;t.exports=C,C.WritableState=k;var o={deprecate:e("util-deprecate")},i=e("./internal/streams/stream"),a=e("buffer").Buffer,c=global.Uint8Array||function(){};var u,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,f=e("../errors").codes,p=f.ERR_INVALID_ARG_TYPE,h=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,b=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,v=f.ERR_STREAM_WRITE_AFTER_END,_=f.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function E(){}function k(t,o,i){s=s||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=o instanceof s),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,s=r.sync,o=r.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,s,o){--t.pendingcb,r?(n.nextTick(o,s),n.nextTick(A,e,t),e._writableState.errorEmitted=!0,w(e,s)):(o(s),e._writableState.errorEmitted=!0,w(e,s),A(e,t))}(e,r,s,t,o);else{var i=O(r)||e.destroyed;i||r.corked||r.bufferProcessing||!r.bufferedRequest||T(e,r),s?n.nextTick(M,e,r,i,o):M(e,r,i,o)}}(o,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function C(t){var n=this instanceof(s=s||e("./_stream_duplex"));if(!n&&!u.call(C,this))return new C(t);this._writableState=new k(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),i.call(this)}function S(e,t,n,r,s,o,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(s,t.onwrite):e._write(s,o,t.onwrite),t.sync=!1}function M(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var s=t.bufferedRequestCount,o=new Array(s),i=t.corkedRequestsFree;i.entry=n;for(var a=0,c=!0;n;)o[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;o.allBuffers=c,S(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(S(e,t,!1,t.objectMode?1:u.length,u,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function O(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var r=O(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var s=e._readableState;(!s||s.autoDestroy&&s.endEmitted)&&e.destroy()}return r}e("inherits")(C,i),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===C&&(e&&e._writableState instanceof k)}})):u=function(e){return e instanceof this},C.prototype.pipe=function(){w(this,new g)},C.prototype.write=function(e,t,r){var s,o=this._writableState,i=!1,u=!o.objectMode&&(s=e,a.isBuffer(s)||s instanceof c);return u&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(r=t,t=null),u?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=E),o.ending?function(e,t){var r=new v;w(e,r),n.nextTick(t,r)}(this,r):(u||function(e,t,r,s){var o;return null===r?o=new y:"string"==typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(w(e,o),n.nextTick(s,o),!1)}(this,o,e,r))&&(o.pendingcb++,i=function(e,t,n,r,s,o){if(!n){var i=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,r,s);r!==i&&(n=!0,s="buffer",r=i)}var c=t.objectMode?1:r.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else S(e,t,!1,c,r,s,o);return u}(this,o,u,e,t,r)),i},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,n){n(new h("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,r){var s=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||function(e,t,r){t.ending=!0,A(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,s,r),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=l.destroy,C.prototype._undestroy=l.undestroy,C.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/_stream_writable.js"}],[5922,{"./end-of-stream":5925,_process:5420},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=e("./end-of-stream"),i=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function h(e){var t=e[i];if(null!==t){var n=e[f].read();null!==n&&(e[l]=null,e[i]=null,e[a]=null,t(p(n,!1)))}}function m(e){n.nextTick(h,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((s(r={get stream(){return this[f]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(p(undefined,!0));if(this[f].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[c]?r(e[c]):t(p(undefined,!0))}))}));var r,s=this[l];if(s)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[u]?n(p(undefined,!0)):t[d](n,r)}),r)}}(s,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[d])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),s(r,"return",(function(){var e=this;return new Promise((function(t,n){e[f].destroy(null,(function(e){e?n(e):t(p(undefined,!0))}))}))})),r),g);t.exports=function(e){var t,n=Object.create(b,(s(t={},f,{value:e,writable:!0}),s(t,i,{value:null,writable:!0}),s(t,a,{value:null,writable:!0}),s(t,c,{value:null,writable:!0}),s(t,u,{value:e._readableState.endEmitted,writable:!0}),s(t,d,{value:function(e,t){var r=n[f].read();r?(n[l]=null,n[i]=null,n[a]=null,e(p(r,!1))):(n[i]=e,n[a]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[i]=null,n[a]=null,t(e)),void(n[c]=e)}var r=n[i];null!==r&&(n[l]=null,n[i]=null,n[a]=null,r(p(undefined,!0))),n[u]=!0})),e.on("readable",m.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[5923,{buffer:2081,util:2080},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=e("buffer").Buffer,a=e("util").inspect,c=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,u;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return i.alloc(0);for(var t,n,r,s=i.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=s,r=a,i.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return s}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var s=t.data,o=e>s.length?s.length:e;if(o===s.length?r+=s:r+=s.slice(0,e),0==(e-=o)){o===s.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=s.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=i.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,o),0==(e-=o)){o===s.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(o));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),u&&o(t,u),e}()}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[5924,{_process:5420},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){s(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var i=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(s,this,t)):e.nextTick(s,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?i._writableState?i._writableState.errorEmitted?e.nextTick(r,i):(i._writableState.errorEmitted=!0,e.nextTick(n,i,t)):e.nextTick(n,i,t):o?(e.nextTick(r,i),o(t)):e.nextTick(r,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[5925,{"../../../errors":5916},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}t.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.apply(this,r)}}}(o||s);var i=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,i||o.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){i=!1,d=!0,a||o.call(t)},p=function(e){o.call(t,e)},h=function(){var e;return i&&!d?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",h),t.req?m():t.on("request",m)),t.on("end",f),t.on("finish",l),!1!==n.error&&t.on("error",p),t.on("close",h),function(){t.removeListener("complete",l),t.removeListener("abort",h),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",p),t.removeListener("close",h)}}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[5926,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[5927,{"../../../errors":5916,"./end-of-stream":5925},function(){with(this)return function(){"use strict";return function(e,t,n){var r;var s=e("../../../errors").codes,o=s.ERR_MISSING_ARGS,i=s.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(t,n,s,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;t.on("close",(function(){a=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:s},(function(e){if(e)return o(e);a=!0,o()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new i("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,s=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var i=t.map((function(e,n){var o=n<t.length-1;return c(e,o,n>0,(function(e){r||(r=e),e&&i.forEach(u),o||(i.forEach(u),s(r))}))}));return t.reduce(l)}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[5928,{"../../../errors":5916},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,s){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,s,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(s?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/state.js"}],[5929,{events:2082},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[5930,{"./lib/_stream_duplex.js":5917,"./lib/_stream_passthrough.js":5918,"./lib/_stream_readable.js":5919,"./lib/_stream_transform.js":5920,"./lib/_stream_writable.js":5921,"./lib/internal/streams/end-of-stream.js":5925,"./lib/internal/streams/pipeline.js":5927},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/node_modules/readable-stream/readable-browser.js"}],[5931,{"./headers":5912,_process:5420,buffer:2081,"end-of-stream":2338,"fs-constants":4302,inherits:4404,"readable-stream":5930,string_decoder:5897},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n,r){(function(){var s=e("fs-constants"),o=e("end-of-stream"),i=e("inherits"),a=r.alloc,c=e("readable-stream").Readable,u=e("readable-stream").Writable,l=e("string_decoder").StringDecoder,d=e("./headers"),f=parseInt("755",8),p=parseInt("644",8),h=a(1024),m=function(){},g=function(e,t){(t&=511)&&e.push(h.slice(0,512-t))};var b=function(e){u.call(this),this.written=0,this._to=e,this._destroyed=!1};i(b,u),b.prototype._write=function(e,t,n){if(this.written+=e.length,this._to.push(e))return n();this._to._drain=n},b.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var y=function(){u.call(this),this.linkname="",this._decoder=new l("utf-8"),this._destroyed=!1};i(y,u),y.prototype._write=function(e,t,n){this.linkname+=this._decoder.write(e),n()},y.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var v=function(){u.call(this),this._destroyed=!1};i(v,u),v.prototype._write=function(e,t,n){n(new Error("No body allowed for this entry"))},v.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var _=function(e){if(!(this instanceof _))return new _(e);c.call(this,e),this._drain=m,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};i(_,c),_.prototype.entry=function(e,t,i){if(this._stream)throw new Error("already piping an entry");if(!this._finalized&&!this._destroyed){"function"==typeof t&&(i=t,t=null),i||(i=m);var a=this;if(e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&s.S_IFMT){case s.S_IFBLK:return"block-device";case s.S_IFCHR:return"character-device";case s.S_IFDIR:return"directory";case s.S_IFIFO:return"fifo";case s.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?f:p),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=r.from(t)),r.isBuffer(t)){e.size=t.length,this._encode(e);var c=this.push(t);return g(a,e.size),c?n.nextTick(i):this._drain=i,new v}if("symlink"===e.type&&!e.linkname){var u=new y;return o(u,(function(t){if(t)return a.destroy(),i(t);e.linkname=u.linkname,a._encode(e),i()})),u}if(this._encode(e),"file"!==e.type&&"contiguous-file"!==e.type)return n.nextTick(i),new v;var l=new b(this);return this._stream=l,o(l,(function(t){return a._stream=null,t?(a.destroy(),i(t)):l.written!==e.size?(a.destroy(),i(new Error("size mismatch"))):(g(a,e.size),a._finalizing&&a.finalize(),void i())})),l}},_.prototype.finalize=function(){this._stream?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(h),this.push(null))},_.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())},_.prototype._encode=function(e){if(!e.pax){var t=d.encode(e);if(t)return void this.push(t)}this._encodePax(e)},_.prototype._encodePax=function(e){var t=d.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(d.encode(n)),this.push(t),g(this,t.length),n.size=e.size,n.type=e.type,this.push(d.encode(n))},_.prototype._read=function(e){var t=this._drain;this._drain=m,t()},t.exports=_}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"tar-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/tar-stream/pack.js"}],[5933,{_process:5420,stream:2084},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("stream");function s(e,t,s){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var o=!1,i=!1,a=[],c=!1,u=new r;function l(){for(;a.length&&!u.paused;){var e=a.shift();if(null===e)return u.emit("end");u.emit("data",e)}}function d(){u.writable=!1,t.call(u),!u.readable&&u.autoDestroy&&u.destroy()}return u.readable=u.writable=!0,u.paused=!1,u.autoDestroy=!(s&&!1===s.autoDestroy),u.write=function(t){return e.call(this,t),!u.paused},u.queue=u.push=function(e){return c||(null===e&&(c=!0),a.push(e),l()),u},u.on("end",(function(){u.readable=!1,!u.writable&&u.autoDestroy&&n.nextTick((function(){u.destroy()}))})),u.end=function(e){if(!o)return o=!0,arguments.length&&u.write(e),d(),u},u.destroy=function(){if(!i)return i=!0,o=!0,a.length=0,u.writable=u.readable=!1,u.emit("close"),u},u.pause=function(){if(!u.paused)return u.paused=!0,u},u.resume=function(){return u.paused&&(u.paused=!1,u.emit("resume")),l(),u.paused||u.emit("drain"),u},u}t.exports=s,s.through=s}).call(this)}).call(this,e("_process"))}}},{package:"through",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/through/index.js"}],[5934,{"lodash.throttle":5002},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("lodash.throttle");t.exports=function e(t){if(!(this instanceof e))return new e(t);const n=(t=t||{}).validity||30,s=new Map,o=r((()=>{s.forEach(((e,t)=>{const r=e.validity||n;(function(e){const t=(new Date).getTime()-e.getTime();return Math.floor(t/1e3)})(e.timestamp)>r&&s.delete(t)}))}),200);this.put=(e,t,n)=>{this.has(e)||s.set(e,{value:t,timestamp:new Date,validity:n}),o()},this.get=e=>{if(s.has(e))return s.get(e).value;throw new Error("key does not exist")},this.has=e=>s.has(e)}}}},{package:"time-cache",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/time-cache/src/index.js"}],[5936,{},function(){with(this)return function(){"use strict";return function(e,t,n){
/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */
!function(){void 0!==t&&(t.exports=g);var e=86400,n=3200,r=1168776,s=100982246400,o=1e3*s,i=864e13,a=4294967296,c=1e6,u=1e9,l="000000000",d=Math.trunc||function(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!=1/0)?-0:t},f=g.prototype;g.fromDate=function(e){return new g(+e)},g.fromInt64BE=w(0,1,2,3,0,4),g.fromInt64LE=w(3,2,1,0,4,0),g.fromString=function(e){var t,n=new g,r=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){var t=+e,r=1970+(t-1970)%400;return n.year=t-r,r})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,n,r){return n<0&&(r*=-1),t=6e4*(60*+n+ +r),""})).replace(/\.\d+$/,(function(e){return n.nano=+(e+l).substr(1,9),""})).split(/\D+/);r.length>1?r[1]--:r[1]=0;if(n.time=t=Date.UTC.apply(Date,r)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return b(n)},g.fromTimeT=function(e){return v(e,0)},f.year=0,f.time=0,f.nano=0,f.addNano=function(e){return this.nano+=+e||0,this},f.getNano=function(){var e=b(this);return(e.time%1e3*c+ +e.nano+u)%u},f.getTimeT=function(){var t=b(this),s=Math.floor(t.time/1e3),o=t.year;o&&(s+=o*r*e/n);return s},f.getYear=function(){return this.toDate().getUTCFullYear()+this.year},f.toDate=function(){return y(b(this).time)},f.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},f.toString=function(e){var t=this,n=t.toDate(),r={H:function(){return k(n.getUTCHours())},L:function(){return C(n.getUTCMilliseconds(),3)},M:function(){return k(n.getUTCMinutes())},N:function(){return C(t.getNano(),9)},S:function(){return k(n.getUTCSeconds())},Y:function(){var e=t.getYear();return e>999999?"+"+e:e>9999?"+"+C(e,6):e>=0?C(e,4):e>=-999999?"-"+C(-e,6):e},a:function(){return h[n.getUTCDay()]},b:function(){return p[n.getUTCMonth()]},d:function(){return k(n.getUTCDate())},e:function(){return e=n.getUTCDate(),(e>9?"":" ")+(0|e);var e},m:function(){return k(n.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var n=t[1],s=m[n],o=r[n];return s?e(s):o?o():t}))}(e||"%Y-%m-%dT%H:%M:%S.%NZ")},f.writeInt64BE=_(0,1,2,3,0,4),f.writeInt64LE=_(3,2,1,0,4,0);var p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],m={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return g;function g(e,t,n){var r=this;if(!(r instanceof g))return new g(e,t,n);r.time=+e||0,r.nano=+t||0,r.year=+n||0,b(r)}function b(e){var t,r,s=e.year,a=e.time,u=e.nano;if(u<0||c<=u){var l=Math.floor(u/c);u-=l*c,a+=l,t=1}var f=s%n;if(a<-i||i<a||f){(r=d(a/o))&&(s+=r*n,a-=r*o);var p=y(a);p.setUTCFullYear(f+p.getUTCFullYear());var h=(a=+p)+(r=d((s-=f)/n))*o;r&&-i<=h&&h<=i&&(s-=r*n,a=h),t=1}return t&&(e.year=s,e.time=a,e.nano=u),e}function y(e){var t=new Date(0);return t.setTime(e),t}function v(e,t){t|=0,e=+e||0;var r=d((t*=a)/s)+d(e/s),o=t%s+e%s,i=d(o/s);return i&&(r+=i,o-=i*s),new g(1e3*o,0,r*n)}function _(e,t,n,r,s,o){return function(e,t){var n=b(this);e||(e=new Array(8));E(e,t|=0);var r=Math.floor(n.time/1e3),c=31556952*n.year,u=d(c/a)+d(r/a),l=c%a+r%a,f=Math.floor(l/a);f&&(u+=f,l-=f*a);return i(e,t+s,u),i(e,t+o,l),e};function i(s,o,i){s[o+e]=i>>24&255,s[o+t]=i>>16&255,s[o+n]=i>>8&255,s[o+r]=255&i}}function w(e,t,n,r,s,o){return function(e,t){E(e,t|=0);var n=i(e,t+s);return v(i(e,t+o),n)};function i(s,o){return 16777216*s[o+e]+(s[o+t]<<16|s[o+n]<<8|s[o+r])}}function E(e,t){var n=e&&e.length;if(null==n)throw new TypeError("Invalid Buffer");if(n<t+8)throw new RangeError("Out of range")}function k(e){return(e>9?"":"0")+(0|e)}function C(e,t){return(l+(0|e)).substr(-t)}}()}}},{package:"timestamp-nano",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/timestamp-nano/timestamp.js"}],[5940,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}}}},{package:"to-array",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/to-array/index.js"}],[5941,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new DataView(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new DataView(e);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}}}},{package:"to-data-view",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/to-data-view/index.js"}],[5943,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.FIAT_RATES_UPDATE=n.NOTIFICATION=n.BLOCK=n.CONNECT=n.ERROR=void 0;n.ERROR="blockchain-error";n.CONNECT="blockchain-connect";n.BLOCK="blockchain-block";n.NOTIFICATION="blockchain-notification";n.FIAT_RATES_UPDATE="fiat-rates-update"}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/constants/blockchain.js"}],[5944,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.POOL_RELAY_TYPE=n.CERTIFICATE_TYPE=n.ADDRESS_TYPE=n.NETWORK_IDS=n.PROTOCOL_MAGICS=void 0;var r=Object.freeze({mainnet:764824073,testnet:42});n.PROTOCOL_MAGICS=r;var s=Object.freeze({mainnet:1,testnet:0});n.NETWORK_IDS=s;var o=Object.freeze({Base:0,Pointer:4,Enterprise:6,Byron:8,Reward:14});n.ADDRESS_TYPE=o;var i=Object.freeze({StakeRegistration:0,StakeDeregistration:1,StakeDelegation:2,StakePoolRegistration:3});n.CERTIFICATE_TYPE=i;var a=Object.freeze({SingleHostIp:0,SingleHostName:1,MultipleHostName:2});n.POOL_RELAY_TYPE=a}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/constants/cardano.js"}],[5945,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.WAIT_FOR_SELECTION=n.WORD=n.PASSPHRASE_ON_DEVICE=n.PASSPHRASE=n.PIN=n.BUTTON=n.LOADING=n.USED_ELSEWHERE=n.RELEASED=n.ACQUIRED=n.RELEASE=n.ACQUIRE=n.CHANGED=n.DISCONNECT=n.CONNECT_UNACQUIRED=n.CONNECT=void 0;n.CONNECT="device-connect";n.CONNECT_UNACQUIRED="device-connect_unacquired";n.DISCONNECT="device-disconnect";n.CHANGED="device-changed";n.ACQUIRE="device-acquire";n.RELEASE="device-release";n.ACQUIRED="device-acquired";n.RELEASED="device-released";n.USED_ELSEWHERE="device-used_elsewhere";n.LOADING="device-loading";n.BUTTON="button";n.PIN="pin";n.PASSPHRASE="passphrase";n.PASSPHRASE_ON_DEVICE="passphrase_on_device";n.WORD="word";n.WAIT_FOR_SELECTION="device-wait_for_selection"}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/constants/device.js"}],[5946,{"@babel/runtime/helpers/inheritsLoose":194,"@babel/runtime/helpers/interopRequireDefault":195,"@babel/runtime/helpers/wrapNativeSuper":214},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.LIBUSB_ERROR_MESSAGE=n.WEBUSB_ERROR_MESSAGE=n.INVALID_PIN_ERROR_MESSAGE=n.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE=n.TypedError=n.TrezorError=n.ERROR_CODES=void 0;var s=r(e("@babel/runtime/helpers/inheritsLoose")),o=r(e("@babel/runtime/helpers/wrapNativeSuper")),i={Init_NotInitialized:"TrezorConnect not yet initialized",Init_AlreadyInitialized:"TrezorConnect has been already initialized",Init_IframeBlocked:"Iframe blocked",Init_IframeTimeout:"Iframe timeout",Init_ManifestMissing:"Manifest not set. Read more at https://github.com/trezor/connect/blob/develop/docs/index.md",Popup_ConnectionMissing:"Unable to establish connection with iframe",Transport_Missing:"Transport is missing",Transport_InvalidProtobuf:"",Method_InvalidPackage:"This version of trezor-connect is not suitable to work without browser. Use trezor-connect@extended package instead",Method_InvalidParameter:"",Method_NotAllowed:"Method not allowed for this configuration",Method_PermissionsNotGranted:"Permissions not granted",Method_Cancel:"Cancelled",Method_Interrupted:"Popup closed",Method_UnknownCoin:"Coin not found",Method_AddressNotMatch:"Addresses do not match",Method_FirmwareUpdate_DownloadFailed:"Failed to download firmware binary",Method_CustomMessage_Callback:'Parameter "callback" is not a function',Method_Discovery_BundleException:"",Method_Override:"override",Method_NoResponse:"Call resolved without response",Backend_NotSupported:"BlockchainLink settings not found in coins.json",Backend_WorkerMissing:"",Backend_Disconnected:"Backend disconnected",Backend_Invalid:"Invalid backend",Backend_Error:"",Runtime:"",Device_NotFound:"Device not found",Device_InitializeFailed:"",Device_FwException:"",Device_ModeException:"",Device_Disconnected:"Device disconnected",Device_UsedElsewhere:"Device is used in another window",Device_InvalidState:"Passphrase is incorrect",Device_CallInProgress:"Device call in progress"};n.ERROR_CODES=i;var a=function(e){function t(t,n){var r;return(r=e.call(this,n)||this).code=t,r.message=n,r}return(0,s.default)(t,e),t}((0,o.default)(Error));n.TrezorError=a;n.TypedError=function(e,t){return new a(e,t||i[e])};n.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE="wrong previous session";n.INVALID_PIN_ERROR_MESSAGE="PIN invalid";n.WEBUSB_ERROR_MESSAGE="NetworkError: Unable to claim interface.";n.LIBUSB_ERROR_MESSAGE="LIBUSB_ERROR"}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/constants/errors.js"}],[5947,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.CALL=n.ERROR=n.INIT=n.LOADED=n.BOOTSTRAP=void 0;n.BOOTSTRAP="iframe-bootstrap";n.LOADED="iframe-loaded";n.INIT="iframe-init";n.ERROR="iframe-error";n.CALL="iframe-call"}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/constants/iframe.js"}],[5948,{"./blockchain":5943,"./cardano":5944,"./device":5945,"./errors":5946,"./iframe":5947,"./network":5949,"./popup":5950,"./transport":5951,"./ui":5952},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.CARDANO=n.UI=n.TRANSPORT=n.POPUP=n.NETWORK=n.IFRAME=n.ERRORS=n.DEVICE=n.BLOCKCHAIN=n.BLOCKCHAIN_EVENT=n.RESPONSE_EVENT=n.TRANSPORT_EVENT=n.DEVICE_EVENT=n.UI_EVENT=n.CORE_EVENT=void 0;var r=p(e("./blockchain"));n.BLOCKCHAIN=r;var s=p(e("./device"));n.DEVICE=s;var o=p(e("./errors"));n.ERRORS=o;var i=p(e("./iframe"));n.IFRAME=i;var a=p(e("./network"));n.NETWORK=a;var c=p(e("./popup"));n.POPUP=c;var u=p(e("./transport"));n.TRANSPORT=u;var l=p(e("./ui"));n.UI=l;var d=p(e("./cardano"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}n.CARDANO=d;n.CORE_EVENT="CORE_EVENT";n.UI_EVENT="UI_EVENT";n.DEVICE_EVENT="DEVICE_EVENT";n.TRANSPORT_EVENT="TRANSPORT_EVENT";n.RESPONSE_EVENT="RESPONSE_EVENT";n.BLOCKCHAIN_EVENT="BLOCKCHAIN_EVENT"}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/constants/index.js"}],[5949,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.TYPES=void 0;var r=Object.freeze({bitcoin:"Bitcoin",ethereum:"Ethereum",eos:"Eos",nem:"NEM",stellar:"Stellar",cardano:"Cardano",ripple:"Ripple",tezos:"Tezors",binance:"Binance"});n.TYPES=r}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/constants/network.js"}],[5950,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.CLOSE_WINDOW=n.CANCEL_POPUP_REQUEST=n.CLOSED=n.HANDSHAKE=n.EXTENSION_USB_PERMISSIONS=n.ERROR=n.INIT=n.LOADED=n.BOOTSTRAP=void 0;n.BOOTSTRAP="popup-bootstrap";n.LOADED="popup-loaded";n.INIT="popup-init";n.ERROR="popup-error";n.EXTENSION_USB_PERMISSIONS="open-usb-permissions";n.HANDSHAKE="popup-handshake";n.CLOSED="popup-closed";n.CANCEL_POPUP_REQUEST="ui-cancel-popup-request";n.CLOSE_WINDOW="window.close"}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/constants/popup.js"}],[5951,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.START_PENDING=n.DISABLE_WEBUSB=n.REQUEST=n.STREAM=n.UPDATE=n.ERROR=n.START=void 0;n.START="transport-start";n.ERROR="transport-error";n.UPDATE="transport-update";n.STREAM="transport-stream";n.REQUEST="transport-request_device";n.DISABLE_WEBUSB="transport-disable_webusb";n.START_PENDING="transport-start_pending"}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/constants/transport.js"}],[5952,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.IFRAME_FAILURE=n.ADDRESS_VALIDATION=n.BUNDLE_PROGRESS=n.LOGIN_CHALLENGE_RESPONSE=n.LOGIN_CHALLENGE_REQUEST=n.CUSTOM_MESSAGE_RESPONSE=n.CUSTOM_MESSAGE_REQUEST=n.CHANGE_SETTINGS=n.RECEIVE_WORD=n.RECEIVE_FEE=n.RECEIVE_ACCOUNT=n.CHANGE_ACCOUNT=n.RECEIVE_DEVICE=n.RECEIVE_PASSPHRASE=n.RECEIVE_PIN=n.RECEIVE_CONFIRMATION=n.RECEIVE_PERMISSION=n.REQUEST_WORD=n.REQUEST_BUTTON=n.INSUFFICIENT_FUNDS=n.UPDATE_CUSTOM_FEE=n.SELECT_FEE=n.SELECT_ACCOUNT=n.SELECT_DEVICE=n.SET_OPERATION=n.LOADING=n.CONNECT=n.INVALID_PASSPHRASE_ACTION=n.INVALID_PASSPHRASE=n.REQUEST_PASSPHRASE_ON_DEVICE=n.REQUEST_PASSPHRASE=n.INVALID_PIN=n.REQUEST_PIN=n.REQUEST_CONFIRMATION=n.REQUEST_PERMISSION=n.CLOSE_UI_WINDOW=n.REQUEST_UI_WINDOW=n.DEVICE_NEEDS_BACKUP=n.FIRMWARE_PROGRESS=n.FIRMWARE_NOT_INSTALLED=n.FIRMWARE_NOT_COMPATIBLE=n.FIRMWARE_NOT_SUPPORTED=n.FIRMWARE_OUTDATED=n.FIRMWARE_OLD=n.SEEDLESS=n.INITIALIZE=n.REQUIRE_MODE=n.NOT_IN_BOOTLOADER=n.BOOTLOADER=n.TRANSPORT=void 0;n.TRANSPORT="ui-no_transport";n.BOOTLOADER="ui-device_bootloader_mode";n.NOT_IN_BOOTLOADER="ui-device_not_in_bootloader_mode";n.REQUIRE_MODE="ui-device_require_mode";n.INITIALIZE="ui-device_not_initialized";n.SEEDLESS="ui-device_seedless";n.FIRMWARE_OLD="ui-device_firmware_old";n.FIRMWARE_OUTDATED="ui-device_firmware_outdated";n.FIRMWARE_NOT_SUPPORTED="ui-device_firmware_unsupported";n.FIRMWARE_NOT_COMPATIBLE="ui-device_firmware_not_compatible";n.FIRMWARE_NOT_INSTALLED="ui-device_firmware_not_installed";n.FIRMWARE_PROGRESS="ui-firmware-progress";n.DEVICE_NEEDS_BACKUP="ui-device_needs_backup";n.REQUEST_UI_WINDOW="ui-request_window";n.CLOSE_UI_WINDOW="ui-close_window";n.REQUEST_PERMISSION="ui-request_permission";n.REQUEST_CONFIRMATION="ui-request_confirmation";n.REQUEST_PIN="ui-request_pin";n.INVALID_PIN="ui-invalid_pin";n.REQUEST_PASSPHRASE="ui-request_passphrase";n.REQUEST_PASSPHRASE_ON_DEVICE="ui-request_passphrase_on_device";n.INVALID_PASSPHRASE="ui-invalid_passphrase";n.INVALID_PASSPHRASE_ACTION="ui-invalid_passphrase_action";n.CONNECT="ui-connect";n.LOADING="ui-loading";n.SET_OPERATION="ui-set_operation";n.SELECT_DEVICE="ui-select_device";n.SELECT_ACCOUNT="ui-select_account";n.SELECT_FEE="ui-select_fee";n.UPDATE_CUSTOM_FEE="ui-update_custom_fee";n.INSUFFICIENT_FUNDS="ui-insufficient_funds";n.REQUEST_BUTTON="ui-button";n.REQUEST_WORD="ui-request_word";n.RECEIVE_PERMISSION="ui-receive_permission";n.RECEIVE_CONFIRMATION="ui-receive_confirmation";n.RECEIVE_PIN="ui-receive_pin";n.RECEIVE_PASSPHRASE="ui-receive_passphrase";n.RECEIVE_DEVICE="ui-receive_device";n.CHANGE_ACCOUNT="ui-change_account";n.RECEIVE_ACCOUNT="ui-receive_account";n.RECEIVE_FEE="ui-receive_fee";n.RECEIVE_WORD="ui-receive_word";n.CHANGE_SETTINGS="ui-change_settings";n.CUSTOM_MESSAGE_REQUEST="ui-custom_request";n.CUSTOM_MESSAGE_RESPONSE="ui-custom_response";n.LOGIN_CHALLENGE_REQUEST="ui-login_challenge_request";n.LOGIN_CHALLENGE_RESPONSE="ui-login_challenge_response";n.BUNDLE_PROGRESS="ui-bundle_progress";n.ADDRESS_VALIDATION="ui-address_validation";n.IFRAME_FAILURE="ui-iframe_failure"}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/constants/ui.js"}],[5953,{"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.parse=n.corsValidator=n.getEnv=n.DEFAULT_PRIORITY=void 0;var s=r(e("@babel/runtime/helpers/defineProperty"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i="8.2.6",a="https://connect.trezor.io/"+(i.split(".").map((function(e){return parseInt(e,10)}))[0]+"/");n.DEFAULT_PRIORITY=2;var c={configSrc:"./data/config.json",version:i,debug:!1,priority:2,trustedHost:!1,connectSrc:a,iframeSrc:a+"iframe.html",popup:!0,popupSrc:a+"popup.html",webusbSrc:a+"webusb.html",transportReconnect:!1,webusb:!0,pendingTransportEvent:!0,supportedBrowser:"undefined"==typeof navigator||!/Trident|MSIE|Edge/.test(navigator.userAgent),manifest:null,env:"web",lazyLoad:!1,timestamp:(new Date).getTime(),interactionTimeout:600},u=function(){if("undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect)return"webextension";if("undefined"!=typeof navigator){if("string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"};n.getEnv=u;var l=function(e){if("string"==typeof e)return e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*trezor\.io\//)||e.match(/^https?:\/\/localhost:[58][0-9]{3}\//)||e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*sldev\.cz\//)||e.match(/^https?:\/\/([A-Za-z0-9\-_]+\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\.onion\//)?e:void 0};n.corsValidator=l;n.parse=function(e){void 0===e&&(e={});var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c);if(Object.prototype.hasOwnProperty.call(e,"debug")&&(Array.isArray(e),"boolean"==typeof e.debug?t.debug=e.debug:"string"==typeof e.debug&&(t.debug="true"===e.debug)),"string"==typeof e.connectSrc&&(t.connectSrc=e.connectSrc),"undefined"!=typeof global&&"string"==typeof global.__TREZOR_CONNECT_SRC&&(t.connectSrc=l(global.__TREZOR_CONNECT_SRC),t.debug=!0),"undefined"!=typeof window&&window.location&&"string"==typeof window.location.search){var n=window.location.search.split("&").find((function(e){return e.indexOf("trezor-connect-src")>=0}));if(n){var r=n.split("=")[1];t.connectSrc=l(decodeURIComponent(r)),t.debug=!0}}var i=t.connectSrc||a;return t.iframeSrc=i+"iframe.html",t.popupSrc=i+"popup.html",t.webusbSrc=i+"webusb.html","boolean"==typeof e.transportReconnect&&(t.transportReconnect=e.transportReconnect),"boolean"==typeof e.webusb&&(t.webusb=e.webusb),"boolean"==typeof e.popup&&(t.popup=e.popup),"boolean"==typeof e.lazyLoad&&(t.lazyLoad=e.lazyLoad),"boolean"==typeof e.pendingTransportEvent&&(t.pendingTransportEvent=e.pendingTransportEvent),"undefined"!=typeof window&&window.location&&"file:"===window.location.protocol&&(t.origin="file://"+window.location.pathname,t.webusb=!1),"string"==typeof e.extension&&(t.extension=e.extension),"string"==typeof e.env?t.env=e.env:t.env=u(),"number"==typeof e.timestamp&&(t.timestamp=e.timestamp),"number"==typeof e.interactionTimeout&&(t.interactionTimeout=e.interactionTimeout),"object"==typeof e.manifest&&(t.manifest=function(e){if(e&&"string"==typeof e.email&&"string"==typeof e.appUrl)return{email:e.email,appUrl:e.appUrl}}(e.manifest)),c=t}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/data/ConnectSettings.js"}],[5954,{"../../constants":5948,"../../data/ConnectSettings":5953,"../../iframe/builder":5956,"../../message":5960,"../../message/builder":5959,"../../popup/PopupManager":5962,"../../types":5969,"../../utils/debug":5985,"../../webusb/button":5987,"@babel/runtime/helpers/asyncToGenerator":185,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,"@babel/runtime/regenerator":215,events:2082},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.disableWebUSB=n.requestLogin=n.customMessage=n.getSettings=n.renderWebUSBButton=n.uiResponse=n.call=n.init=n.cancel=n.dispose=n.manifest=n.eventEmitter=void 0;var s=r(e("@babel/runtime/regenerator")),o=r(e("@babel/runtime/helpers/defineProperty")),i=r(e("@babel/runtime/helpers/asyncToGenerator")),a=r(e("events")),c=r(e("../../popup/PopupManager")),u=b(e("../../iframe/builder")),l=r(e("../../webusb/button")),d=e("../../message"),f=e("../../message/builder"),p=e("../../data/ConnectSettings"),h=e("../../utils/debug"),m=e("../../constants");b(e("../../types"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=new a.default;n.eventEmitter=_;var w,E,k=(0,h.initLog)("[trezor-connect.js]"),C=function(){var e=new c.default(w);return e.on(m.POPUP.CLOSED,(function(e){u.postMessage({type:m.POPUP.CLOSED,payload:e?{error:e}:null},!1)})),e};n.manifest=function(e){w=(0,p.parse)({manifest:e})};var S=function(){_.removeAllListeners(),u.dispose(),E&&E.close()};n.dispose=S;n.cancel=function(e){E&&E.emit(m.POPUP.CLOSED,e)};var M=function(e){if(e.origin===u.origin){var t=(0,d.parseMessage)(e.data),n=t.event,r=t.type,s=t.payload,o=t.id||0;switch(k.log("handleMessage",t),n){case m.RESPONSE_EVENT:u.messagePromises[o]?(u.messagePromises[o].resolve({id:o,success:t.success,payload:s}),delete u.messagePromises[o]):k.warn("Unknown message id "+o);break;case m.DEVICE_EVENT:case m.TRANSPORT_EVENT:case m.BLOCKCHAIN_EVENT:_.emit(n,t),_.emit(r,s);break;case m.UI_EVENT:if(r===m.IFRAME.BOOTSTRAP){u.clearTimeout();break}r===m.IFRAME.LOADED&&u.initPromise.resolve(),r===m.IFRAME.ERROR&&u.initPromise.reject(s.error),_.emit(n,t),_.emit(r,s);break;default:k.log("Undefined message",n,e)}}},T=function(){var e=(0,i.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),!u.instance){e.next=3;break}throw m.ERRORS.TypedError("Init_AlreadyInitialized");case 3:if(w||(w=(0,p.parse)(t)),w.manifest){e.next=6;break}throw m.ERRORS.TypedError("Init_ManifestMissing");case 6:if(!w.lazyLoad){e.next=9;break}return w.lazyLoad=!1,e.abrupt("return");case 9:return E||(E=C()),k.enabled=!!w.debug,window.addEventListener("message",M),window.addEventListener("unload",S),e.next=15,u.init(w);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.init=T;var O=function(){var e=(0,i.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.instance||u.timeout){e.next=15;break}if((w=(0,p.parse)(w)).manifest){e.next=4;break}return e.abrupt("return",(0,d.errorMessage)(m.ERRORS.TypedError("Init_ManifestMissing")));case 4:return E||(E=C()),E.request(!0),e.prev=6,e.next=9,T(w);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),E&&(["Init_IframeBlocked","Init_IframeTimeout"].includes(e.t0.code)?E.postMessage((0,f.UiMessage)(m.UI.IFRAME_FAILURE)):E.close()),e.abrupt("return",(0,d.errorMessage)(e.t0));case 15:if(!u.timeout){e.next=17;break}return e.abrupt("return",(0,d.errorMessage)(m.ERRORS.TypedError("Init_ManifestMissing")));case 17:if(!u.error){e.next=19;break}return e.abrupt("return",(0,d.errorMessage)(u.error));case 19:return w.popup&&E&&E.request(),e.prev=20,e.next=23,u.postMessage({type:m.IFRAME.CALL,payload:t});case 23:if(!(n=e.sent)){e.next=27;break}return!n.success&&"Device_CallInProgress"!==n.payload.code&&E&&E.unlock(),e.abrupt("return",n);case 27:return E&&E.unlock(),e.abrupt("return",(0,d.errorMessage)(m.ERRORS.TypedError("Method_NoResponse")));case 31:return e.prev=31,e.t1=e.catch(20),k.error("__call error",e.t1),E&&E.close(),e.abrupt("return",(0,d.errorMessage)(e.t1));case 36:case"end":return e.stop()}}),e,null,[[6,11],[20,31]])})));return function(t){return e.apply(this,arguments)}}();n.call=O;var P=function(e){u.postMessage({event:m.UI_EVENT,type:m.UI.CUSTOM_MESSAGE_RESPONSE,payload:e})};n.uiResponse=function(e){var t=e.type,n=e.payload;u.postMessage({event:m.UI_EVENT,type:t,payload:n})};n.renderWebUSBButton=function(e){(0,l.default)(e,w.webusbSrc,u.origin)};n.getSettings=function(){return u.instance?O({method:"getSettings"}):Promise.resolve((0,d.errorMessage)(m.ERRORS.TypedError("Init_NotInitialized")))};var A=function(){var e=(0,i.default)(s.default.mark((function e(t){var n,r,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof t.callback){e.next=2;break}return e.abrupt("return",(0,d.errorMessage)(m.ERRORS.TypedError("Method_CustomMessage_Callback")));case 2:return n=t.callback,r=function(){var e=(0,i.default)(s.default.mark((function e(t){var r,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.data)||r.type!==m.UI.CUSTOM_MESSAGE_REQUEST){e.next=6;break}return e.next=4,n(r.payload);case 4:o=e.sent,P(o||{message:"release"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",r,!1),e.next=7,O(v(v({method:"customMessage"},t),{},{callback:null}));case 7:return o=e.sent,window.removeEventListener("message",r),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.customMessage=A;var R=function(){var e=(0,i.default)(s.default.mark((function e(t){var n,r,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.callback){e.next=9;break}return n=t.callback,r=function(){var e=(0,i.default)(s.default.mark((function e(t){var r,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.data)||r.type!==m.UI.LOGIN_CHALLENGE_REQUEST){e.next=12;break}return e.prev=2,e.next=5,n();case 5:o=e.sent,u.postMessage({event:m.UI_EVENT,type:m.UI.LOGIN_CHALLENGE_RESPONSE,payload:o}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),u.postMessage({event:m.UI_EVENT,type:m.UI.LOGIN_CHALLENGE_RESPONSE,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",r,!1),e.next=6,O(v(v({method:"requestLogin"},t),{},{asyncChallenge:!0,callback:null}));case 6:return o=e.sent,window.removeEventListener("message",r),e.abrupt("return",o);case 9:return e.abrupt("return",O(v({method:"requestLogin"},t)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.requestLogin=R;n.disableWebUSB=function(){u.postMessage({event:m.UI_EVENT,type:m.TRANSPORT.DISABLE_WEBUSB})}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/env/browser/index.js"}],[5955,{"@babel/runtime/helpers/asyncToGenerator":185,"@babel/runtime/helpers/interopRequireDefault":195,"@babel/runtime/regenerator":215,"cross-fetch":2189},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.getOrigin=n.httpRequest=void 0;var s=r(e("@babel/runtime/regenerator")),o=r(e("@babel/runtime/helpers/asyncToGenerator")),i=r(e("cross-fetch")),a=function(){var e=(0,o.default)(s.default.mark((function e(t,n){var r,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="text"),e.next=3,(0,i.default)(t,{credentials:"same-origin"});case 3:if(!(r=e.sent).ok){e.next=13;break}if("json"!==n){e.next=10;break}return e.next=8,r.text();case 8:return o=e.sent,e.abrupt("return",JSON.parse(o));case 10:if("binary"!==n){e.next=12;break}return e.abrupt("return",r.arrayBuffer());case 12:return e.abrupt("return",r.text());case 13:throw new Error("httpRequest error: "+t+" "+r.statusText);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();n.httpRequest=a;n.getOrigin=function(e){if(0===e.indexOf("file://"))return"file://";var t=e.match(/^.+\:\/\/[^\/]+/);return Array.isArray(t)&&t.length>0?t[0]:"unknown"}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/env/browser/networkUtils.js"}],[5956,{"../constants":5948,"../env/browser/networkUtils":5955,"../utils/deferred":5986,"./inline-styles":5957,"@babel/runtime/helpers/asyncToGenerator":185,"@babel/runtime/helpers/interopRequireDefault":195,"@babel/runtime/regenerator":215},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.clearTimeout=n.dispose=n.postMessage=n.init=n.messagePromises=n.error=n.timeout=n.initPromise=n.origin=n.instance=void 0;var s,o,i=r(e("@babel/runtime/regenerator")),a=r(e("@babel/runtime/helpers/asyncToGenerator")),c=e("../utils/deferred"),u=e("../constants"),l=e("../env/browser/networkUtils"),d=r(e("./inline-styles"));n.instance=s,n.origin=o;var f=(0,c.create)();n.initPromise=f;var p,h=0;n.timeout=h,n.error=p;var m=0,g={};n.messagePromises=g;var b=function(){var e=(0,a.default)(i.default.mark((function e(t){var r,a,d,p,m;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.initPromise=f=(0,c.create)(),(r=document.getElementById("trezorconnect"))?n.instance=s=r:(n.instance=s=document.createElement("iframe"),s.frameBorder="0",s.width="0px",s.height="0px",s.style.position="absolute",s.style.display="none",s.style.border="0px",s.style.width="0px",s.style.height="0px",s.id="trezorconnect"),"web"===t.env?(d=t.manifest?JSON.stringify(t.manifest):"undefined",p="version="+t.version+"&manifest="+encodeURIComponent(btoa(JSON.stringify(d))),a=t.iframeSrc+"?"+p):a=t.iframeSrc,s.setAttribute("src",a),t.webusb&&s.setAttribute("allow","usb"),n.origin=o=(0,l.getOrigin)(s.src),n.timeout=h=window.setTimeout((function(){f.reject(u.ERRORS.TypedError("Init_IframeTimeout"))}),1e4),m=function(){if(s){try{var e=s.contentWindow.location.origin;if(!e||"null"===e)return void v()}catch(e){}var n;"undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect&&(chrome.runtime.onConnect.addListener((function(){})),n=chrome.runtime.id),s.contentWindow.postMessage({type:u.IFRAME.INIT,payload:{settings:t,extension:n}},o),s.onload=undefined}else f.reject(u.ERRORS.TypedError("Init_IframeBlocked"))},s.attachEvent?s.attachEvent("onload",m):s.onload=m,document.body&&(document.body.appendChild(s),y()),e.prev=11,e.next=14,f.promise;case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(11),s&&(s.parentNode&&s.parentNode.removeChild(s),n.instance=s=null),e.t0;case 20:return e.prev=20,window.clearTimeout(h),n.timeout=h=0,e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[11,16,20,24]])})));return function(t){return e.apply(this,arguments)}}();n.init=b;var y=function(){if(!s)throw u.ERRORS.TypedError("Init_IframeBlocked");var e=s.ownerDocument,t=e.head||e.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.setAttribute("id","TrezorConnectStylesheet"),n.styleSheet?(n.styleSheet.cssText=d.default,t.appendChild(n)):(n.appendChild(document.createTextNode(d.default)),t.append(n))},v=function(){window.clearTimeout(h),n.error=p=u.ERRORS.TypedError("Init_IframeBlocked"),_(),f.reject(p)};n.postMessage=function(e,t){if(void 0===t&&(t=!0),!s)throw u.ERRORS.TypedError("Init_IframeBlocked");if(t){m++,e.id=m,g[m]=(0,c.create)();var n=g[m].promise;return s.contentWindow.postMessage(e,o),n}return s.contentWindow.postMessage(e,o),null};var _=function(){if(s&&s.parentNode)try{s.parentNode.removeChild(s)}catch(e){}n.instance=s=null,n.timeout=h=0};n.dispose=_;n.clearTimeout=function(){window.clearTimeout(h)}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/iframe/builder.js"}],[5957,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.default=void 0;n.default='.trezorconnect-container{position:fixed!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important;z-index:10000!important;width:100%!important;height:100%!important;top:0!important;left:0!important;background:rgba(0,0,0,.35)!important;overflow:auto!important;padding:20px!important;margin:0!important}.trezorconnect-container .trezorconnect-window{position:relative!important;display:block!important;width:370px!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif!important;margin:auto!important;border-radius:3px!important;background-color:#fff!important;text-align:center!important;overflow:hidden!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head{text-align:left;padding:12px 24px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-logo{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close{cursor:pointer!important;height:24px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close svg{fill:#757575;-webkit-transition:fill .3s ease-in-out!important;transition:fill .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close:hover svg{fill:#494949}.trezorconnect-container .trezorconnect-window .trezorconnect-body{padding:24px 24px 32px!important;background:#FBFBFB!important;border-top:1px solid #EBEBEB}.trezorconnect-container .trezorconnect-window .trezorconnect-body h3{color:#505050!important;font-size:16px!important;font-weight:500!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body p{margin:8px 0 24px!important;font-weight:400!important;color:#A9A9A9!important;font-size:12px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button{width:100%!important;padding:12px 24px!important;margin:0!important;border-radius:3px!important;font-size:14px!important;font-weight:300!important;cursor:pointer!important;background:#01B757!important;color:#fff!important;border:0!important;-webkit-transition:background-color .3s ease-in-out!important;transition:background-color .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:hover{background-color:#00AB51!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:active{background-color:#009546!important}/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0IiwiJHN0ZGluIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLHlCQUNJLFNBQUEsZ0JBQ0EsUUFBQSxzQkFDQSxRQUFBLHVCQUNBLFFBQUEsc0JBRUEsUUFBQSxlQUNBLG1CQUFBLG1CQUNBLHNCQUFBLGlCQUNBLHVCQUFBLGlCQUNBLG1CQUFBLGlCQUNBLGVBQUEsaUJBRUEsa0JBQUEsaUJBQ0Esb0JBQUEsaUJBQ0EsZUFBQSxpQkNmTSxZQUFhLGlCREFyQixRQUFTLGdCQWtCSCxNQUFBLGVBQ0EsT0FBQSxlQUNBLElBQUEsWUFDQSxLQUFBLFlBQ0EsV0FBQSwwQkFDQSxTQUFBLGVBQ0EsUUFBQSxlQUNBLE9BQUEsWUNkUiwrQ0RYRSxTQUFVLG1CQTZCQSxRQUFBLGdCQUNBLE1BQUEsZ0JBQ0EsWUFBQSxjQUFBLG1CQUFBLFdBQUEsT0FBQSxpQkFBQSxNQUFBLHFCQUNBLE9BQUEsZUNmVixjQUFlLGNEakJmLGlCQWlCRSxlQWtCWSxXQUFBLGlCQ2ZkLFNBQVUsaUJEbUJJLG1FQUNBLFdBQUEsS0NoQmQsUUFBUyxLQUFLLGVEeEJkLFFBQVMsc0JBMENTLFFBQUEsdUJBQ0EsUUFBQSxzQkNmbEIsUUFBUyxlRGlCSyxrQkE1QlosaUJBOEJvQixvQkFBQSxpQkNoQmxCLGVBQWdCLGlCRC9CWixZQWlCTixpQkFzQ1EsdUZBQ0EsaUJBQUEsRUNwQlYsYUFBYyxFRHBDVixTQUFVLEVBMkRBLEtBQUEsRUFFQSx3RkNwQmQsT0FBUSxrQkR6Q1IsT0FBUSxlQWlFTSw0RkFDQSxLQUFBLFFBQ0EsbUJBQUEsS0FBQSxJQUFBLHNCQ3BCZCxXQUFZLEtBQUssSUFBSyxzQkR3QlIsa0dBQ0EsS0FBQSxRQUVBLG1FQUNBLFFBQUEsS0FBQSxLQUFBLGVBQ0EsV0FBQSxrQkFDQSxXQUFBLElBQUEsTUFBQSxRQUVBLHNFQUNBLE1BQUEsa0JBQ0EsVUFBQSxlQ3JCZCxZQUFhLGNEd0JLLHFFQ3JCbEIsT0FBUSxJQUFJLEVBQUksZUR3QkYsWUFBQSxjQUNJLE1BQUEsa0JDdEJsQixVQUFXLGVBRWIsMEVBQ0UsTUFBTyxlQUNQLFFBQVMsS0FBSyxlQUNkLE9BQVEsWUFDUixjQUFlLGNBQ2YsVUFBVyxlQUNYLFlBQWEsY0FDYixPQUFRLGtCQUNSLFdBQVksa0JBQ1osTUFBTyxlQUNQLE9BQVEsWUFDUixtQkFBb0IsaUJBQWlCLElBQUssc0JBQzFDLFdBQVksaUJBQWlCLElBQUssc0JBRXBDLGdGQUNFLGlCQUFrQixrQkFFcEIsaUZBQ0UsaUJBQWtCIn0= */'}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/iframe/inline-styles.js"}],[5958,{"./constants":5948,"./env/node":5954,"./types":5969,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0;var s={};n.default=void 0;var o=r(e("@babel/runtime/helpers/defineProperty")),i=e("./constants");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(s,e)||e in n&&n[e]===i[e]||(n[e]=i[e]))}));var a=e("./env/node"),c=e("./types");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(s,e)||e in n&&n[e]===c[e]||(n[e]=c[e]))}));var d={manifest:a.manifest,init:a.init,getSettings:a.getSettings,on:function(e,t){a.eventEmitter.on(e,t)},off:function(e,t){a.eventEmitter.removeListener(e,t)},removeAllListeners:function(){a.eventEmitter.removeAllListeners()},uiResponse:a.uiResponse,blockchainGetAccountBalanceHistory:function(e){return(0,a.call)(l({method:"blockchainGetAccountBalanceHistory"},e))},blockchainGetCurrentFiatRates:function(e){return(0,a.call)(l({method:"blockchainGetCurrentFiatRates"},e))},blockchainGetFiatRatesForTimestamps:function(e){return(0,a.call)(l({method:"blockchainGetFiatRatesForTimestamps"},e))},blockchainDisconnect:function(e){return(0,a.call)(l({method:"blockchainDisconnect"},e))},blockchainEstimateFee:function(e){return(0,a.call)(l({method:"blockchainEstimateFee"},e))},blockchainGetTransactions:function(e){return(0,a.call)(l({method:"blockchainGetTransactions"},e))},blockchainSetCustomBackend:function(e){return(0,a.call)(l({method:"blockchainSetCustomBackend"},e))},blockchainSubscribe:function(e){return(0,a.call)(l({method:"blockchainSubscribe"},e))},blockchainSubscribeFiatRates:function(e){return(0,a.call)(l({method:"blockchainSubscribeFiatRates"},e))},blockchainUnsubscribe:function(e){return(0,a.call)(l({method:"blockchainUnsubscribe"},e))},blockchainUnsubscribeFiatRates:function(e){return(0,a.call)(l({method:"blockchainUnsubscribeFiatRates"},e))},customMessage:function(e){return(0,a.customMessage)(e)},requestLogin:function(e){return(0,a.requestLogin)(e)},cardanoGetAddress:function(e){var t=a.eventEmitter.listenerCount(i.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"cardanoGetAddress"},e),{},{useEventListener:t}))},cardanoGetNativeScriptHash:function(e){return(0,a.call)(l({method:"cardanoGetNativeScriptHash"},e))},cardanoGetPublicKey:function(e){return(0,a.call)(l({method:"cardanoGetPublicKey"},e))},cardanoSignTransaction:function(e){return(0,a.call)(l({method:"cardanoSignTransaction"},e))},cipherKeyValue:function(e){return(0,a.call)(l({method:"cipherKeyValue"},e))},composeTransaction:function(e){return(0,a.call)(l({method:"composeTransaction"},e))},ethereumGetAddress:function(e){var t=a.eventEmitter.listenerCount(i.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"ethereumGetAddress"},e),{},{useEventListener:t}))},ethereumGetPublicKey:function(e){return(0,a.call)(l({method:"ethereumGetPublicKey"},e))},ethereumSignMessage:function(e){return(0,a.call)(l({method:"ethereumSignMessage"},e))},ethereumSignTransaction:function(e){return(0,a.call)(l({method:"ethereumSignTransaction"},e))},ethereumSignTypedData:function(e){return(0,a.call)(l({method:"ethereumSignTypedData"},e))},ethereumVerifyMessage:function(e){return(0,a.call)(l({method:"ethereumVerifyMessage"},e))},getAccountInfo:function(e){return(0,a.call)(l({method:"getAccountInfo"},e))},getAddress:function(e){var t=a.eventEmitter.listenerCount(i.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"getAddress"},e),{},{useEventListener:t}))},getDeviceState:function(e){return(0,a.call)(l({method:"getDeviceState"},e))},getFeatures:function(e){return(0,a.call)(l({method:"getFeatures"},e))},getPublicKey:function(e){return(0,a.call)(l({method:"getPublicKey"},e))},liskGetAddress:function(){return(0,a.call)({method:"liskDeprecated"})},liskGetPublicKey:function(){return(0,a.call)({method:"liskDeprecated"})},liskSignMessage:function(){return(0,a.call)({method:"liskDeprecated"})},liskSignTransaction:function(){return(0,a.call)({method:"liskDeprecated"})},liskVerifyMessage:function(){return(0,a.call)({method:"liskDeprecated"})},nemGetAddress:function(e){var t=a.eventEmitter.listenerCount(i.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"nemGetAddress"},e),{},{useEventListener:t}))},nemSignTransaction:function(e){return(0,a.call)(l({method:"nemSignTransaction"},e))},pushTransaction:function(e){return(0,a.call)(l({method:"pushTransaction"},e))},rippleGetAddress:function(e){var t=a.eventEmitter.listenerCount(i.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"rippleGetAddress"},e),{},{useEventListener:t}))},rippleSignTransaction:function(e){return(0,a.call)(l({method:"rippleSignTransaction"},e))},signMessage:function(e){return(0,a.call)(l({method:"signMessage"},e))},signTransaction:function(e){return(0,a.call)(l({method:"signTransaction"},e))},stellarGetAddress:function(e){var t=a.eventEmitter.listenerCount(i.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"stellarGetAddress"},e),{},{useEventListener:t}))},stellarSignTransaction:function(e){return(0,a.call)(l({method:"stellarSignTransaction"},e))},tezosGetAddress:function(e){var t=a.eventEmitter.listenerCount(i.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"tezosGetAddress"},e),{},{useEventListener:t}))},tezosGetPublicKey:function(e){return(0,a.call)(l({method:"tezosGetPublicKey"},e))},tezosSignTransaction:function(e){return(0,a.call)(l({method:"tezosSignTransaction"},e))},eosGetPublicKey:function(e){return(0,a.call)(l({method:"eosGetPublicKey"},e))},eosSignTransaction:function(e){return(0,a.call)(l({method:"eosSignTransaction"},e))},binanceGetAddress:function(e){var t=a.eventEmitter.listenerCount(i.UI.ADDRESS_VALIDATION)>0;return(0,a.call)(l(l({method:"binanceGetAddress"},e),{},{useEventListener:t}))},binanceGetPublicKey:function(e){return(0,a.call)(l({method:"binanceGetPublicKey"},e))},binanceSignTransaction:function(e){return(0,a.call)(l({method:"binanceSignTransaction"},e))},verifyMessage:function(e){return(0,a.call)(l({method:"verifyMessage"},e))},resetDevice:function(e){return(0,a.call)(l({method:"resetDevice"},e))},wipeDevice:function(e){return(0,a.call)(l({method:"wipeDevice"},e))},applyFlags:function(e){return(0,a.call)(l({method:"applyFlags"},e))},applySettings:function(e){return(0,a.call)(l({method:"applySettings"},e))},backupDevice:function(e){return(0,a.call)(l({method:"backupDevice"},e))},changePin:function(e){return(0,a.call)(l({method:"changePin"},e))},firmwareUpdate:function(e){return(0,a.call)(l({method:"firmwareUpdate"},e))},recoveryDevice:function(e){return(0,a.call)(l({method:"recoveryDevice"},e))},getCoinInfo:function(e){return(0,a.call)(l({method:"getCoinInfo"},e))},rebootToBootloader:function(e){return(0,a.call)(l({method:"rebootToBootloader"},e))},dispose:a.dispose,cancel:a.cancel,renderWebUSBButton:a.renderWebUSBButton,disableWebUSB:a.disableWebUSB};n.default=d}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/index.js"}],[5959,{"../constants":5948,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.BlockchainMessage=n.ResponseMessage=n.TransportMessage=n.DeviceMessage=n.UiMessage=void 0;var s=r(e("@babel/runtime/helpers/defineProperty")),o=e("../constants");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.UiMessage=function(e,t){return{event:o.UI_EVENT,type:e,payload:t}};n.DeviceMessage=function(e,t){return{event:o.DEVICE_EVENT,type:e,payload:t}};n.TransportMessage=function(e,t){return{event:o.TRANSPORT_EVENT,type:e,payload:t.error?a(a({},t),{},{error:t.error.message,code:t.error.code}):t}};n.ResponseMessage=function(e,t,n){return void 0===n&&(n=null),{event:o.RESPONSE_EVENT,type:o.RESPONSE_EVENT,id:e,success:t,payload:t?n:{error:n.error.message,code:n.error.code}}};n.BlockchainMessage=function(e,t){return{event:o.BLOCKCHAIN_EVENT,type:e,payload:t}}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/message/builder.js"}],[5960,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.errorMessage=n.parseMessage=void 0;n.parseMessage=function(e){var t={event:e.event,type:e.type,payload:e.payload};return"number"==typeof e.id&&(t.id=e.id),"boolean"==typeof e.success&&(t.success=e.success),t};n.errorMessage=function(e){return{success:!1,payload:{error:e.message,code:e.code}}}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/message/index.js"}],[5961,{"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,"@metamask/eth-sig-util":1111},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/defineProperty"));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var o=e("@metamask/eth-sig-util");function i(e){switch(Object.prototype.toString.call(e)){case"[object Object]":var t=Object.keys(e).map((function(t){return[t,i(e[t])]}));return Object.fromEntries(t);case"[object Array]":return e.map((function(e){return i(e)}));case"[object BigInt]":return e.toString();default:return e}}t.exports=function(e,t){if(!t)throw new Error("Trezor: Only version 4 of typed data signing is supported");var n=o.SignTypedDataVersion.V4,a=o.TypedDataUtils.sanitizeData(e),c=a.types,u=a.primaryType,l=a.domain,d=a.message;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({domain_separator_hash:o.TypedDataUtils.hashStruct("EIP712Domain",i(l),c,n).toString("hex"),message_hash:o.TypedDataUtils.hashStruct(u,i(d),c,n).toString("hex")},e)}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/plugins/ethereum/typedData.js"}],[5962,{"../constants/iframe":5947,"../constants/popup":5950,"../constants/ui":5952,"../env/browser/networkUtils":5955,"../utils/deferred":5986,"./showPopupRequest":5963,"@babel/runtime/helpers/assertThisInitialized":184,"@babel/runtime/helpers/asyncToGenerator":185,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/inheritsLoose":194,"@babel/runtime/helpers/interopRequireDefault":195,"@babel/runtime/regenerator":215,events:2082},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.default=void 0;var s=r(e("@babel/runtime/regenerator")),o=r(e("@babel/runtime/helpers/asyncToGenerator")),i=r(e("@babel/runtime/helpers/assertThisInitialized")),a=r(e("@babel/runtime/helpers/inheritsLoose")),c=r(e("@babel/runtime/helpers/defineProperty")),u=r(e("events")),l=b(e("../constants/popup")),d=b(e("../constants/iframe")),f=b(e("../constants/ui")),p=e("./showPopupRequest"),h=e("../env/browser/networkUtils"),m=e("../utils/deferred");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}var y=function(e){function t(t){var n;return n=e.call(this)||this,(0,c.default)((0,i.default)(n),"requestTimeout",0),(0,c.default)((0,i.default)(n),"closeInterval",0),(0,c.default)((0,i.default)(n),"extensionTabId",0),n.settings=t,n.origin=(0,h.getOrigin)(t.popupSrc),n.handleMessage=n.handleMessage.bind((0,i.default)(n)),n.iframeHandshake=(0,m.create)(d.LOADED),"webextension"===n.settings.env&&(n.handleExtensionConnect=n.handleExtensionConnect.bind((0,i.default)(n)),n.handleExtensionMessage=n.handleExtensionMessage.bind((0,i.default)(n)),chrome.runtime.onConnect.addListener(n.handleExtensionConnect)),window.addEventListener("message",n.handleMessage,!1),n}(0,a.default)(t,e);var n=t.prototype;return n.request=function(e){var t=this;if(void 0===e&&(e=!1),this.locked)this._window&&("webextension"===this.settings.env?chrome.tabs.update(this._window.id,{active:!0}):this._window.focus());else{var n=this.open.bind(this);if(this.locked=!0,this.settings.supportedBrowser){var r=e||"webextension"===this.settings.env?1:850;this.requestTimeout=window.setTimeout((function(){t.requestTimeout=0,n(e)}),r)}else n()}},n.cancel=function(){this.close()},n.unlock=function(){this.locked=!1},n.open=function(e){var t=this,n=this.settings.popupSrc;this.settings.supportedBrowser?(this.popupPromise=(0,m.create)(l.LOADED),this.openWrapper(e?n+"#loading":n),this.closeInterval=window.setInterval((function(){t._window&&("webextension"===t.settings.env?chrome.tabs.get(t._window.id,(function(e){e||(t.close(),t.emit(l.CLOSED))})):t._window.closed&&(t.close(),t.emit(l.CLOSED)))}),500),this.openTimeout=window.setTimeout((function(){t.close(),(0,p.showPopupRequest)(t.open.bind(t),(function(){t.emit(l.CLOSED)}))}),3e3)):this.openWrapper(n+"#unsupported")},n.openWrapper=function(e){var t=this;"webextension"===this.settings.env?chrome.windows.getCurrent(null,(function(n){"normal"!==n.type?chrome.windows.create({url:e},(function(e){chrome.tabs.query({windowId:e.id,active:!0},(function(e){t._window=e[0]}))})):chrome.tabs.query({currentWindow:!0,active:!0},(function(n){t.extensionTabId=n[0].id,chrome.tabs.create({url:e,index:n[0].index+1},(function(e){t._window=e}))}))})):"electron"===this.settings.env?this._window=window.open(e,"modal"):(this._window=window.open("","_blank"),this._window&&(this._window.location.href=e))},n.handleExtensionConnect=function(e){"trezor-connect"===e.name&&(!this._window||this._window&&this._window.id!==e.sender.tab.id?e.disconnect():(window.clearTimeout(this.openTimeout),this.extensionPort=e,this.extensionPort.onMessage.addListener(this.handleExtensionMessage)))},n.handleExtensionMessage=function(e){var t=this;if(this.extensionPort){var n=this.extensionPort,r=e.data;if(r&&"object"==typeof r)if(r.type===l.ERROR){var s=r.payload&&"string"==typeof r.payload.error?r.payload.error:null;this.emit(l.CLOSED,s?"Popup error: "+s:null),this.close()}else r.type===l.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){n.postMessage({type:l.INIT,payload:{settings:t.settings,useBroadcastChannel:e}})}))):r.type===l.EXTENSION_USB_PERMISSIONS?chrome.tabs.query({currentWindow:!0,active:!0},(function(e){chrome.tabs.create({url:"trezor-usb-permissions.html",index:e[0].index+1},(function(e){}))})):r.type===l.CLOSE_WINDOW&&(this.emit(l.CLOSED),this.close())}},n.handleMessage=function(e){var t=this,n=e.data;if((0,h.getOrigin)(e.origin)===this.origin&&n&&"object"==typeof n)if(n.type===d.LOADED){var r=!(!n.payload||"boolean"!=typeof n.payload.useBroadcastChannel)&&n.payload.useBroadcastChannel;this.iframeHandshake.resolve(r)}else if(n.type===l.BOOTSTRAP)window.clearTimeout(this.openTimeout);else if(n.type===l.ERROR&&this._window){var s=n.payload&&"string"==typeof n.payload.error?n.payload.error:null;this.emit(l.CLOSED,s?"Popup error: "+s:null),this.close()}else n.type===l.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){t._window.postMessage({type:l.INIT,payload:{settings:t.settings,useBroadcastChannel:e}},t.origin)}))):n.type!==l.CANCEL_POPUP_REQUEST&&n.type!==f.CLOSE_UI_WINDOW||this.close()},n.close=function(){if(this.locked=!1,this.popupPromise=undefined,this.requestTimeout&&(window.clearTimeout(this.requestTimeout),this.requestTimeout=0),this.openTimeout&&(window.clearTimeout(this.openTimeout),this.openTimeout=0),this.closeInterval&&(window.clearInterval(this.closeInterval),this.closeInterval=0),this.extensionPort&&(this.extensionPort.disconnect(),this.extensionPort=null),this.extensionTabId&&(chrome.tabs.update(this.extensionTabId,{active:!0}),this.extensionTabId=0),this._window){if("webextension"===this.settings.env){chrome.runtime.lastError;chrome.tabs.remove(this._window.id,(function(){chrome.runtime.lastError}))}else this._window.close();this._window=null}},n.postMessage=function(){var e=(0,o.default)(s.default.mark((function e(t){var n=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._window||t.type===f.REQUEST_UI_WINDOW||!this.openTimeout){e.next=4;break}return this.close(),(0,p.showPopupRequest)(this.open.bind(this),(function(){n.emit(l.CLOSED)})),e.abrupt("return");case 4:if(!this.popupPromise){e.next=7;break}return e.next=7,this.popupPromise.promise;case 7:this._window&&this._window.postMessage(t,this.origin);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(u.default);n.default=y}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/popup/PopupManager.js"}],[5963,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.showPopupRequest=void 0;var r="TrezorConnectInteractionLayer",s='\n    <div class="trezorconnect-container" id="'+r+'">\n        <div class="trezorconnect-window">\n            <div class="trezorconnect-head">\n                <svg class="trezorconnect-logo" x="0px" y="0px" viewBox="0 0 163.7 41.9" width="78px" height="20px" preserveAspectRatio="xMinYMin meet">\n                    <polygon points="101.1,12.8 118.2,12.8 118.2,17.3 108.9,29.9 118.2,29.9 118.2,35.2 101.1,35.2 101.1,30.7 110.4,18.1 101.1,18.1"/>\n                    <path d="M158.8,26.9c2.1-0.8,4.3-2.9,4.3-6.6c0-4.5-3.1-7.4-7.7-7.4h-10.5v22.3h5.8v-7.5h2.2l4.1,7.5h6.7L158.8,26.9z M154.7,22.5 h-4V18h4c1.5,0,2.5,0.9,2.5,2.2C157.2,21.6,156.2,22.5,154.7,22.5z"/>\n                    <path d="M130.8,12.5c-6.8,0-11.6,4.9-11.6,11.5s4.9,11.5,11.6,11.5s11.7-4.9,11.7-11.5S137.6,12.5,130.8,12.5z M130.8,30.3 c-3.4,0-5.7-2.6-5.7-6.3c0-3.8,2.3-6.3,5.7-6.3c3.4,0,5.8,2.6,5.8,6.3C136.6,27.7,134.2,30.3,130.8,30.3z"/>\n                    <polygon points="82.1,12.8 98.3,12.8 98.3,18 87.9,18 87.9,21.3 98,21.3 98,26.4 87.9,26.4 87.9,30 98.3,30 98.3,35.2 82.1,35.2 "/>\n                    <path d="M24.6,9.7C24.6,4.4,20,0,14.4,0S4.2,4.4,4.2,9.7v3.1H0v22.3h0l14.4,6.7l14.4-6.7h0V12.9h-4.2V9.7z M9.4,9.7 c0-2.5,2.2-4.5,5-4.5s5,2,5,4.5v3.1H9.4V9.7z M23,31.5l-8.6,4l-8.6-4V18.1H23V31.5z"/>\n                    <path d="M79.4,20.3c0-4.5-3.1-7.4-7.7-7.4H61.2v22.3H67v-7.5h2.2l4.1,7.5H80l-4.9-8.3C77.2,26.1,79.4,24,79.4,20.3z M71,22.5h-4V18 h4c1.5,0,2.5,0.9,2.5,2.2C73.5,21.6,72.5,22.5,71,22.5z"/>\n                    <polygon points="40.5,12.8 58.6,12.8 58.6,18.1 52.4,18.1 52.4,35.2 46.6,35.2 46.6,18.1 40.5,18.1 "/>\n                </svg>\n                <div class="trezorconnect-close">\n                    <svg x="0px" y="0px" viewBox="24 24 60 60" width="24px" height="24px" preserveAspectRatio="xMinYMin meet">\n                        <polygon class="st0" points="40,67.9 42.1,70 55,57.1 67.9,70 70,67.9 57.1,55 70,42.1 67.9,40 55,52.9 42.1,40 40,42.1 52.9,55 "/>\n                    </svg>\n                </div>\n            </div>\n            <div class="trezorconnect-body">\n                <h3>Popup was blocked</h3>\n                <p>Please click to “Continue” to open popup manually</p>\n                <button class="trezorconnect-open">Continue</button>\n            </div>\n        </div>\n    </div>\n';n.showPopupRequest=function(e,t){if(!document.getElementById(r)){var n=document.createElement("div");n.id=r,n.className="trezorconnect-container",n.innerHTML=s,document.body&&document.body.appendChild(n),n.getElementsByClassName("trezorconnect-open")[0].onclick=function(){e(),document.body&&document.body.removeChild(n)},n.getElementsByClassName("trezorconnect-close")[0].onclick=function(){t(),document.body&&document.body.removeChild(n)}}}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/popup/showPopupRequest.js"}],[5964,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/account.js"}],[5965,{"../constants":5948,"./account":5964,"./backend/blockchain":5966,"./events":5968,"./misc":5970,"./networks/binance":5971,"./networks/bitcoin":5972,"./networks/cardano":5973,"./networks/coinInfo":5974,"./networks/eos":5975,"./networks/ethereum":5976,"./networks/nem":5977,"./networks/ripple":5978,"./networks/stellar":5979,"./networks/tezos":5980,"./params":5981,"./trezor/device":5982,"./trezor/management":5983,"./trezor/protobuf":5984},function(){with(this)return function(){"use strict";return function(e,t,n){s(e("../constants")),s(e("./params")),s(e("./trezor/device")),s(e("./trezor/management")),s(e("./trezor/protobuf")),s(e("./account")),s(e("./networks/bitcoin")),s(e("./networks/binance")),s(e("./networks/cardano")),s(e("./networks/coinInfo")),s(e("./networks/eos")),s(e("./networks/ethereum")),s(e("./networks/nem")),s(e("./networks/ripple")),s(e("./networks/stellar")),s(e("./networks/tezos")),s(e("./misc")),s(e("./events")),s(e("./backend/blockchain"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(s,i,a):s[i]=e[i]}return s.default=e,n&&n.set(e,s),s}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/api.js"}],[5966,{"../../constants":5948},function(){with(this)return function(){"use strict";return function(e,t,n){e("../../constants")}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/backend/blockchain.js"}],[5967,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/backend/transactions.js"}],[5968,{"../constants":5948},function(){with(this)return function(){"use strict";return function(e,t,n){e("../constants")}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/events.js"}],[5969,{"./account":5964,"./api":5965,"./backend/blockchain":5966,"./backend/transactions":5967,"./events":5968,"./misc":5970,"./networks/binance":5971,"./networks/bitcoin":5972,"./networks/cardano":5973,"./networks/coinInfo":5974,"./networks/eos":5975,"./networks/ethereum":5976,"./networks/nem":5977,"./networks/ripple":5978,"./networks/stellar":5979,"./networks/tezos":5980,"./params":5981,"./trezor/device":5982,"./trezor/management":5983},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0;var r=e("./api");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||(n[e]=r[e]))}));var s=e("./events");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||(n[e]=s[e]))}));var o=e("./misc");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||(n[e]=o[e]))}));var i=e("./params");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||(n[e]=i[e]))}));var a=e("./account");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||(n[e]=a[e]))}));var c=e("./trezor/device");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||(n[e]=c[e]))}));var u=e("./trezor/management");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||(n[e]=u[e]))}));var l=e("./networks/bitcoin");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===l[e]||(n[e]=l[e]))}));var d=e("./networks/binance");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===d[e]||(n[e]=d[e]))}));var f=e("./networks/cardano");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===f[e]||(n[e]=f[e]))}));var p=e("./networks/coinInfo");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===p[e]||(n[e]=p[e]))}));var h=e("./networks/eos");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===h[e]||(n[e]=h[e]))}));var m=e("./networks/ethereum");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===m[e]||(n[e]=m[e]))}));var g=e("./networks/nem");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===g[e]||(n[e]=g[e]))}));var b=e("./networks/ripple");Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===b[e]||(n[e]=b[e]))}));var y=e("./networks/stellar");Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===y[e]||(n[e]=y[e]))}));var v=e("./networks/tezos");Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===v[e]||(n[e]=v[e]))}));var _=e("./backend/blockchain");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===_[e]||(n[e]=_[e]))}));var w=e("./backend/transactions");Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===w[e]||(n[e]=w[e]))}))}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/index.js"}],[5970,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/misc.js"}],[5971,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/networks/binance.js"}],[5972,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/networks/bitcoin.js"}],[5973,{"../trezor/protobuf":5984},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.CardanoTxWitnessType=n.CardanoTxSigningMode=n.CardanoPoolRelayType=n.CardanoNativeScriptHashDisplayFormat=n.CardanoNativeScriptType=n.CardanoCertificateType=n.CardanoAddressType=void 0;var r=e("../trezor/protobuf");n.CardanoAddressType=r.Enum_CardanoAddressType,n.CardanoCertificateType=r.Enum_CardanoCertificateType,n.CardanoNativeScriptType=r.Enum_CardanoNativeScriptType,n.CardanoNativeScriptHashDisplayFormat=r.Enum_CardanoNativeScriptHashDisplayFormat,n.CardanoPoolRelayType=r.Enum_CardanoPoolRelayType,n.CardanoTxSigningMode=r.Enum_CardanoTxSigningMode,n.CardanoTxWitnessType=r.Enum_CardanoTxWitnessType}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/networks/cardano.js"}],[5974,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/networks/coinInfo.js"}],[5975,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/networks/eos.js"}],[5976,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/networks/ethereum.js"}],[5977,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/networks/nem.js"}],[5978,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/networks/ripple.js"}],[5979,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/networks/stellar.js"}],[5980,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/networks/tezos.js"}],[5981,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/params.js"}],[5982,{"../../constants":5948},function(){with(this)return function(){"use strict";return function(e,t,n){e("../../constants")}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/trezor/device.js"}],[5983,{},function(){with(this)return function(){"use strict";return function(e,t,n){}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/trezor/management.js"}],[5984,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.Enum_TezosBallotType=n.Enum_TezosContractType=n.Enum_StellarSignerType=n.Enum_StellarMemoType=n.Enum_StellarAssetType=n.Enum_NEMImportanceTransferMode=n.Enum_NEMModificationType=n.Enum_NEMSupplyChangeType=n.Enum_NEMMosaicLevy=n.Enum_WordRequestType=n.Enum_RecoveryDeviceType=n.Enum_SdProtectOperationType=n.Enum_Capability=n.Enum_SafetyCheckLevel=n.Enum_BackupType=n.Enum_EthereumDataType=n.Enum_PinMatrixRequestType=n.Enum_ButtonRequestType=n.Enum_FailureType=n.Enum_CardanoTxWitnessType=n.Enum_CardanoTxSigningMode=n.Enum_CardanoTxAuxiliaryDataSupplementType=n.Enum_CardanoPoolRelayType=n.Enum_CardanoCertificateType=n.Enum_CardanoNativeScriptHashDisplayFormat=n.Enum_CardanoNativeScriptType=n.Enum_CardanoAddressType=n.Enum_CardanoDerivationType=n.Enum_RequestType=n.Enum_AmountUnit=n.Enum_DecredStakingSpendType=n.Enum_OutputScriptType=n.Enum_InputScriptType=n.Enum_BinanceTimeInForce=n.Enum_BinanceOrderSide=n.Enum_BinanceOrderType=void 0;var r=Object.freeze({OT_UNKNOWN:0,MARKET:1,LIMIT:2,OT_RESERVED:3});n.Enum_BinanceOrderType=r;var s=Object.freeze({SIDE_UNKNOWN:0,BUY:1,SELL:2});n.Enum_BinanceOrderSide=s;var o=Object.freeze({TIF_UNKNOWN:0,GTE:1,TIF_RESERVED:2,IOC:3});n.Enum_BinanceTimeInForce=o;var i=Object.freeze({SPENDADDRESS:0,SPENDMULTISIG:1,EXTERNAL:2,SPENDWITNESS:3,SPENDP2SHWITNESS:4,SPENDTAPROOT:5});n.Enum_InputScriptType=i;var a=Object.freeze({PAYTOADDRESS:0,PAYTOSCRIPTHASH:1,PAYTOMULTISIG:2,PAYTOOPRETURN:3,PAYTOWITNESS:4,PAYTOP2SHWITNESS:5,PAYTOTAPROOT:6});n.Enum_OutputScriptType=a;var c=Object.freeze({SSGen:0,SSRTX:1});n.Enum_DecredStakingSpendType=c;var u=Object.freeze({BITCOIN:0,MILLIBITCOIN:1,MICROBITCOIN:2,SATOSHI:3});n.Enum_AmountUnit=u;var l=Object.freeze({TXINPUT:0,TXOUTPUT:1,TXMETA:2,TXFINISHED:3,TXEXTRADATA:4,TXORIGINPUT:5,TXORIGOUTPUT:6});n.Enum_RequestType=l;var d=Object.freeze({LEDGER:0,ICARUS:1,ICARUS_TREZOR:2});n.Enum_CardanoDerivationType=d;var f=Object.freeze({BASE:0,BASE_SCRIPT_KEY:1,BASE_KEY_SCRIPT:2,BASE_SCRIPT_SCRIPT:3,POINTER:4,POINTER_SCRIPT:5,ENTERPRISE:6,ENTERPRISE_SCRIPT:7,BYRON:8,REWARD:14,REWARD_SCRIPT:15});n.Enum_CardanoAddressType=f;var p=Object.freeze({PUB_KEY:0,ALL:1,ANY:2,N_OF_K:3,INVALID_BEFORE:4,INVALID_HEREAFTER:5});n.Enum_CardanoNativeScriptType=p;var h=Object.freeze({HIDE:0,BECH32:1,POLICY_ID:2});n.Enum_CardanoNativeScriptHashDisplayFormat=h;var m=Object.freeze({STAKE_REGISTRATION:0,STAKE_DEREGISTRATION:1,STAKE_DELEGATION:2,STAKE_POOL_REGISTRATION:3});n.Enum_CardanoCertificateType=m;var g=Object.freeze({SINGLE_HOST_IP:0,SINGLE_HOST_NAME:1,MULTIPLE_HOST_NAME:2});n.Enum_CardanoPoolRelayType=g;var b=Object.freeze({NONE:0,CATALYST_REGISTRATION_SIGNATURE:1});n.Enum_CardanoTxAuxiliaryDataSupplementType=b;var y=Object.freeze({ORDINARY_TRANSACTION:0,POOL_REGISTRATION_AS_OWNER:1,MULTISIG_TRANSACTION:2});n.Enum_CardanoTxSigningMode=y;var v=Object.freeze({BYRON_WITNESS:0,SHELLEY_WITNESS:1});n.Enum_CardanoTxWitnessType=v;var _=Object.freeze({Failure_UnexpectedMessage:1,Failure_ButtonExpected:2,Failure_DataError:3,Failure_ActionCancelled:4,Failure_PinExpected:5,Failure_PinCancelled:6,Failure_PinInvalid:7,Failure_InvalidSignature:8,Failure_ProcessError:9,Failure_NotEnoughFunds:10,Failure_NotInitialized:11,Failure_PinMismatch:12,Failure_WipeCodeMismatch:13,Failure_InvalidSession:14,Failure_FirmwareError:99});n.Enum_FailureType=_;var w=Object.freeze({ButtonRequest_Other:1,ButtonRequest_FeeOverThreshold:2,ButtonRequest_ConfirmOutput:3,ButtonRequest_ResetDevice:4,ButtonRequest_ConfirmWord:5,ButtonRequest_WipeDevice:6,ButtonRequest_ProtectCall:7,ButtonRequest_SignTx:8,ButtonRequest_FirmwareCheck:9,ButtonRequest_Address:10,ButtonRequest_PublicKey:11,ButtonRequest_MnemonicWordCount:12,ButtonRequest_MnemonicInput:13,_Deprecated_ButtonRequest_PassphraseType:14,ButtonRequest_UnknownDerivationPath:15,ButtonRequest_RecoveryHomepage:16,ButtonRequest_Success:17,ButtonRequest_Warning:18,ButtonRequest_PassphraseEntry:19,ButtonRequest_PinEntry:20});n.Enum_ButtonRequestType=w;var E=Object.freeze({PinMatrixRequestType_Current:1,PinMatrixRequestType_NewFirst:2,PinMatrixRequestType_NewSecond:3,PinMatrixRequestType_WipeCodeFirst:4,PinMatrixRequestType_WipeCodeSecond:5});n.Enum_PinMatrixRequestType=E;var k=Object.freeze({UINT:1,INT:2,BYTES:3,STRING:4,BOOL:5,ADDRESS:6,ARRAY:7,STRUCT:8});n.Enum_EthereumDataType=k;var C=Object.freeze({Bip39:0,Slip39_Basic:1,Slip39_Advanced:2});n.Enum_BackupType=C;var S=Object.freeze({Strict:0,PromptAlways:1,PromptTemporarily:2});n.Enum_SafetyCheckLevel=S;var M=Object.freeze({Capability_Bitcoin:1,Capability_Bitcoin_like:2,Capability_Binance:3,Capability_Cardano:4,Capability_Crypto:5,Capability_EOS:6,Capability_Ethereum:7,Capability_Lisk:8,Capability_Monero:9,Capability_NEM:10,Capability_Ripple:11,Capability_Stellar:12,Capability_Tezos:13,Capability_U2F:14,Capability_Shamir:15,Capability_ShamirGroups:16,Capability_PassphraseEntry:17});n.Enum_Capability=M;var T=Object.freeze({DISABLE:0,ENABLE:1,REFRESH:2});n.Enum_SdProtectOperationType=T;var O=Object.freeze({RecoveryDeviceType_ScrambledWords:0,RecoveryDeviceType_Matrix:1});n.Enum_RecoveryDeviceType=O;var P=Object.freeze({WordRequestType_Plain:0,WordRequestType_Matrix9:1,WordRequestType_Matrix6:2});n.Enum_WordRequestType=P;var A=Object.freeze({MosaicLevy_Absolute:1,MosaicLevy_Percentile:2});n.Enum_NEMMosaicLevy=A;var R=Object.freeze({SupplyChange_Increase:1,SupplyChange_Decrease:2});n.Enum_NEMSupplyChangeType=R;var x=Object.freeze({CosignatoryModification_Add:1,CosignatoryModification_Delete:2});n.Enum_NEMModificationType=x;var D=Object.freeze({ImportanceTransfer_Activate:1,ImportanceTransfer_Deactivate:2});n.Enum_NEMImportanceTransferMode=D;var I=Object.freeze({NATIVE:0,ALPHANUM4:1,ALPHANUM12:2});n.Enum_StellarAssetType=I;var N=Object.freeze({NONE:0,TEXT:1,ID:2,HASH:3,RETURN:4});n.Enum_StellarMemoType=N;var j=Object.freeze({ACCOUNT:0,PRE_AUTH:1,HASH:2});n.Enum_StellarSignerType=j;var U=Object.freeze({Implicit:0,Originated:1});n.Enum_TezosContractType=U;var L=Object.freeze({Yay:0,Nay:1,Pass:2});n.Enum_TezosBallotType=L}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/types/trezor/protobuf.js"}],[5985,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.getLog=n.enableLogByPrefix=n.enableLog=n.initLog=void 0;var r={DescriptorStream:"color: #77ab59",DeviceList:"color: #36802d",Device:"color: #bada55",Core:"color: #c9df8a",IFrame:"color: #FFFFFF; background: #f4a742;",Popup:"color: #f48a00"},s=function(){function e(e,t){this.prefix=e,this.enabled=t,this.messages=[],this.css=r[e]||"color: #000000; background: #FFFFFF;"}var t=e.prototype;return t.addMessage=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];this.messages.push({level:e,prefix:t,message:r,timestamp:(new Date).getTime()}),this.messages.length>100&&this.messages.shift()},t.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["log",this.prefix].concat(t)),this.enabled)&&(r=console).log.apply(r,[this.prefix].concat(t))},t.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["error",this.prefix].concat(t)),this.enabled)&&(r=console).error.apply(r,[this.prefix].concat(t))},t.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["warn",this.prefix].concat(t)),this.enabled)&&(r=console).warn.apply(r,[this.prefix].concat(t))},t.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["debug",this.prefix].concat(t)),this.enabled)&&(r=console).log.apply(r,["%c"+this.prefix,this.css].concat(t))},e}(),o={};n.initLog=function(e,t){var n=new s(e,!!t);return o[e]=n,n};n.enableLog=function(e){Object.keys(o).forEach((function(t){o[t].enabled=e}))};n.enableLogByPrefix=function(e,t){o[e]&&(o[e].enabled=t)};n.getLog=function(){var e=[];return Object.keys(o).forEach((function(t){e=e.concat(o[t].messages)})),e.sort((function(e,t){return e.timestamp-t.timestamp})),e}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/utils/debug.js"}],[5986,{"@babel/runtime/helpers/asyncToGenerator":185,"@babel/runtime/helpers/interopRequireDefault":195,"@babel/runtime/regenerator":215},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.create=function(e,t){var n,r=function(e){},i=function(e){},a=new Promise(function(){var t=(0,o.default)(s.default.mark((function t(o,a){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o,i=a,"function"!=typeof e){t.next=11;break}return t.prev=3,t.next=6,e();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),a(t.t0);case 11:"string"==typeof e&&(n=e);case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e,n){return t.apply(this,arguments)}}());return{id:n,device:t,resolve:r,reject:i,promise:a}},n.createAsync=function(e){var t=function(e){},n=function(e){},r=new Promise((function(e,r){t=e,n=r})),i=function(){var t=(0,o.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{resolve:t,reject:n,promise:r,run:function(){return i(),r}}},n.resolveTimeoutPromise=function(e,t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))},n.rejectTimeoutPromise=void 0;var s=r(e("@babel/runtime/regenerator")),o=r(e("@babel/runtime/helpers/asyncToGenerator"));n.rejectTimeoutPromise=function(e,t){return new Promise((function(n,r){setTimeout((function(){r(t)}),e)}))}}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/utils/deferred.js"}],[5987,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.__esModule=!0,n.default=void 0;var r=function(e,t,n){var r=e||".trezor-webusb-button",s=document.querySelectorAll(r),o=t+"?"+Date.now();s.forEach((function(e){if(e.getElementsByTagName("iframe").length<1){var t=e.getBoundingClientRect(),r=document.createElement("iframe");r.frameBorder="0",r.width=Math.round(t.width)+"px",r.height=Math.round(t.height)+"px",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.zIndex="1",r.setAttribute("allow","usb"),r.setAttribute("scrolling","no"),r.onload=function(){r.contentWindow.postMessage({},n)},r.src=o,e.append(r)}}))};n.default=r}}},{package:"trezor-connect",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/trezor-connect/lib/webusb/button.js"}],[5988,{"./lib/truncate":5989,"utf8-byte-length/browser":6006},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./lib/truncate"),s=e("utf8-byte-length/browser");t.exports=r.bind(null,s)}}},{package:"truncate-utf8-bytes",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/truncate-utf8-bytes/browser.js"}],[5989,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e>=55296&&e<=56319}function s(e){return e>=56320&&e<=57343}t.exports=function(e,t,n){if("string"!=typeof t)throw new Error("Input must be string");for(var o,i,a=t.length,c=0,u=0;u<a;u+=1){if(o=t.charCodeAt(u),i=t[u],r(o)&&s(t.charCodeAt(u+1))&&(i+=t[u+=1]),(c+=e(i))===n)return t.slice(0,u+1);if(c>n)return t.slice(0,u-i.length+1)}return t}}}},{package:"truncate-utf8-bytes",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/truncate-utf8-bytes/lib/truncate.js"}],[5993,{buffer:2081,"is-typedarray":4706},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("is-typedarray").strict;t.exports=function(e){if(r(e)){var t=n.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return n.from(e)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"typedarray-to-buffer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/typedarray-to-buffer/index.js"}],[5994,{},function(){with(this)return function(){"use strict";return function(e,t,n){!function(e,r){"object"==typeof n&&void 0!==t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).typical={})}(this,(function(e){function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}function n(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function r(e){return s(e)&&"number"==typeof e.length}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0!==e}function i(e){return"function"==typeof e&&/^class /.test(Function.prototype.toString.call(e))}function a(e){if(null===e)return!0;switch(typeof e){case"string":case"number":case"symbol":case"undefined":case"boolean":return!0;default:return!1}}function c(e){if(e){const t=o(Promise)&&e instanceof Promise,n=e.then&&"function"==typeof e.then;return!(!t&&!n)}return!1}function u(e){return!(null===e||!o(e))&&("function"==typeof e[Symbol.iterator]||"function"==typeof e[Symbol.asyncIterator])}function l(e){return"string"==typeof e}function d(e){return"function"==typeof e}var f={isNumber:t,isPlainObject:n,isArrayLike:r,isObject:s,isDefined:o,isClass:i,isPrimitive:a,isPromise:c,isIterable:u,isString:l,isFunction:d};e.default=f,e.isArrayLike=r,e.isClass=i,e.isDefined=o,e.isFunction=d,e.isIterable=u,e.isNumber=t,e.isObject=s,e.isPlainObject=n,e.isPrimitive=a,e.isPromise=c,e.isString=l,Object.defineProperty(e,"__esModule",{value:!0})}))}}},{package:"typical",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/typical/dist/index.js"}],[5997,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=[],r={};if("function"!=typeof t){var s=t;t=function(e){return e[s]}}return e.forEach((function(e){var s=t(e);r[s]||(r[s]=!0,n.push(e))})),n}}}},{package:"unique-by",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/unique-by/index.js"}],[5999,{"./pad-string":6e3,buffer:2081},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("buffer"),s=e("./pad-string");function o(e,t){return void 0===t&&(t="utf8"),r.Buffer.isBuffer(e)?a(e.toString("base64")):a(r.Buffer.from(e,t).toString("base64"))}function i(e){return e=e.toString(),s.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function a(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var c=o;c.encode=o,c.decode=function(e,t){return void 0===t&&(t="utf8"),r.Buffer.from(i(e),"base64").toString(t)},c.toBase64=i,c.fromBase64=a,c.toBuffer=function(e){return r.Buffer.from(i(e),"base64")},n.default=c}}},{package:"uport-base64url",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/uport-base64url/dist/base64url.js"}],[6,{"../../../shared/constants/alerts":6183,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,"@metamask/obs-store":1193},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("@babel/runtime/helpers/defineProperty")),o=e("@metamask/obs-store"),i=e("../../../shared/constants/alerts");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u={alertEnabledness:i.TOGGLEABLE_ALERT_TYPES.reduce(((e,t)=>(e[t]=!0,e)),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}};n.default=class{constructor(e={}){const{initState:t={},preferencesStore:n}=e,r=c(c({},u),{},{alertEnabledness:c(c({},u.alertEnabledness),t.alertEnabledness)});this.store=new o.ObservableStore(r),this.selectedAddress=n.getState().selectedAddress,n.subscribe((({selectedAddress:e})=>{this.store.getState().unconnectedAccountAlertShownOrigins&&this.selectedAddress!==e&&(this.selectedAddress=e,this.store.updateState({unconnectedAccountAlertShownOrigins:{}}))}))}setAlertEnabledness(e,t){let{alertEnabledness:n}=this.store.getState();n=c({},n),n[e]=t,this.store.updateState({alertEnabledness:n})}setUnconnectedAccountAlertShown(e){let{unconnectedAccountAlertShownOrigins:t}=this.store.getState();t=c({},t),t[e]=!0,this.store.updateState({unconnectedAccountAlertShownOrigins:t})}getWeb3ShimUsageState(e){return this.store.getState().web3ShimUsageOrigins[e]}setWeb3ShimUsageRecorded(e){this._setWeb3ShimUsageState(e,i.WEB3_SHIM_USAGE_ALERT_STATES.RECORDED)}setWeb3ShimUsageAlertDismissed(e){this._setWeb3ShimUsageState(e,i.WEB3_SHIM_USAGE_ALERT_STATES.DISMISSED)}_setWeb3ShimUsageState(e,t){let{web3ShimUsageOrigins:n}=this.store.getState();n=c({},n),n[e]=t,this.store.updateState({web3ShimUsageOrigins:n})}}}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/controllers/alert.js"}],[6e3,{buffer:2081},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("buffer");n.default=function(e){var t=e.length,n=t%4;if(!n)return e;var s=t,o=4-n,i=t+o,a=r.Buffer.alloc(i);for(a.write(e);o--;)a.write("=",s++);return a.toString()}}}},{package:"uport-base64url",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/uport-base64url/dist/pad-string.js"}],[6001,{"./dist/base64url":5999},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./dist/base64url").default,t.exports.default=t.exports}}},{package:"uport-base64url",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/uport-base64url/index.js"}],[6006,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e>=55296&&e<=56319}function s(e){return e>=56320&&e<=57343}t.exports=function(e){if("string"!=typeof e)throw new Error("Input must be string");for(var t=e.length,n=0,o=null,i=null,a=0;a<t;a++)s(o=e.charCodeAt(a))?null!=i&&r(i)?n+=1:n+=3:o<=127?n+=1:o>=128&&o<=2047?n+=2:o>=2048&&o<=65535&&(n+=3),i=o;return n}}}},{package:"utf8-byte-length",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/utf8-byte-length/browser.js"}],[6028,{"../../is-buffer/index.js":4686,varint:6031},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("varint");t.exports=e=>{if(!n.isBuffer(e))throw new Error("arg needs to be a buffer");let t=[];for(;e.length>0;){const n=r.decode(e);t.push(n),e=e.slice(r.decode.bytes)}return t}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"varint-decoder",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/varint-decoder/src/index.js"}],[6029,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function e(t,n){var r,s=0,o=0,i=n=n||0,a=t.length;do{if(i>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[i++],s+=o<28?(127&r)<<o:(127&r)*Math.pow(2,o),o+=7}while(r>=128);return e.bytes=i-n,s}}}},{package:"varint",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/varint/decode.js"}],[6030,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function e(t,n,s){n=n||[];var o=s=s||0;for(;t>=r;)n[s++]=255&t|128,t/=128;for(;-128&t;)n[s++]=255&t|128,t>>>=7;return n[s]=0|t,e.bytes=s-o+1,n};var r=Math.pow(2,31)}}},{package:"varint",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/varint/encode.js"}],[6031,{"./decode.js":6029,"./encode.js":6030,"./length.js":6032},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"varint",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/varint/index.js"}],[6032,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=Math.pow(2,7),s=Math.pow(2,14),o=Math.pow(2,21),i=Math.pow(2,28),a=Math.pow(2,35),c=Math.pow(2,42),u=Math.pow(2,49),l=Math.pow(2,56),d=Math.pow(2,63);t.exports=function(e){return e<r?1:e<s?2:e<o?3:e<i?4:e<a?5:e<c?6:e<u?7:e<l?8:e<d?9:10}}}},{package:"varint",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/varint/length.js"}],[6035,{util:2087},function(){with(this)return function(){"use strict";return function(e,t,n){n.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,n.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"web-encoding",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/web-encoding/src/lib.js"}],[61,{"@babel/runtime/helpers/interopRequireDefault":195,events:2082},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("events"));class o extends s.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const n=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||n&&n.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const n of t)try{const t=await n.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==n.version)throw new Error("Migrator - Migration did not update version number correctly");e=t}catch(t){const r=t.message;return t.message=`MetaMask Migration Error #${n.version}: ${r}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}n.default=o}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/migrator/index.js"}],[6161,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r,s;self.mozRTCPeerConnection||navigator.mozGetUserMedia?(r="moz",s=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(self.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(r="webkit",s=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var o=self.RTCPeerConnection||self.mozRTCPeerConnection||self.webkitRTCPeerConnection,i=self.mozRTCIceCandidate||self.RTCIceCandidate,a=self.mozRTCSessionDescription||self.RTCSessionDescription,c=self.webkitMediaStream||self.MediaStream,u="https:"===self.location.protocol&&("webkit"===r&&s>=26||"moz"===r&&s>=33),l=self.AudioContext||self.webkitAudioContext,d=self.document&&document.createElement("video"),f=d&&d.canPlayType&&"probably"===d.canPlayType('video/webm; codecs="vp8", vorbis'),p=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;t.exports={prefix:r,browserVersion:s,support:!!o&&!!p,supportRTCPeerConnection:!!o,supportVp8:f,supportGetUserMedia:!!p,supportDataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),supportWebAudio:!(!l||!l.prototype.createMediaStreamSource),supportMediaStream:!(!c||!c.prototype.removeTrack),supportScreenSharing:!!u,AudioContext:l,PeerConnection:o,SessionDescription:a,IceCandidate:i,MediaStream:c,getUserMedia:p}}}},{package:"webrtcsupport",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/webrtcsupport/index-browser.js"}],[6170,{buffer:2081},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(t,n){if(t.length!==n.length)throw new Error("Inputs should have the same length");for(var r=e.allocUnsafe(t.length),s=0;s<t.length;s++)r[s]=t[s]^n[s];return r}t.exports=n,n.compare=function(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");for(var n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0},n.gt=function(e,t){return 1===n.compare(e,t)},n.lt=function(e,t){return-1===n.compare(e,t)},n.eq=function(e,t){return 0===n.compare(e,t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"xor-distance",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/xor-distance/index.js"}],[6172,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)r.call(n,s)&&(e[s]=n[s])}return e};var r=Object.prototype.hasOwnProperty}}},{package:"xtend",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/xtend/mutable.js"}],[6175,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},i=0,a=0;function c(e){var t="";do{t=s[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function u(){var e=c(+new Date);return e!==r?(i=0,r=e):e+"."+c(i++)}for(;a<64;a++)o[s[a]]=a;u.encode=c,u.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+o[e.charAt(a)];return t},t.exports=u}}},{package:"yeast",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/yeast/index.js"}],[6188,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TRAITS=n.REJECT_NOTFICIATION_CLOSE_SIG=n.REJECT_NOTFICIATION_CLOSE=n.METAMETRICS_BACKGROUND_PAGE_OBJECT=n.METAMETRICS_ANONYMOUS_ID=void 0;n.TRAITS={LEDGER_CONNECTION_TYPE:"ledger_connection_type",THREE_BOX_ENABLED:"three_box_enabled",NUMBER_OF_ACCOUNTS:"number_of_accounts",NETWORKS_ADDED:"networks_added",THEME:"theme"};n.METAMETRICS_ANONYMOUS_ID="0x0000000000000000";n.METAMETRICS_BACKGROUND_PAGE_OBJECT={path:"/background-process",title:"Background Process",url:"/background-process"};n.REJECT_NOTFICIATION_CLOSE="Cancel Via Notification Close";n.REJECT_NOTFICIATION_CLOSE_SIG="Cancel Sig Request Via Notification Close"}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/shared/constants/metametrics.js"}],[62,{"../../../shared/constants/time":6192,"../../../shared/modules/fetch-with-timeout":6197,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,loglevel:5182},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("loglevel")),i=e("../../../shared/constants/time");const a=(0,r(e("../../../shared/modules/fetch-with-timeout")).default)(30*i.SECOND);n.default=class{constructor(){(0,s.default)(this,"isSupported",!0),this._initialized=!1,this._initializing=this._init(),this._state=undefined}async _init(){try{const e=await a("http://localhost:12345/state.json");e.ok&&(this._state=await e.json())}catch(e){o.default.debug(`Error loading network state: '${e.message}'`)}finally{this._initialized=!0}}async get(){return this._initialized||await this._initializing,this._state}async set(e){this._initialized||await this._initializing,this._state=e}}}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/network-store.js"}],[63,{"../platforms/extension":153,"@babel/runtime/helpers/interopRequireDefault":195,"safe-event-emitter":5740},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.NOTIFICATION_MANAGER_EVENTS=void 0;var s=r(e("safe-event-emitter")),o=r(e("../platforms/extension"));const i={POPUP_CLOSED:"onPopupClosed"};n.NOTIFICATION_MANAGER_EVENTS=i;class a extends s.default{constructor(){super(),this.platform=new o.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(){const e=await this._getPopup();if(e)await this.platform.focusWindow(e.id);else{let e=0,t=0;try{const n=await this.platform.getLastFocusedWindow();t=n.top,e=n.left+(n.width-360)}catch(n){const{screenX:r,screenY:s,outerWidth:o}=window;t=Math.max(s,0),e=Math.max(r+(o-360),0)}const n=await this.platform.openWindow({url:"notification.html",type:"popup",width:360,height:620,left:e,top:t});n.left!==e&&"fullscreen"!==n.state&&await this.platform.updateWindowPosition(n.id,e,t),this._popupId=n.id}}_onWindowClosed(e){e===this._popupId&&(this._popupId=undefined,this.emit(i.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}n.default=a}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/notification-manager.js"}],[64,{"../../../shared/constants/app":6184,"../../../shared/modules/random-id":6201,"../metamask-controller":82,"./util":81,"@babel/runtime/helpers/interopRequireDefault":195,"@metamask/obs-store":1193,buffer:2081,"eth-rpc-errors":2455,"ethereumjs-util":2521,events:2082,loglevel:5182},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("events")),o=e("@metamask/obs-store"),i=e("ethereumjs-util"),a=e("eth-rpc-errors"),c=r(e("loglevel")),u=e("../../../shared/constants/app"),l=e("../metamask-controller"),d=r(e("../../../shared/modules/random-id")),f=e("./util");const p=/^[0-9A-Fa-f]+$/gu;class h extends s.default{constructor({metricsEvent:e}){super(),this.memStore=new o.ObservableStore({unapprovedPersonalMsgs:{},unapprovedPersonalMsgCount:0}),this.messages=[],this.metricsEvent=e}get unapprovedPersonalMsgCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addUnapprovedMessageAsync(e,t){return new Promise(((n,r)=>{if(!e.from)return void r(new Error("MetaMask Message Signature: from field is required."));const s=this.addUnapprovedMessage(e,t);this.once(`${s}:finished`,(t=>{switch(t.status){case"signed":return void n(t.rawSig);case"rejected":return void r(a.ethErrors.provider.userRejectedRequest("MetaMask Message Signature: User denied message signature."));case"errored":return void r(new Error(`MetaMask Message Signature: ${t.error}`));default:r(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){c.default.debug(`PersonalMessageManager addUnapprovedMessage: ${JSON.stringify(e)}`),t&&(e.origin=t.origin),e.data=this.normalizeMsgData(e.data);const n=(new Date).getTime(),r=(0,d.default)(),s={id:r,msgParams:e,time:n,status:"unapproved",type:u.MESSAGE_TYPE.PERSONAL_SIGN};return this.addMsg(s),this.emit("update"),r}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForSigning(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusSigned(e,t){const n=this.getMsg(e);n.rawSig=t,this._updateMsg(n),this._setMsgStatus(e,"signed")}prepMsgForSigning(e){return delete e.metamaskId,Promise.resolve(e)}rejectMsg(e,t=undefined){if(t){const n=this.getMsg(e);this.metricsEvent({event:t,category:"Transactions",properties:{action:"Sign Request",type:n.type}})}this._setMsgStatus(e,"rejected")}errorMessage(e,t){const n=this.getMsg(e);n.error=t,this._updateMsg(n),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const n=this.getMsg(e);if(!n)throw new Error(`PersonalMessageManager - Message not found for id: "${e}".`);n.status=t,this._updateMsg(n),this.emit(`${e}:${t}`,n),"rejected"!==t&&"signed"!==t||this.emit(`${e}:finished`,n)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedPersonalMsgs:e,unapprovedPersonalMsgCount:t}),this.emit(l.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}normalizeMsgData(e){try{const t=(0,i.stripHexPrefix)(e);if(t.match(p))return(0,f.addHexPrefix)(t)}catch(e){c.default.debug("Message was not hex encoded, interpreting as utf8.")}return(0,i.bufferToHex)(t.from(e,"utf8"))}}n.default=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/personal-message-manager.js"}],[65,{"../../../../shared/constants/network":6189,"./handlers":69,"@babel/runtime/helpers/interopRequireDefault":195,"@metamask/controllers":1042,"@metamask/rpc-methods":1213,"eth-rpc-errors":2455,lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.createMethodMiddleware=function(e){const t=d.filter((t=>!Object.hasOwnProperty.call(e,t)));if(t.length>0)throw new Error(`Missing expected hooks:\n\n${t.join("\n")}\n`);return async function(t,n,r,s){if(c.UNSUPPORTED_RPC_METHODS.has(t.method))return s(i.ethErrors.rpc.methodNotSupported());const a=l.get(t.method);if(a){const{implementation:i,hookNames:c}=a;try{return await i(t,n,r,s,(0,o.selectHooks)(e,c))}catch(e){return console.error(e),s(e)}}return r()}};var s=e("@metamask/controllers"),o=e("@metamask/rpc-methods"),i=e("eth-rpc-errors"),a=e("lodash"),c=e("../../../../shared/constants/network");const u=[...r(e("./handlers")).default,...s.permissionRpcMethods.handlers],l=u.reduce(((e,t)=>{for(const n of t.methodNames)e.set(n,t);return e}),new Map),d=Array.from(new Set((0,a.flatten)(u.map((({hookNames:e})=>Object.keys(e))))).values())}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[66,{"../../../../../shared/constants/app":6184,"../../../../../shared/constants/network":6189,"../../../../../shared/modules/network.utils":6200,"../../../../../shared/modules/rpc.utils":6202,"@babel/runtime/helpers/interopRequireDefault":195,"eth-rpc-errors":2455,lodash:5172,"valid-url":6024},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("eth-rpc-errors"),o=r(e("valid-url")),i=e("lodash"),a=e("../../../../../shared/constants/app"),c=e("../../../../../shared/modules/network.utils"),u=e("../../../../../shared/modules/rpc.utils"),l=e("../../../../../shared/constants/network");var d={methodNames:[a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,n,r,{addCustomRpc:d,getCurrentChainId:f,findCustomRpcBy:p,updateRpcTarget:h,requestUserApproval:m,sendMetrics:g}){var b;if(null===(b=e.params)||void 0===b||!b[0]||"object"!=typeof e.params[0])return r(s.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:y}=e,{chainId:v,chainName:_=null,blockExplorerUrls:w=null,nativeCurrency:E=null,rpcUrls:k}=e.params[0],C=Object.keys((0,i.omit)(e.params[0],["chainId","chainName","blockExplorerUrls","iconUrls","rpcUrls","nativeCurrency"]));if(C.length>0)return r(s.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${C}`}));const S=Array.isArray(k)?k.find((e=>o.default.isHttpsUri(e))):null,M=null!==w&&Array.isArray(w)?w.find((e=>o.default.isHttpsUri(e))):null;if(!S)return r(s.ethErrors.rpc.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${k}`}));if(null!==w&&!M)return r(s.ethErrors.rpc.invalidParams({message:`Expected null or array with at least one valid string HTTPS URL 'blockExplorerUrl'. Received: ${w}`}));const T="string"==typeof v&&v.toLowerCase();if(!(0,c.isPrefixedFormattedHexString)(T))return r(s.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${v}`}));if(!(0,c.isSafeChainId)(parseInt(T,16)))return r(s.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${T}": numerical value greater than max safe value. Received:\n${v}`}));if(l.CHAIN_ID_TO_NETWORK_ID_MAP[T])return r(s.ethErrors.rpc.invalidParams({message:"May not specify default MetaMask chain."}));const O=p({chainId:T});if(O){t.result=null;if(f()===T)return r();try{await h(await m({origin:y,type:a.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN,requestData:{rpcUrl:O.rpcUrl,chainId:O.chainId,nickname:O.nickname,ticker:O.ticker}})),t.result=null}catch(e){if(e.code!==s.errorCodes.provider.userRejectedRequest)return r(e)}return r()}let P;try{P=await(0,u.jsonRpcRequest)(S,"eth_chainId")}catch(e){return r(s.ethErrors.rpc.internal({message:`Request for method 'eth_chainId on ${S} failed`,data:{networkErr:e}}))}if(T!==P)return r(s.ethErrors.rpc.invalidParams({message:`Chain ID returned by RPC URL ${S} does not match ${T}`,data:{chainId:P}}));if("string"!=typeof _||!_)return r(s.ethErrors.rpc.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${_}`}));const A=_.length>100?_.substring(0,100):_;if(null!==E){if("object"!=typeof E||Array.isArray(E))return r(s.ethErrors.rpc.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${E}`}));if(18!==E.decimals)return r(s.ethErrors.rpc.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${E.decimals}`}));if(!E.symbol||"string"!=typeof E.symbol)return r(s.ethErrors.rpc.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${E.symbol}`}))}const R=(null==E?void 0:E.symbol)||"ETH";if("string"!=typeof R||R.length<2||R.length>6)return r(s.ethErrors.rpc.invalidParams({message:`Expected 2-6 character string 'nativeCurrency.symbol'. Received:\n${R}`}));try{await d(await m({origin:y,type:a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN,requestData:{chainId:T,blockExplorerUrl:M,chainName:A,rpcUrl:S,ticker:R}})),g({event:"Custom Network Added",category:"Network",referrer:{url:y},sensitiveProperties:{chain_id:T,rpc_url:S,network_name:A,network:S,symbol:R,block_explorer_url:M,source:"dapp"}}),t.result=null}catch(e){return r(e)}try{await h(await m({origin:y,type:a.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN,requestData:{rpcUrl:S,chainId:T,nickname:A,ticker:R}}))}catch(e){if(e.code!==s.errorCodes.provider.userRejectedRequest)return r(e)}return r()},hookNames:{addCustomRpc:!0,getCurrentChainId:!0,findCustomRpcBy:!0,updateRpcTarget:!0,requestUserApproval:!0,sendMetrics:!0}};n.default=d}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[67,{"../../../../../shared/constants/app":6184},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,n,r,{getAccounts:s}){return t.result=await s(),r()},hookNames:{getAccounts:!0}};n.default=r}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.js"}],[68,{"../../../../../shared/constants/app":6184,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("@babel/runtime/helpers/defineProperty"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,n,r,{getProviderState:s}){return t.result=i({},await s(e.origin)),r()},hookNames:{getProviderState:!0}};n.default=a}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.js"}],[69,{"./add-ethereum-chain":66,"./eth-accounts":67,"./get-provider-state":68,"./log-web3-shim-usage":70,"./request-accounts":71,"./send-metadata":72,"./switch-ethereum-chain":73,"./watch-asset":74,"@babel/runtime/helpers/interopRequireDefault":195},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("./add-ethereum-chain")),o=r(e("./eth-accounts")),i=r(e("./get-provider-state")),a=r(e("./log-web3-shim-usage")),c=r(e("./request-accounts")),u=r(e("./send-metadata")),l=r(e("./switch-ethereum-chain")),d=r(e("./watch-asset"));var f=[s.default,o.default,i.default,a.default,c.default,u.default,l.default,d.default];n.default=f}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/handlers/index.js"}],[7,{"../../../shared/constants/time":6192,"../metamask-controller":82,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,"@metamask/obs-store":1193,events:2082},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("events")),i=e("@metamask/obs-store"),a=e("../metamask-controller"),c=e("../../../shared/constants/time");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class d extends o.default{constructor(e={}){const{addUnlockListener:t,isUnlocked:n,initState:r,onInactiveTimeout:s,showUnlockRequest:o,preferencesStore:a,qrHardwareStore:c}=e;super(),this.onInactiveTimeout=s||(()=>undefined),this.store=new i.ObservableStore(l(l({timeoutMinutes:0,connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,browserEnvironment:{},popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[],recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:(new Date).getTime(),collectiblesDetectionNoticeDismissed:!1,enableEIP1559V2NoticeDismissed:!1,showTestnetMessageInDropdown:!0,trezorModel:null},r),{},{qrHardware:{},collectiblesDropdownState:{}})),this.timer=null,this.isUnlocked=n,this.waitingForUnlock=[],t(this.handleUnlock.bind(this)),this._showUnlockRequest=o,a.subscribe((({preferences:e})=>{this.store.getState().timeoutMinutes!==e.autoLockTimeLimit&&this._setInactiveTimeout(e.autoLockTimeLimit)})),c.subscribe((e=>{this.store.updateState({qrHardware:e})}));const{preferences:u}=a.getState();this._setInactiveTimeout(u.autoLockTimeLimit)}getUnlockPromise(e){return new Promise((t=>{this.isUnlocked()?t():this.waitForUnlock(t,e)}))}waitForUnlock(e,t){this.waitingForUnlock.push({resolve:e}),this.emit(a.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE),t&&this._showUnlockRequest()}handleUnlock(){if(this.waitingForUnlock.length>0){for(;this.waitingForUnlock.length>0;)this.waitingForUnlock.shift().resolve();this.emit(a.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}}setDefaultHomeActiveTabName(e){this.store.updateState({defaultHomeActiveTabName:e})}setConnectedStatusPopoverHasBeenShown(){this.store.updateState({connectedStatusPopoverHasBeenShown:!0})}setRecoveryPhraseReminderHasBeenShown(){this.store.updateState({recoveryPhraseReminderHasBeenShown:!0})}setRecoveryPhraseReminderLastShown(e){this.store.updateState({recoveryPhraseReminderLastShown:e})}setLastActiveTime(){this._resetTimer()}_setInactiveTimeout(e){this.store.updateState({timeoutMinutes:e}),this._resetTimer()}_resetTimer(){const{timeoutMinutes:e}=this.store.getState();this.timer&&clearTimeout(this.timer),e&&(this.timer=setTimeout((()=>this.onInactiveTimeout()),e*c.MINUTE))}setBrowserEnvironment(e,t){this.store.updateState({browserEnvironment:{os:e,browser:t}})}addPollingToken(e,t){const n=this.store.getState()[t];this.store.updateState({[t]:[...n,e]})}removePollingToken(e,t){const n=this.store.getState()[t];this.store.updateState({[t]:n.filter((t=>t!==e))})}clearPollingTokens(){this.store.updateState({popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[]})}setShowTestnetMessageInDropdown(e){this.store.updateState({showTestnetMessageInDropdown:e})}setTrezorModel(e){this.store.updateState({trezorModel:e})}setCollectiblesDetectionNoticeDismissed(e){this.store.updateState({collectiblesDetectionNoticeDismissed:e})}setEnableEIP1559V2NoticeDismissed(e){this.store.updateState({enableEIP1559V2NoticeDismissed:e})}updateCollectibleDropDownState(e){this.store.updateState({collectiblesDropdownState:e})}}n.default=d}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/controllers/app-state.js"}],[70,{"../../../../../shared/constants/app":6184},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE],implementation:function(e,t,n,r,{sendMetrics:s,getWeb3ShimUsageState:o,setWeb3ShimUsageRecorded:i}){const{origin:a}=e;o(a)===undefined&&(i(a),s({event:"Website Accessed window.web3 Shim",category:"inpage_provider",referrer:{url:a}},{excludeMetaMetricsId:!0}));return t.result=!0,r()},hookNames:{sendMetrics:!0,getWeb3ShimUsageState:!0,setWeb3ShimUsageRecorded:!0}};n.default=r}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/handlers/log-web3-shim-usage.js"}],[71,{"../../../../../shared/constants/app":6184,"eth-rpc-errors":2455},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),s=e("../../../../../shared/constants/app");var o={methodNames:[s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS],implementation:async function(e,t,n,o,{origin:a,getAccounts:c,getUnlockPromise:u,hasPermission:l,requestAccountsPermission:d}){if(i.has(a))return t.error=r.ethErrors.rpc.resourceUnavailable(`Already processing ${s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS}. Please wait.`),o();if(l(s.MESSAGE_TYPE.ETH_ACCOUNTS)){try{i.add(a),await u(!0),t.result=await c(),o()}catch(e){o(e)}finally{i.delete(a)}return undefined}try{await d()}catch(e){return t.error=e,o()}const f=await c();f.length>0?t.result=f:t.error=r.ethErrors.rpc.internal("Accounts unexpectedly unavailable. Please report this bug.");return o()},hookNames:{origin:!0,getAccounts:!0,getUnlockPromise:!0,hasPermission:!0,requestAccountsPermission:!0}};n.default=o;const i=new Set}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/handlers/request-accounts.js"}],[72,{"../../../../../shared/constants/app":6184,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,"@babel/runtime/helpers/objectWithoutProperties":204,"eth-rpc-errors":2455},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("@babel/runtime/helpers/objectWithoutProperties")),i=e("eth-rpc-errors"),a=e("../../../../../shared/constants/app");const c=["icon","name"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={methodNames:[a.MESSAGE_TYPE.SEND_METADATA],implementation:function(e,t,n,r,{addSubjectMetadata:s,subjectType:a}){const{origin:u,params:d}=e;if(!d||"object"!=typeof d||Array.isArray(d))return r(i.ethErrors.rpc.invalidParams({data:d}));{const{icon:e=null,name:t=null}=d,n=(0,o.default)(d,c);s(l(l({},n),{},{iconUrl:e,name:t,subjectType:a,origin:u}))}return t.result=!0,r()},hookNames:{addSubjectMetadata:!0,subjectType:!0}};n.default=d}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/handlers/send-metadata.js"}],[73,{"../../../../../shared/constants/app":6184,"../../../../../shared/constants/network":6189,"../../../../../shared/modules/network.utils":6200,"eth-rpc-errors":2455,lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),s=e("lodash"),o=e("../../../../../shared/constants/app"),i=e("../../../../../shared/constants/network"),a=e("../../../../../shared/modules/network.utils");var c={methodNames:[o.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN],implementation:async function(e,t,n,c,{getCurrentChainId:u,findCustomRpcBy:l,setProviderType:d,updateRpcTarget:f,requestUserApproval:p}){var h;if(null===(h=e.params)||void 0===h||!h[0]||"object"!=typeof e.params[0])return c(r.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:m}=e,{chainId:g}=e.params[0],b=Object.keys((0,s.omit)(e.params[0],["chainId"]));if(b.length>0)return c(r.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${b}`}));const y="string"==typeof g&&g.toLowerCase();if(!(0,a.isPrefixedFormattedHexString)(y))return c(r.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${g}`}));if(!(0,a.isSafeChainId)(parseInt(y,16)))return c(r.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${y}": numerical value greater than max safe value. Received:\n${g}`}));const v=function(e,t){if(e in i.CHAIN_ID_TO_TYPE_MAP)return{chainId:e,ticker:i.ETH_SYMBOL,nickname:i.NETWORK_TO_NAME_MAP[e],rpcUrl:i.CHAIN_ID_TO_RPC_URL_MAP[e],type:i.CHAIN_ID_TO_TYPE_MAP[e]};return t({chainId:e})}(y,l);if(v){if(u()===y)return t.result=null,c();try{const e=await p({origin:m,type:o.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN,requestData:v});g in i.CHAIN_ID_TO_TYPE_MAP?d(e.type):await f(e),t.result=null}catch(e){return c(e)}return c()}return c(r.ethErrors.provider.custom({code:4902,message:`Unrecognized chain ID "${g}". Try adding the chain using ${o.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN} first.`}))},hookNames:{getCurrentChainId:!0,findCustomRpcBy:!0,setProviderType:!0,updateRpcTarget:!0,requestUserApproval:!0}};n.default=c}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/handlers/switch-ethereum-chain.js"}],[74,{"../../../../../shared/constants/app":6184},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/app");var s={methodNames:[r.MESSAGE_TYPE.WATCH_ASSET,r.MESSAGE_TYPE.WATCH_ASSET_LEGACY],implementation:async function(e,t,n,r,{handleWatchAssetRequest:s}){try{const{options:n,type:o}=e.params;return t.result=await s(n,o),r()}catch(e){return r(e)}},hookNames:{handleWatchAssetRequest:!0}};n.default=s}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/handlers/watch-asset.js"}],[75,{"./createMethodMiddleware":65},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./createMethodMiddleware");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}))}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/rpc-method-middleware/index.js"}],[76,{"@babel/runtime/helpers/interopRequireDefault":195,"eth-keyring-controller":2442,loglevel:5182},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("eth-keyring-controller")),o=r(e("loglevel"));var i={async verifyAccounts(e,t){if(!e||e.length<1)throw new Error("No created accounts defined.");const n=new(new s.default({}).getKeyringClassForType("HD Key Tree"))({mnemonic:t,numberOfAccounts:e.length}),r=await n.getAccounts();if(o.default.debug(`Created accounts: ${JSON.stringify(e)}`),o.default.debug(`Restored accounts: ${JSON.stringify(r)}`),r.length!==e.length)throw new Error("Wrong number of accounts");for(let t=0;t<r.length;t++)if(r[t].toLowerCase()!==e[t].toLowerCase())throw new Error(`Not identical accounts! Original: ${e[t]}, Restored: ${r[t]}`)}};n.default=i}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/seed-phrase-verifier.js"}],[77,{"../../../shared/constants/time":6192,"@babel/runtime/helpers/interopRequireDefault":195,_process:5420,"analytics-node":1677},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.segment=n.createSegmentMock=void 0;var s,o=r(e("analytics-node")),i=e("../../../shared/constants/time");const a=Boolean(t.env.METAMASK_DEBUG&&!t.env.IN_TEST),c=null!==""?"":null,u=null!==(s=t.env.SEGMENT_HOST)&&void 0!==s?s:null,l=5*i.SECOND,d=(e=1)=>{const t={queue:[],flush(){t.queue.forEach((([e,t])=>{t()})),t.queue=[]},track(n,r=(()=>undefined)){t.queue.push([n,r]),t.queue.length>=e&&t.flush()},page(){},identify(){}};return t};n.createSegmentMock=d;const f=!c||a&&!u?d(1):new o.default(c,{host:u,flushAt:1,flushInterval:l});n.segment=f}).call(this)}).call(this,e("_process"))}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/segment.js"}],[8,{"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,"@metamask/obs-store":1193},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("@babel/runtime/helpers/defineProperty")),o=e("@metamask/obs-store");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.default=class{constructor(e={}){const{accountTracker:t,getCurrentChainId:n}=e;this.accountTracker=t,this.getCurrentChainId=n;const r=a({cachedBalances:{}},e.initState);this.store=new o.ObservableStore(r),this._registerUpdates()}async updateCachedBalances({accounts:e}){const t=this.getCurrentChainId(),n=await this._generateBalancesToCache(e,t);this.store.updateState({cachedBalances:n})}_generateBalancesToCache(e,t){const{cachedBalances:n}=this.store.getState(),r=a({},n[t]);Object.keys(e).forEach((t=>{const n=e[t];n.balance&&(r[t]=n.balance)}));return a(a({},n),{},{[t]:r})}clearCachedBalances(){this.store.updateState({cachedBalances:{}})}_registerUpdates(){const e=this.updateCachedBalances.bind(this);this.accountTracker.store.subscribe(e)}}}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/controllers/cached-balances.js"}],[80,{"../../../shared/constants/app":6184,"../../../shared/modules/hexstring-utils":6199,"../../../shared/modules/random-id":6201,"../metamask-controller":82,"@babel/runtime/helpers/interopRequireDefault":195,"@metamask/obs-store":1193,assert:1700,"eth-rpc-errors":2455,"eth-sig-util":2457,events:2082,jsonschema:4740,loglevel:5182},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("events")),o=e("assert"),i=e("@metamask/obs-store"),a=e("eth-rpc-errors"),c=e("eth-sig-util"),u=r(e("loglevel")),l=r(e("jsonschema")),d=e("../../../shared/constants/app"),f=e("../metamask-controller"),p=r(e("../../../shared/modules/random-id")),h=e("../../../shared/modules/hexstring-utils");class m extends s.default{constructor({getCurrentChainId:e,metricsEvent:t}){super(),this._getCurrentChainId=e,this.memStore=new i.ObservableStore({unapprovedTypedMessages:{},unapprovedTypedMessagesCount:0}),this.messages=[],this.metricsEvent=t}get unapprovedTypedMessagesCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addUnapprovedMessageAsync(e,t,n){return new Promise(((r,s)=>{const o=this.addUnapprovedMessage(e,t,n);this.once(`${o}:finished`,(t=>{switch(t.status){case"signed":return r(t.rawSig);case"rejected":return s(a.ethErrors.provider.userRejectedRequest("MetaMask Message Signature: User denied message signature."));case"errored":return s(new Error(`MetaMask Message Signature: ${t.error}`));default:return s(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t,n){e.version=n,t&&(e.origin=t.origin),this.validateParams(e),u.default.debug(`TypedMessageManager addUnapprovedMessage: ${JSON.stringify(e)}`);const r=(new Date).getTime(),s=(0,p.default)(),o={id:s,msgParams:e,time:r,status:"unapproved",type:d.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA};return this.addMsg(o),this.emit("update"),s}validateParams(e){switch(o.strict.ok(e&&"object"==typeof e,"Params must be an object."),o.strict.ok("data"in e,'Params must include a "data" field.'),o.strict.ok("from"in e,'Params must include a "from" field.'),o.strict.ok("string"==typeof e.from&&(0,h.isValidHexAddress)(e.from,{allowNonPrefixed:!1}),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.'),e.version){case"V1":o.strict.ok(Array.isArray(e.data),'"params.data" must be an array.'),o.strict.doesNotThrow((()=>{(0,c.typedSignatureHash)(e.data)}),"Signing data must be valid EIP-712 typed data.");break;case"V3":case"V4":{let t;o.strict.equal(typeof e.data,"string",'"params.data" must be a string.'),o.strict.doesNotThrow((()=>{t=JSON.parse(e.data)}),'"data" must be a valid JSON string.');const n=l.default.validate(t,c.TYPED_MESSAGE_SCHEMA);if(o.strict.ok(t.primaryType in t.types,`Primary type of "${t.primaryType}" has no type definition.`),0!==n.errors.length)throw a.ethErrors.rpc.invalidParams({message:"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx.",data:n.errors.map((e=>e.message.toString()))});let{chainId:r}=t.domain;if(r){const e=parseInt(this._getCurrentChainId(),16);o.strict.ok(!Number.isNaN(e),`Cannot sign messages for chainId "${r}", because MetaMask is switching networks.`),"string"==typeof r&&(r=parseInt(r,r.startsWith("0x")?16:10)),o.strict.equal(r,e,`Provided chainId "${r}" must match the active chainId "${e}"`)}break}default:o.strict.fail(`Unknown typed data version "${e.version}"`)}}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForSigning(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusSigned(e,t){const n=this.getMsg(e);n.rawSig=t,this._updateMsg(n),this._setMsgStatus(e,"signed")}prepMsgForSigning(e){return delete e.metamaskId,delete e.version,Promise.resolve(e)}rejectMsg(e,t=undefined){if(t){const n=this.getMsg(e);this.metricsEvent({event:t,category:"Transactions",properties:{action:"Sign Request",version:n.msgParams.version,type:n.type}})}this._setMsgStatus(e,"rejected")}errorMessage(e,t){const n=this.getMsg(e);n.error=t,this._updateMsg(n),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const n=this.getMsg(e);if(!n)throw new Error(`TypedMessageManager - Message not found for id: "${e}".`);n.status=t,this._updateMsg(n),this.emit(`${e}:${t}`,n),"rejected"!==t&&"signed"!==t&&"errored"!==t||this.emit(`${e}:finished`,n)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedTypedMessages:e,unapprovedTypedMessagesCount:t}),this.emit(f.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}}n.default=m}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/lib/typed-message-manager.js"}],[82,{"../../shared/constants/app":6184,"../../shared/constants/hardware-wallets":6186,"../../shared/constants/network":6189,"../../shared/constants/permissions":6190,"../../shared/constants/swaps":6191,"../../shared/constants/time":6192,"../../shared/constants/transaction":6193,"../../shared/modules/hexstring-utils":6199,"../../shared/modules/string-utils":6203,"../../shared/modules/transaction.utils":6205,"../../shared/notifications":6206,"../../ui/helpers/utils/conversions.util":6730,"../../ui/helpers/utils/token-util":6745,"./account-import-strategies":2,"./controllers/alert":6,"./controllers/app-state":7,"./controllers/cached-balances":8,"./controllers/detect-tokens":9,"./controllers/ens":11,"./controllers/incoming-transactions":12,"./controllers/metametrics":13,"./controllers/network":17,"./controllers/onboarding":21,"./controllers/permissions":25,"./controllers/preferences":29,"./controllers/swaps":30,"./controllers/threebox":31,"./controllers/transactions":32,"./lib/ComposableObservableStore":39,"./lib/account-tracker":40,"./lib/createLoggerMiddleware":43,"./lib/createMetaRPCHandler":44,"./lib/createOnboardingMiddleware":45,"./lib/createOriginMiddleware":46,"./lib/createTabIdMiddleware":48,"./lib/decrypt-message-manager":49,"./lib/encryption-public-key-manager":50,"./lib/message-manager":59,"./lib/personal-message-manager":64,"./lib/rpc-method-middleware":75,"./lib/seed-phrase-verifier":76,"./lib/segment":77,"./lib/stream-utils":79,"./lib/typed-message-manager":80,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,"@keystonehq/metamask-airgapped-keyring":572,"@metamask/controllers":1042,"@metamask/eth-ledger-bridge-keyring":1093,"@metamask/obs-store":1193,"@metamask/obs-store/dist/asStream":1192,"@metamask/smart-transactions-controller":1319,"@sentry/browser":1480,_process:5420,"await-semaphore":1781,buffer:2081,"eth-json-rpc-filters":2382,"eth-json-rpc-filters/subscriptionManager":2388,"eth-json-rpc-middleware":2406,"eth-keyring-controller":2442,"eth-lattice-keyring":2443,"eth-query":2451,"eth-rpc-errors":2455,"eth-trezor-keyring":2479,"ethereumjs-util":2521,events:2082,"json-rpc-engine":4727,"json-rpc-middleware-stream/engineStream":4729,lodash:5172,loglevel:5182,nanoid:5257,pump:5519},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t,r){(function(){var s=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.METAMASK_CONTROLLER_EVENTS=void 0;var o=s(e("@babel/runtime/helpers/defineProperty")),i=s(e("events")),a=s(e("pump")),c=e("@metamask/obs-store"),u=e("@metamask/obs-store/dist/asStream"),l=e("json-rpc-engine"),d=e("lodash"),f=s(e("json-rpc-middleware-stream/engineStream")),p=s(e("eth-json-rpc-filters")),h=s(e("eth-json-rpc-filters/subscriptionManager")),m=e("eth-json-rpc-middleware"),g=s(e("eth-keyring-controller")),b=e("eth-rpc-errors"),y=e("await-semaphore"),v=e("ethereumjs-util"),_=s(e("loglevel")),w=s(e("eth-trezor-keyring")),E=s(e("@metamask/eth-ledger-bridge-keyring")),k=s(e("eth-lattice-keyring")),C=e("@keystonehq/metamask-airgapped-keyring"),S=s(e("eth-query")),M=s(e("nanoid")),T=e("@sentry/browser"),O=e("@metamask/controllers"),P=s(e("@metamask/smart-transactions-controller")),A=e("../../shared/constants/transaction"),R=e("../../shared/constants/swaps"),x=e("../../shared/constants/network"),D=e("../../shared/constants/hardware-wallets"),I=e("../../shared/constants/permissions"),N=e("../../shared/notifications"),j=e("../../shared/modules/hexstring-utils"),U=e("../../shared/constants/time"),L=e("../../shared/constants/app"),F=e("../../ui/helpers/utils/conversions.util"),B=e("../../ui/helpers/utils/token-util"),z=e("../../shared/modules/string-utils"),q=e("../../shared/modules/transaction.utils"),G=s(e("./lib/ComposableObservableStore")),H=s(e("./lib/account-tracker")),W=s(e("./lib/createLoggerMiddleware")),V=e("./lib/rpc-method-middleware"),Q=s(e("./lib/createOriginMiddleware")),K=s(e("./lib/createTabIdMiddleware")),Y=s(e("./lib/createOnboardingMiddleware")),$=e("./lib/stream-utils"),J=s(e("./controllers/ens")),Z=we(e("./controllers/network")),X=s(e("./controllers/preferences")),ee=s(e("./controllers/app-state")),te=s(e("./controllers/cached-balances")),ne=s(e("./controllers/alert")),re=s(e("./controllers/onboarding")),se=s(e("./controllers/threebox")),oe=s(e("./controllers/incoming-transactions")),ie=we(e("./lib/message-manager")),ae=s(e("./lib/decrypt-message-manager")),ce=s(e("./lib/encryption-public-key-manager")),ue=s(e("./lib/personal-message-manager")),le=s(e("./lib/typed-message-manager")),de=s(e("./controllers/transactions")),fe=s(e("./controllers/detect-tokens")),pe=s(e("./controllers/swaps")),he=s(e("./account-import-strategies")),me=s(e("./lib/seed-phrase-verifier")),ge=s(e("./controllers/metametrics")),be=e("./lib/segment"),ye=s(e("./lib/createMetaRPCHandler")),ve=e("./controllers/permissions");function _e(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_e=function(e){return e?n:t})(e)}function we(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_e(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.METAMASK_CONTROLLER_EVENTS={UPDATE_BADGE:"updateBadge",APPROVAL_STATE_CHANGE:"ApprovalController:stateChange"};class Ce extends i.default{constructor(e){var n;super(),this.defaultMaxListeners=20,this.sendUpdate=(0,d.debounce)(this.privateSendUpdate.bind(this),200*U.MILLISECOND),this.opts=e,this.extension=e.browser,this.platform=e.platform,this.notificationManager=e.notificationManager;const r=e.initState||{},s=this.platform.getVersion();this.recordFirstTimeInfo(r),this.activeControllerConnections=0,this.getRequestAccountTabIds=e.getRequestAccountTabIds,this.getOpenMetamaskTabsIds=e.getOpenMetamaskTabsIds,this.controllerMessenger=new O.ControllerMessenger,this.store=new G.default({state:r,controllerMessenger:this.controllerMessenger,persist:!0}),this.connections={},this.createVaultMutex=new y.Mutex,this.extension.runtime.onInstalled.addListener((e=>{"update"===e.reason&&"8.1.0"===s&&this.platform.openExtensionInBrowser()})),this.approvalController=new O.ApprovalController({messenger:this.controllerMessenger.getRestricted({name:"ApprovalController"}),showApprovalRequest:e.showUserConfirmation}),this.networkController=new Z.default(r.NetworkController),this.networkController.setInfuraProjectId(e.infuraProjectId),this.initializeProvider(),this.provider=this.networkController.getProviderAndBlockTracker().provider,this.blockTracker=this.networkController.getProviderAndBlockTracker().blockTracker,this.preferencesController=new X.default({initState:r.PreferencesController,initLangCode:e.initLangCode,openPopup:e.openPopup,network:this.networkController,provider:this.provider,migrateAddressBookState:this.migrateAddressBookState.bind(this)}),this.tokensController=new O.TokensController({onPreferencesStateChange:this.preferencesController.store.subscribe.bind(this.preferencesController.store),onNetworkStateChange:this.networkController.store.subscribe.bind(this.networkController.store),config:{provider:this.provider},state:r.TokensController}),this.assetsContractController=new O.AssetsContractController({onPreferencesStateChange:e=>this.preferencesController.store.subscribe(e)},{provider:this.provider}),this.collectiblesController=new O.CollectiblesController({onPreferencesStateChange:this.preferencesController.store.subscribe.bind(this.preferencesController.store),onNetworkStateChange:this.networkController.store.subscribe.bind(this.networkController.store),getERC721AssetName:this.assetsContractController.getERC721AssetName.bind(this.assetsContractController),getERC721AssetSymbol:this.assetsContractController.getERC721AssetSymbol.bind(this.assetsContractController),getERC721TokenURI:this.assetsContractController.getERC721TokenURI.bind(this.assetsContractController),getERC721OwnerOf:this.assetsContractController.getERC721OwnerOf.bind(this.assetsContractController),getERC1155BalanceOf:this.assetsContractController.getERC1155BalanceOf.bind(this.assetsContractController),getERC1155TokenURI:this.assetsContractController.getERC1155TokenURI.bind(this.assetsContractController)},{},r.CollectiblesController),this.collectiblesController.setApiKey(t.env.OPENSEA_KEY),this.metaMetricsController=new ge.default({segment:be.segment,preferencesStore:this.preferencesController.store,onNetworkDidChange:this.networkController.on.bind(this.networkController,Z.NETWORK_EVENTS.NETWORK_DID_CHANGE),getNetworkIdentifier:this.networkController.getNetworkIdentifier.bind(this.networkController),getCurrentChainId:this.networkController.getCurrentChainId.bind(this.networkController),version:this.platform.getVersion(),environment:"other",initState:r.MetaMetricsController,captureException:T.captureException}),this.on("update",(e=>{this.metaMetricsController.handleMetaMaskStateUpdate(e)}));const o=this.controllerMessenger.getRestricted({name:"GasFeeController"}),i=R.GAS_API_BASE_URL;this.gasFeeController=new O.GasFeeController({interval:1e4,messenger:o,clientId:R.SWAPS_CLIENT_ID,getProvider:()=>this.networkController.getProviderAndBlockTracker().provider,onNetworkStateChange:this.networkController.on.bind(this.networkController,Z.NETWORK_EVENTS.NETWORK_DID_CHANGE),getCurrentNetworkEIP1559Compatibility:this.networkController.getEIP1559Compatibility.bind(this.networkController),getCurrentAccountEIP1559Compatibility:this.getCurrentAccountEIP1559Compatibility.bind(this),legacyAPIEndpoint:`${i}/networks/<chain_id>/gasPrices`,EIP1559APIEndpoint:`${i}/networks/<chain_id>/suggestedGasFees`,getCurrentNetworkLegacyGasAPICompatibility:()=>{const e=this.networkController.getCurrentChainId();return t.env.IN_TEST||e===x.MAINNET_CHAIN_ID},getChainId:()=>t.env.IN_TEST?x.MAINNET_CHAIN_ID:this.networkController.getCurrentChainId()}),this.qrHardwareKeyring=new C.MetaMaskKeyring,this.appStateController=new ee.default({addUnlockListener:this.on.bind(this,"unlock"),isUnlocked:this.isUnlocked.bind(this),initState:r.AppStateController,onInactiveTimeout:()=>this.setLocked(),showUnlockRequest:e.showUserConfirmation,preferencesStore:this.preferencesController.store,qrHardwareStore:this.qrHardwareKeyring.getMemStore()});const a=this.controllerMessenger.getRestricted({name:"CurrencyRateController"});this.currencyRateController=new O.CurrencyRateController({includeUSDRate:!0,messenger:a,state:r.CurrencyController});const c=this.controllerMessenger.getRestricted({name:"TokenListController"});this.tokenListController=new O.TokenListController({chainId:(0,F.hexToDecimal)(this.networkController.getCurrentChainId()),useStaticTokenList:!this.preferencesController.store.getState().useTokenDetection,onNetworkStateChange:e=>this.networkController.store.subscribe((t=>{const n=ke(ke({},t),{},{provider:ke(ke({},t.provider),{},{chainId:(0,F.hexToDecimal)(t.provider.chainId)})});return e(n)})),onPreferencesStateChange:e=>this.preferencesController.store.subscribe((t=>{const n=ke(ke({},t),{},{useStaticTokenList:!this.preferencesController.store.getState().useTokenDetection});return e(n)})),messenger:c,state:r.TokenListController}),this.phishingController=new O.PhishingController,this.notificationController=new O.NotificationController({allNotifications:N.UI_NOTIFICATIONS},r.NotificationController),this.tokenRatesController=new O.TokenRatesController({onTokensStateChange:e=>this.tokensController.subscribe(e),onCurrencyRateStateChange:e=>this.controllerMessenger.subscribe(`${this.currencyRateController.name}:stateChange`,e),onNetworkStateChange:e=>this.networkController.store.subscribe((t=>{const n=ke(ke({},t),{},{provider:ke(ke({},t.provider),{},{chainId:(0,F.hexToDecimal)(t.provider.chainId)})});return e(n)}))}),this.ensController=new J.default({provider:this.provider,getCurrentChainId:this.networkController.getCurrentChainId.bind(this.networkController),onNetworkDidChange:this.networkController.on.bind(this.networkController,Z.NETWORK_EVENTS.NETWORK_DID_CHANGE)}),this.incomingTransactionsController=new oe.default({blockTracker:this.blockTracker,onNetworkDidChange:this.networkController.on.bind(this.networkController,Z.NETWORK_EVENTS.NETWORK_DID_CHANGE),getCurrentChainId:this.networkController.getCurrentChainId.bind(this.networkController),preferencesController:this.preferencesController,initState:r.IncomingTransactionsController}),this.accountTracker=new H.default({provider:this.provider,blockTracker:this.blockTracker,getCurrentChainId:this.networkController.getCurrentChainId.bind(this.networkController)}),this.on("controllerConnectionChanged",(e=>{e>0?(this.accountTracker.start(),this.incomingTransactionsController.start(),this.currencyRateController.start(),this.tokenListController.start()):(this.accountTracker.stop(),this.incomingTransactionsController.stop(),this.currencyRateController.stop(),this.tokenListController.stop())})),this.cachedBalancesController=new te.default({accountTracker:this.accountTracker,getCurrentChainId:this.networkController.getCurrentChainId.bind(this.networkController),initState:r.CachedBalancesController}),this.onboardingController=new re.default({initState:r.OnboardingController}),this.tokensController.hub.on("pendingSuggestedAsset",(async()=>{await e.openPopup()}));const u=[w.default,E.default,k.default,C.MetaMaskKeyring];this.keyringController=new g.default({keyringTypes:u,initState:r.KeyringController,encryptor:e.encryptor||undefined}),this.keyringController.memStore.subscribe((e=>this._onKeyringControllerUpdate(e))),this.keyringController.on("unlock",(()=>this._onUnlock())),this.keyringController.on("lock",(()=>this._onLock()));const l=()=>this.preferencesController.store.getState().identities;this.permissionController=new O.PermissionController({messenger:this.controllerMessenger.getRestricted({name:"PermissionController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:hasRequest`,`${this.approvalController.name}:acceptRequest`,`${this.approvalController.name}:rejectRequest`]}),state:r.PermissionController,caveatSpecifications:(0,ve.getCaveatSpecifications)({getIdentities:l}),permissionSpecifications:ke({},(0,ve.getPermissionSpecifications)({getIdentities:l,getAllAccounts:this.keyringController.getAccounts.bind(this.keyringController),captureKeyringTypesWithMissingIdentities:(e={},t=[])=>{const n=t.filter((t=>!e[t])).map((e=>{var t;return null===(t=this.keyringController.getKeyringForAccount(e))||void 0===t?void 0:t.type})),r=Object.keys(e||{}).length,s=Object.keys(this.accountTracker.store.getState().accounts||{}).length;(0,T.captureException)(new Error(`Attempt to get permission specifications failed because their were ${t.length} accounts, but ${r} identities, and the ${n} keyrings included accounts with missing identities. Meanwhile, there are ${s} accounts in the account tracker.`))}})),unrestrictedMethods:ve.unrestrictedMethods}),this.permissionLogController=new ve.PermissionLogController({restrictedMethods:new Set(Object.keys(I.RestrictedMethods)),initState:r.PermissionLogController}),this.subjectMetadataController=new O.SubjectMetadataController({messenger:this.controllerMessenger.getRestricted({name:"SubjectMetadataController",allowedActions:[`${this.permissionController.name}:hasPermissions`]}),state:r.SubjectMetadataController,subjectCacheLimit:100}),this.detectTokensController=new fe.default({preferences:this.preferencesController,tokensController:this.tokensController,network:this.networkController,keyringMemStore:this.keyringController.memStore,tokenList:this.tokenListController}),this.addressBookController=new O.AddressBookController(undefined,r.AddressBookController),this.alertController=new ne.default({initState:r.AlertController,preferencesStore:this.preferencesController.store}),this.threeBoxController=new se.default({preferencesController:this.preferencesController,addressBookController:this.addressBookController,keyringController:this.keyringController,initState:r.ThreeBoxController,getKeyringControllerState:this.keyringController.memStore.getState.bind(this.keyringController.memStore),version:s,trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.txController=new de.default({initState:r.TransactionController||r.TransactionManager,getPermittedAccounts:this.getPermittedAccounts.bind(this),getProviderConfig:this.networkController.getProviderConfig.bind(this.networkController),getCurrentNetworkEIP1559Compatibility:this.networkController.getEIP1559Compatibility.bind(this.networkController),getCurrentAccountEIP1559Compatibility:this.getCurrentAccountEIP1559Compatibility.bind(this),networkStore:this.networkController.networkStore,getCurrentChainId:this.networkController.getCurrentChainId.bind(this.networkController),preferencesStore:this.preferencesController.store,txHistoryLimit:60,signTransaction:this.keyringController.signTransaction.bind(this.keyringController),provider:this.provider,blockTracker:this.blockTracker,createEventFragment:this.metaMetricsController.createEventFragment.bind(this.metaMetricsController),updateEventFragment:this.metaMetricsController.updateEventFragment.bind(this.metaMetricsController),finalizeEventFragment:this.metaMetricsController.finalizeEventFragment.bind(this.metaMetricsController),getEventFragmentById:this.metaMetricsController.getEventFragmentById.bind(this.metaMetricsController),trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getParticipateInMetrics:()=>this.metaMetricsController.state.participateInMetaMetrics,getEIP1559GasFeeEstimates:this.gasFeeController.fetchGasFeeEstimates.bind(this.gasFeeController),getExternalPendingTransactions:this.getExternalPendingTransactions.bind(this),getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getTokenStandardAndDetails:this.assetsContractController.getTokenStandardAndDetails.bind(this.assetsContractController)}),this.txController.on("newUnapprovedTx",(()=>e.showUserConfirmation())),this.txController.on("tx:status-update",(async(e,t)=>{if(t===A.TRANSACTION_STATUSES.CONFIRMED||t===A.TRANSACTION_STATUSES.FAILED){const t=this.txController.txStateManager.getTransaction(e),o=this.preferencesController.getFrequentRpcListDetail();let i={};if(t.chainId){var n;const e=o.find((e=>t.chainId===e.chainId));i=null!==(n=null==e?void 0:e.rpcPrefs)&&void 0!==n?n:{}}this.platform.showTransactionNotification(t,i);const{txReceipt:a}=t;if(t.type===A.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER_FROM&&t.txParams!==undefined){var r;const{data:e,to:n,from:s}=t.txParams,{chainId:o}=t,i=(0,q.parseStandardTokenTransactionData)(e),a=(0,B.getTokenValueParam)(i),{allCollectibles:c}=this.collectiblesController.state,u=null==c||null===(r=c[s])||void 0===r?void 0:r[o].find((({address:e,tokenId:t})=>(0,z.isEqualCaseInsensitive)(e,n)&&t===a));u&&this.collectiblesController.checkAndUpdateSingleCollectibleOwnershipStatus(u,!1,{userAddress:s,chainId:o})}const c=await this.getState();var s;if(a&&"0x0"===a.status)this.metaMetricsController.trackEvent({event:"Tx Status Update: On-Chain Failure",category:"Background",properties:{action:"Transactions",errorMessage:null===(s=t.simulationFails)||void 0===s?void 0:s.reason,numberOfTokens:c.tokens.length,numberOfAccounts:Object.keys(c.accounts).length}},{matomoEvent:!0})}})),this.networkController.on(Z.NETWORK_EVENTS.NETWORK_DID_CHANGE,(async()=>{const{ticker:e}=this.networkController.getProviderConfig();try{await this.currencyRateController.setNativeCurrency(e)}catch(e){console.error(e)}})),this.networkController.lookupNetwork(),this.messageManager=new ie.default({metricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.personalMessageManager=new ue.default({metricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.decryptMessageManager=new ae.default({metricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.encryptionPublicKeyManager=new ce.default({metricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.typedMessageManager=new le.default({getCurrentChainId:this.networkController.getCurrentChainId.bind(this.networkController),metricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.swapsController=new pe.default({getBufferedGasLimit:this.txController.txGasUtil.getBufferedGasLimit.bind(this.txController.txGasUtil),networkController:this.networkController,provider:this.provider,getProviderConfig:this.networkController.getProviderConfig.bind(this.networkController),getTokenRatesState:()=>this.tokenRatesController.state,getCurrentChainId:this.networkController.getCurrentChainId.bind(this.networkController),getEIP1559GasFeeEstimates:this.gasFeeController.fetchGasFeeEstimates.bind(this.gasFeeController)}),this.smartTransactionsController=new P.default({onNetworkStateChange:this.networkController.store.subscribe.bind(this.networkController.store),getNetwork:this.networkController.getNetworkState.bind(this.networkController),getNonceLock:this.txController.nonceTracker.getNonceLock.bind(this.txController.nonceTracker),confirmExternalTransaction:this.txController.confirmExternalTransaction.bind(this.txController),provider:this.provider,trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)},undefined,r.SmartTransactionsController),this.networkController.on(Z.NETWORK_EVENTS.NETWORK_DID_CHANGE,(()=>{this.accountTracker._updateAccounts()})),this.networkController.on(Z.NETWORK_EVENTS.NETWORK_WILL_CHANGE,(()=>{this.txController.txStateManager.clearUnapprovedTxs(),this.encryptionPublicKeyManager.clearUnapproved(),this.personalMessageManager.clearUnapproved(),this.typedMessageManager.clearUnapproved(),this.decryptMessageManager.clearUnapproved(),this.messageManager.clearUnapproved()})),this.on("update",(e=>this._onStateUpdate(e))),this.store.updateStructure({AppStateController:this.appStateController.store,TransactionController:this.txController.store,KeyringController:this.keyringController.store,PreferencesController:this.preferencesController.store,MetaMetricsController:this.metaMetricsController.store,AddressBookController:this.addressBookController,CurrencyController:this.currencyRateController,NetworkController:this.networkController.store,CachedBalancesController:this.cachedBalancesController.store,AlertController:this.alertController.store,OnboardingController:this.onboardingController.store,IncomingTransactionsController:this.incomingTransactionsController.store,PermissionController:this.permissionController,PermissionLogController:this.permissionLogController.store,SubjectMetadataController:this.subjectMetadataController,ThreeBoxController:this.threeBoxController.store,NotificationController:this.notificationController,GasFeeController:this.gasFeeController,TokenListController:this.tokenListController,TokensController:this.tokensController,SmartTransactionsController:this.smartTransactionsController,CollectiblesController:this.collectiblesController}),this.memStore=new G.default({config:{AppStateController:this.appStateController.store,NetworkController:this.networkController.store,AccountTracker:this.accountTracker.store,TxController:this.txController.memStore,CachedBalancesController:this.cachedBalancesController.store,TokenRatesController:this.tokenRatesController,MessageManager:this.messageManager.memStore,PersonalMessageManager:this.personalMessageManager.memStore,DecryptMessageManager:this.decryptMessageManager.memStore,EncryptionPublicKeyManager:this.encryptionPublicKeyManager.memStore,TypesMessageManager:this.typedMessageManager.memStore,KeyringController:this.keyringController.memStore,PreferencesController:this.preferencesController.store,MetaMetricsController:this.metaMetricsController.store,AddressBookController:this.addressBookController,CurrencyController:this.currencyRateController,AlertController:this.alertController.store,OnboardingController:this.onboardingController.store,IncomingTransactionsController:this.incomingTransactionsController.store,PermissionController:this.permissionController,PermissionLogController:this.permissionLogController.store,SubjectMetadataController:this.subjectMetadataController,ThreeBoxController:this.threeBoxController.store,SwapsController:this.swapsController.store,EnsController:this.ensController.store,ApprovalController:this.approvalController,NotificationController:this.notificationController,GasFeeController:this.gasFeeController,TokenListController:this.tokenListController,TokensController:this.tokensController,SmartTransactionsController:this.smartTransactionsController,CollectiblesController:this.collectiblesController},controllerMessenger:this.controllerMessenger}),this.memStore.subscribe(this.sendUpdate.bind(this));const f=null===(n={})||void 0===n?void 0:n.PASSWORD;f&&!this.isUnlocked()&&this.onboardingController.store.getState().completedOnboarding&&this.submitPassword(f),this.extension.runtime.getPlatformInfo().then((({os:e})=>{this.appStateController.setBrowserEnvironment(e,this.extension.runtime.getBrowserInfo===undefined?"chrome":"firefox")})),this.setupControllerEventSubscriptions(),this.publicConfigStore=this.createPublicConfigStore()}setupControllerEventSubscriptions(){const e=async(e,t)=>{this.isUnlocked()&&this.notifyConnections(e,{method:ve.NOTIFICATION_NAMES.accountsChanged,params:t.length<2?t:await this.getPermittedAccounts(e)}),this.permissionLogController.updateAccountsHistory(e,t)};let t;this.preferencesController.store.subscribe((async({selectedAddress:n})=>{if(n&&n!==t){t=n;const r=(0,ve.getPermittedAccountsByOrigin)(this.permissionController.state);for(const[t,s]of r.entries())s.includes(n)&&e(t,s)}})),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,(async(t,n)=>{const r=(0,ve.getChangedAccounts)(t,n);for(const[t,n]of r.entries())e(t,n)}),ve.getPermittedAccountsByOrigin)}initializeProvider(){const e=this.platform.getVersion(),t={static:{eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`},version:e,getAccounts:async({origin:e})=>{if("metamask"===e){const e=this.preferencesController.getSelectedAddress();return e?[e]:[]}return this.isUnlocked()?await this.getPermittedAccounts(e):[]},processTransaction:this.newUnapprovedTransaction.bind(this),processEthSignMessage:this.newUnsignedMessage.bind(this),processTypedMessage:this.newUnsignedTypedMessage.bind(this),processTypedMessageV3:this.newUnsignedTypedMessage.bind(this),processTypedMessageV4:this.newUnsignedTypedMessage.bind(this),processPersonalMessage:this.newUnsignedPersonalMessage.bind(this),processDecryptMessage:this.newRequestDecryptMessage.bind(this),processEncryptionPublicKey:this.newRequestEncryptionPublicKey.bind(this),getPendingNonce:this.getPendingNonce.bind(this),getPendingTransactionByHash:e=>this.txController.getTransactions({searchCriteria:{hash:e,status:A.TRANSACTION_STATUSES.SUBMITTED}})[0]};return this.networkController.initializeProvider(t)}createPublicConfigStore(){const e=new c.ObservableStore,{networkController:t}=this;function n(n){const r=t.getCurrentChainId();"loading"!==n.network&&e.putState(function(e,{isUnlocked:t,network:n}){return{isUnlocked:t,chainId:e,networkVersion:n}}(r,n))}return this.on("update",n),n(this.getState()),e}async getProviderState(e){return ke(ke({isUnlocked:this.isUnlocked()},this.getProviderNetworkState()),{},{accounts:await this.getPermittedAccounts(e)})}getProviderNetworkState(e){const{network:t}=e||this.getState();return{chainId:this.networkController.getCurrentChainId(),networkVersion:t}}getState(){const{vault:e}=this.keyringController.store.getState();return ke({isInitialized:Boolean(e)},this.memStore.getFlatState())}getApi(){const{addressBookController:e,alertController:t,approvalController:n,appStateController:r,collectiblesController:s,collectibleDetectionController:o,currencyRateController:i,detectTokensController:a,ensController:c,gasFeeController:u,keyringController:l,metaMetricsController:d,networkController:f,notificationController:p,onboardingController:h,permissionController:m,preferencesController:g,qrHardwareKeyring:y,swapsController:v,threeBoxController:_,tokensController:w,smartTransactionsController:E,txController:k}=this;return ke(ke({getState:this.getState.bind(this),setCurrentCurrency:i.setCurrentCurrency.bind(i),setUseBlockie:g.setUseBlockie.bind(g),setUseNonceField:g.setUseNonceField.bind(g),setUsePhishDetect:g.setUsePhishDetect.bind(g),setUseTokenDetection:g.setUseTokenDetection.bind(g),setUseCollectibleDetection:g.setUseCollectibleDetection.bind(g),setOpenSeaEnabled:g.setOpenSeaEnabled.bind(g),setIpfsGateway:g.setIpfsGateway.bind(g),setParticipateInMetaMetrics:d.setParticipateInMetaMetrics.bind(d),setCurrentLocale:g.setCurrentLocale.bind(g),markPasswordForgotten:this.markPasswordForgotten.bind(this),unMarkPasswordForgotten:this.unMarkPasswordForgotten.bind(this),safelistPhishingDomain:this.safelistPhishingDomain.bind(this),getRequestAccountTabIds:this.getRequestAccountTabIds,getOpenMetamaskTabsIds:this.getOpenMetamaskTabsIds,markNotificationPopupAsAutomaticallyClosed:()=>this.notificationManager.markAsAutomaticallyClosed(),addNewAccount:this.addNewAccount.bind(this),verifySeedPhrase:this.verifySeedPhrase.bind(this),resetAccount:this.resetAccount.bind(this),removeAccount:this.removeAccount.bind(this),importAccountWithStrategy:this.importAccountWithStrategy.bind(this),connectHardware:this.connectHardware.bind(this),forgetDevice:this.forgetDevice.bind(this),checkHardwareStatus:this.checkHardwareStatus.bind(this),unlockHardwareWalletAccount:this.unlockHardwareWalletAccount.bind(this),setLedgerTransportPreference:this.setLedgerTransportPreference.bind(this),attemptLedgerTransportCreation:this.attemptLedgerTransportCreation.bind(this),establishLedgerTransportPreference:this.establishLedgerTransportPreference.bind(this),submitQRHardwareCryptoHDKey:y.submitCryptoHDKey.bind(y),submitQRHardwareCryptoAccount:y.submitCryptoAccount.bind(y),cancelSyncQRHardware:y.cancelSync.bind(y),submitQRHardwareSignature:y.submitSignature.bind(y),cancelQRHardwareSignRequest:y.cancelSignRequest.bind(y),fetchInfoToSync:this.fetchInfoToSync.bind(this),submitPassword:this.submitPassword.bind(this),verifyPassword:this.verifyPassword.bind(this),setProviderType:f.setProviderType.bind(f),rollbackToPreviousProvider:f.rollbackToPreviousProvider.bind(f),setCustomRpc:this.setCustomRpc.bind(this),updateAndSetCustomRpc:this.updateAndSetCustomRpc.bind(this),delCustomRpc:this.delCustomRpc.bind(this),setSelectedAddress:g.setSelectedAddress.bind(g),addToken:w.addToken.bind(w),rejectWatchAsset:w.rejectWatchAsset.bind(w),acceptWatchAsset:w.acceptWatchAsset.bind(w),updateTokenType:w.updateTokenType.bind(w),removeToken:w.removeAndIgnoreToken.bind(w),setAccountLabel:g.setAccountLabel.bind(g),setFeatureFlag:g.setFeatureFlag.bind(g),setPreference:g.setPreference.bind(g),addKnownMethodData:g.addKnownMethodData.bind(g),setDismissSeedBackUpReminder:g.setDismissSeedBackUpReminder.bind(g),setAdvancedGasFee:g.setAdvancedGasFee.bind(g),setEIP1559V2Enabled:g.setEIP1559V2Enabled.bind(g),setTheme:g.setTheme.bind(g),getTokenStandardAndDetails:this.getTokenStandardAndDetails.bind(this),addCollectible:s.addCollectible.bind(s),addCollectibleVerifyOwnership:s.addCollectibleVerifyOwnership.bind(s),removeAndIgnoreCollectible:s.removeAndIgnoreCollectible.bind(s),removeCollectible:s.removeCollectible.bind(s),checkAndUpdateAllCollectiblesOwnershipStatus:s.checkAndUpdateAllCollectiblesOwnershipStatus.bind(s),checkAndUpdateSingleCollectibleOwnershipStatus:s.checkAndUpdateSingleCollectibleOwnershipStatus.bind(s),isCollectibleOwner:s.isCollectibleOwner.bind(s),setAddressBook:e.set.bind(e),removeFromAddressBook:e.delete.bind(e),setLastActiveTime:r.setLastActiveTime.bind(r),setDefaultHomeActiveTabName:r.setDefaultHomeActiveTabName.bind(r),setConnectedStatusPopoverHasBeenShown:r.setConnectedStatusPopoverHasBeenShown.bind(r),setRecoveryPhraseReminderHasBeenShown:r.setRecoveryPhraseReminderHasBeenShown.bind(r),setRecoveryPhraseReminderLastShown:r.setRecoveryPhraseReminderLastShown.bind(r),setShowTestnetMessageInDropdown:r.setShowTestnetMessageInDropdown.bind(r),setCollectiblesDetectionNoticeDismissed:r.setCollectiblesDetectionNoticeDismissed.bind(r),setEnableEIP1559V2NoticeDismissed:r.setEnableEIP1559V2NoticeDismissed.bind(r),updateCollectibleDropDownState:r.updateCollectibleDropDownState.bind(r),tryReverseResolveAddress:c.reverseResolveAddress.bind(c),setLocked:this.setLocked.bind(this),createNewVaultAndKeychain:this.createNewVaultAndKeychain.bind(this),createNewVaultAndRestore:this.createNewVaultAndRestore.bind(this),exportAccount:l.exportAccount.bind(l),cancelTransaction:k.cancelTransaction.bind(k),updateTransaction:k.updateTransaction.bind(k),updateAndApproveTransaction:k.updateAndApproveTransaction.bind(k),approveTransactionsWithSameNonce:k.approveTransactionsWithSameNonce.bind(k),createCancelTransaction:this.createCancelTransaction.bind(this),createSpeedUpTransaction:this.createSpeedUpTransaction.bind(this),estimateGas:this.estimateGas.bind(this),getNextNonce:this.getNextNonce.bind(this),addUnapprovedTransaction:k.addUnapprovedTransaction.bind(k),createTransactionEventFragment:k.createTransactionEventFragment.bind(k),getTransactions:k.getTransactions.bind(k),updateEditableParams:k.updateEditableParams.bind(k),updateTransactionGasFees:k.updateTransactionGasFees.bind(k),updateSwapApprovalTransaction:k.updateSwapApprovalTransaction.bind(k),updateSwapTransaction:k.updateSwapTransaction.bind(k),updatePreviousGasParams:k.updatePreviousGasParams.bind(k),signMessage:this.signMessage.bind(this),cancelMessage:this.cancelMessage.bind(this),signPersonalMessage:this.signPersonalMessage.bind(this),cancelPersonalMessage:this.cancelPersonalMessage.bind(this),signTypedMessage:this.signTypedMessage.bind(this),cancelTypedMessage:this.cancelTypedMessage.bind(this),decryptMessage:this.decryptMessage.bind(this),decryptMessageInline:this.decryptMessageInline.bind(this),cancelDecryptMessage:this.cancelDecryptMessage.bind(this),encryptionPublicKey:this.encryptionPublicKey.bind(this),cancelEncryptionPublicKey:this.cancelEncryptionPublicKey.bind(this),setSeedPhraseBackedUp:h.setSeedPhraseBackedUp.bind(h),completeOnboarding:h.completeOnboarding.bind(h),setFirstTimeFlowType:h.setFirstTimeFlowType.bind(h),setAlertEnabledness:t.setAlertEnabledness.bind(t),setUnconnectedAccountAlertShown:t.setUnconnectedAccountAlertShown.bind(t),setWeb3ShimUsageAlertDismissed:t.setWeb3ShimUsageAlertDismissed.bind(t),setThreeBoxSyncingPermission:_.setThreeBoxSyncingPermission.bind(_),restoreFromThreeBox:_.restoreFromThreeBox.bind(_),setShowRestorePromptToFalse:_.setShowRestorePromptToFalse.bind(_),getThreeBoxLastUpdated:_.getLastUpdated.bind(_),turnThreeBoxSyncingOn:_.turnThreeBoxSyncingOn.bind(_),initializeThreeBox:this.initializeThreeBox.bind(this),removePermissionsFor:m.revokePermissions.bind(m),approvePermissionsRequest:m.acceptPermissionsRequest.bind(m),rejectPermissionsRequest:m.rejectPermissionsRequest.bind(m)},(0,ve.getPermissionBackgroundApiMethods)(m)),{},{fetchAndSetQuotes:v.fetchAndSetQuotes.bind(v),setSelectedQuoteAggId:v.setSelectedQuoteAggId.bind(v),resetSwapsState:v.resetSwapsState.bind(v),setSwapsTokens:v.setSwapsTokens.bind(v),clearSwapsQuotes:v.clearSwapsQuotes.bind(v),setApproveTxId:v.setApproveTxId.bind(v),setTradeTxId:v.setTradeTxId.bind(v),setSwapsTxGasPrice:v.setSwapsTxGasPrice.bind(v),setSwapsTxGasLimit:v.setSwapsTxGasLimit.bind(v),setSwapsTxMaxFeePerGas:v.setSwapsTxMaxFeePerGas.bind(v),setSwapsTxMaxFeePriorityPerGas:v.setSwapsTxMaxFeePriorityPerGas.bind(v),safeRefetchQuotes:v.safeRefetchQuotes.bind(v),stopPollingForQuotes:v.stopPollingForQuotes.bind(v),setBackgroundSwapRouteState:v.setBackgroundSwapRouteState.bind(v),resetPostFetchState:v.resetPostFetchState.bind(v),setSwapsErrorKey:v.setSwapsErrorKey.bind(v),setInitialGasEstimate:v.setInitialGasEstimate.bind(v),setCustomApproveTxData:v.setCustomApproveTxData.bind(v),setSwapsLiveness:v.setSwapsLiveness.bind(v),setSwapsFeatureFlags:v.setSwapsFeatureFlags.bind(v),setSwapsUserFeeLevel:v.setSwapsUserFeeLevel.bind(v),setSwapsQuotesPollingLimitEnabled:v.setSwapsQuotesPollingLimitEnabled.bind(v),setSmartTransactionsOptInStatus:E.setOptInState.bind(E),fetchSmartTransactionFees:E.getFees.bind(E),estimateSmartTransactionsGas:E.estimateGas.bind(E),submitSignedTransactions:E.submitSignedTransactions.bind(E),cancelSmartTransaction:E.cancelSmartTransaction.bind(E),fetchSmartTransactionsLiveness:E.fetchLiveness.bind(E),updateSmartTransaction:E.updateSmartTransaction.bind(E),setStatusRefreshInterval:E.setStatusRefreshInterval.bind(E),trackMetaMetricsEvent:d.trackEvent.bind(d),trackMetaMetricsPage:d.trackPage.bind(d),createEventFragment:d.createEventFragment.bind(d),updateEventFragment:d.updateEventFragment.bind(d),finalizeEventFragment:d.finalizeEventFragment.bind(d),resolvePendingApproval:n.accept.bind(n),rejectPendingApproval:async(e,t)=>{n.reject(e,new b.EthereumRpcError(t.code,t.message,t.data))},updateViewedNotifications:p.updateViewed.bind(p),getGasFeeEstimatesAndStartPolling:u.getGasFeeEstimatesAndStartPolling.bind(u),disconnectGasFeeEstimatePoller:u.disconnectPoller.bind(u),getGasFeeTimeEstimate:u.getTimeEstimate.bind(u),addPollingTokenToAppState:r.addPollingToken.bind(r),removePollingTokenFromAppState:r.removePollingToken.bind(r),detectNewTokens:a.detectNewTokens.bind(a),detectCollectibles:null})}async getTokenStandardAndDetails(e,t,n){var r,s;const o=await this.assetsContractController.getTokenStandardAndDetails(e,t,n);return ke(ke({},o),{},{decimals:null==o||null===(r=o.decimals)||void 0===r?void 0:r.toString(10),balance:null==o||null===(s=o.balance)||void 0===s?void 0:s.toString(10)})}async createNewVaultAndKeychain(e){const t=await this.createVaultMutex.acquire();try{let n;if((await this.keyringController.getAccounts()).length>0)n=await this.keyringController.fullUpdate();else{n=await this.keyringController.createNewVaultAndKeychain(e);const t=await this.keyringController.getAccounts();this.preferencesController.setAddresses(t),this.selectFirstIdentity()}return n}finally{t()}}async createNewVaultAndRestore(e,t){const n=await this.createVaultMutex.acquire();try{let s,o;const i=r.from(t),{keyringController:a}=this;this.preferencesController.setAddresses([]),this.permissionController.clearState(),this.accountTracker.clearAccounts(),this.cachedBalancesController.clearCachedBalances(),this.txController.txStateManager.clearUnapprovedTxs();const c=await a.createNewVaultAndRestore(e,i),u=new S.default(this.provider);s=await a.getAccounts(),o=await this.getBalance(s[s.length-1],u);const l=a.getKeyringsByType("HD Key Tree")[0];if(!l)throw new Error("MetamaskController - No HD Key Tree found");for(;"0x0"!==o;)await a.addNewAccount(l),s=await a.getAccounts(),o=await this.getBalance(s[s.length-1],u);s.length>1&&"0x0"===o&&(await this.removeAccount(s[s.length-1]),s=await a.getAccounts());const d=this.preferencesController.getLedgerTransportPreference();return this.setLedgerTransportPreference(d),this.preferencesController.setAddresses(s),this.selectFirstIdentity(),c}finally{n()}}getBalance(e,t){return new Promise(((n,r)=>{const s=this.accountTracker.store.getState().accounts[e];s&&s.balance?n(s.balance):t.getBalance(e,((e,t)=>{e?(r(e),_.default.error(e)):n(t||"0x0")}))}))}async fetchInfoToSync(){const{currentLocale:e,frequentRpcList:t,identities:n,selectedAddress:r,useTokenDetection:s}=this.preferencesController.store.getState(),{tokenList:o}=this.tokenListController.state,i={currentLocale:e,frequentRpcList:t,identities:n,selectedAddress:r},{allTokens:a,allIgnoredTokens:c}=this.tokensController.state,u={};Object.keys(a).forEach((e=>{u[e]={},Object.keys(a[e]).forEach((t=>{const n=(0,j.toChecksumHexAddress)(t);u[e][n]=a[e][n].filter((e=>{if(e.isERC721===undefined){const t=s?e.address.toLowerCase():e.address;if(o[t]!==undefined)return!0}else if(!1===e.isERC721)return!0;return!1}))}))}));const l=this.keyringController.getKeyringsByType("HD Key Tree")[0],d=this.keyringController.getKeyringsByType("Simple Key Pair"),f=await l.getAccounts(),p=(await Promise.all(d.map((e=>e.getAccounts())))).reduce(((e,t)=>[...e,...t]),[]),h={hd:f.filter(((e,t)=>f.indexOf(e)===t)).map((e=>(0,j.toChecksumHexAddress)(e))),simpleKeyPair:p.filter(((e,t)=>p.indexOf(e)===t)).map((e=>(0,j.toChecksumHexAddress)(e))),ledger:[],trezor:[],lattice:[]};let{transactions:m}=this.txController.store.getState();return m=Object.values(m).filter((e=>{const t=(0,j.toChecksumHexAddress)(e.txParams.from);return h.hd.includes(t)})),{accounts:h,preferences:i,transactions:m,tokens:{allTokens:u,allIgnoredTokens:c},network:this.networkController.store.getState()}}async submitPassword(e){await this.keyringController.submitPassword(e);try{await this.blockTracker.checkForLatestBlock()}catch(e){_.default.error("Error while unlocking extension.",e)}try{const e=this.threeBoxController.getThreeBoxSyncingState();e&&!this.threeBoxController.box?(this.threeBoxController.init(),this.threeBoxController.turnThreeBoxSyncingOn()):e&&this.threeBoxController.box&&this.threeBoxController.turnThreeBoxSyncingOn()}catch(e){_.default.error("Error while unlocking extension.",e)}const t=this.preferencesController.getLedgerTransportPreference();return this.setLedgerTransportPreference(t),this.keyringController.fullUpdate()}async verifyPassword(e){await this.keyringController.verifyPassword(e)}selectFirstIdentity(){const{identities:e}=this.preferencesController.store.getState(),t=Object.keys(e)[0];this.preferencesController.setSelectedAddress(t)}getPrimaryKeyringMnemonic(){const e=this.keyringController.getKeyringsByType("HD Key Tree")[0];if(!e.mnemonic)throw new Error("Primary keyring mnemonic unavailable.");return e.mnemonic}async getKeyringForDevice(e,t=null){let n=null;switch(e){case D.DEVICE_NAMES.TREZOR:n=w.default.type;break;case D.DEVICE_NAMES.LEDGER:n=E.default.type;break;case D.DEVICE_NAMES.QR:n=C.MetaMaskKeyring.type;break;case D.DEVICE_NAMES.LATTICE:n=k.default.type;break;default:throw new Error("MetamaskController:getKeyringForDevice - Unknown device")}let r=await this.keyringController.getKeyringsByType(n)[0];if(r||(r=await this.keyringController.addNewKeyring(n)),t&&r.setHdPath&&r.setHdPath(t),e===D.DEVICE_NAMES.LATTICE&&(r.appName="MetaMask"),e===D.DEVICE_NAMES.TREZOR){const e=r.getModel();this.appStateController.setTrezorModel(e)}return r.network=this.networkController.getProviderConfig().type,r}async attemptLedgerTransportCreation(){const e=await this.getKeyringForDevice(D.DEVICE_NAMES.LEDGER);return await e.attemptMakeApp()}async establishLedgerTransportPreference(){const e=this.preferencesController.getLedgerTransportPreference();return await this.setLedgerTransportPreference(e)}async connectHardware(e,t,n){const r=await this.getKeyringForDevice(e,n);let s=[];switch(t){case-1:s=await r.getPreviousPage();break;case 1:s=await r.getNextPage();break;default:s=await r.getFirstPage()}const o=await this.keyringController.getAccounts(),i=[...new Set(o.concat(s.map((e=>e.address.toLowerCase()))))];return this.accountTracker.syncWithAddresses(i),s}async checkHardwareStatus(e,t){return(await this.getKeyringForDevice(e,t)).isUnlocked()}async forgetDevice(e){return(await this.getKeyringForDevice(e)).forgetDevice(),!0}async getAccountType(e){switch((await this.keyringController.getKeyringForAccount(e)).type){case D.KEYRING_TYPES.TREZOR:case D.KEYRING_TYPES.LATTICE:case D.KEYRING_TYPES.QR:case D.KEYRING_TYPES.LEDGER:return"hardware";case D.KEYRING_TYPES.IMPORTED:return"imported";default:return"MetaMask"}}async getDeviceModel(e){const t=await this.keyringController.getKeyringForAccount(e);switch(t.type){case D.KEYRING_TYPES.TREZOR:return t.getModel();case D.KEYRING_TYPES.QR:return t.getName();case D.KEYRING_TYPES.LEDGER:return D.DEVICE_NAMES.LEDGER;case D.KEYRING_TYPES.LATTICE:return D.DEVICE_NAMES.LATTICE;default:return"N/A"}}getAccountLabel(e,t,n){return`${e[0].toUpperCase()}${e.slice(1)} ${parseInt(t,10)+1} ${n||""}`.trim()}async unlockHardwareWalletAccount(e,t,n,r){const s=await this.getKeyringForDevice(t,n);s.setAccountToUnlock(e);const o=await this.keyringController.getAccounts(),i=await this.keyringController.addNewAccount(s),a=await this.keyringController.getAccounts();this.preferencesController.setAddresses(a),a.forEach((n=>{if(!o.includes(n)){const o=this.getAccountLabel(t===D.DEVICE_NAMES.QR?s.getName():t,e,r);this.preferencesController.setAccountLabel(n,o),this.preferencesController.setSelectedAddress(n)}}));const{identities:c}=this.preferencesController.store.getState();return ke(ke({},i),{},{identities:c})}async addNewAccount(){const e=this.keyringController.getKeyringsByType("HD Key Tree")[0];if(!e)throw new Error("MetamaskController - No HD Key Tree found");const{keyringController:t}=this,n=await t.getAccounts(),r=await t.addNewAccount(e),s=await t.getAccounts();await this.verifySeedPhrase(),this.preferencesController.setAddresses(s),s.forEach((e=>{n.includes(e)||this.preferencesController.setSelectedAddress(e)}));const{identities:o}=this.preferencesController.store.getState();return ke(ke({},r),{},{identities:o})}async verifySeedPhrase(){const e=this.keyringController.getKeyringsByType("HD Key Tree")[0];if(!e)throw new Error("MetamaskController - No HD Key Tree found");const t=await e.serialize(),n=r.from(t.mnemonic),s=await e.getAccounts();if(s.length<1)throw new Error("MetamaskController - No accounts found");try{return await me.default.verifyAccounts(s,n),Array.from(n.values())}catch(e){throw _.default.error(e.message),e}}async resetAccount(){const e=this.preferencesController.getSelectedAddress();return this.txController.wipeTransactions(e),this.networkController.resetConnection(),e}async getPermittedAccounts(e){try{return await this.permissionController.executeRestrictedMethod(e,I.RestrictedMethods.eth_accounts)}catch(e){if(e.code===b.errorCodes.provider.unauthorized)return[];throw e}}removeAllAccountPermissions(e){this.permissionController.updatePermissionsByCaveat(I.CaveatTypes.restrictReturnedAccounts,(t=>ve.CaveatMutatorFactories[I.CaveatTypes.restrictReturnedAccounts].removeAccount(e,t)))}async removeAccount(e){return this.removeAllAccountPermissions(e),this.preferencesController.removeAddress(e),this.accountTracker.removeAccount([e]),await this.keyringController.removeAccount(e),e}async importAccountWithStrategy(e,t){const n=await he.default.importAccount(e,t),r=await this.keyringController.addNewKeyring("Simple Key Pair",[n]),s=await r.getAccounts(),o=await this.keyringController.getAccounts();this.preferencesController.setAddresses(o),await this.preferencesController.setSelectedAddress(s[0])}async newUnapprovedTransaction(e,t){return await this.txController.newUnapprovedTransaction(e,t)}async newUnsignedMessage(e,t){const n=(0,ie.normalizeMsgData)(e.data);let r;if(66!==n.length&&67!==n.length)throw b.ethErrors.rpc.invalidParams("eth_sign requires 32 byte message hash");return r=this.messageManager.addUnapprovedMessageAsync(e,t),this.sendUpdate(),this.opts.showUserConfirmation(),await r}async signMessage(e){_.default.info("MetaMaskController - signMessage");const t=e.metamaskId;try{const n=await this.messageManager.approveMessage(e),r=await this.keyringController.signMessage(n);return this.messageManager.setMsgStatusSigned(t,r),this.getState()}catch(e){throw _.default.info("MetaMaskController - eth_sign failed",e),this.messageManager.errorMessage(t,e),e}}cancelMessage(e){const{messageManager:t}=this;return t.rejectMsg(e),this.getState()}async newUnsignedPersonalMessage(e,t){const n=this.personalMessageManager.addUnapprovedMessageAsync(e,t);return this.sendUpdate(),this.opts.showUserConfirmation(),n}async signPersonalMessage(e){_.default.info("MetaMaskController - signPersonalMessage");const t=e.metamaskId;try{const n=await this.personalMessageManager.approveMessage(e),r=await this.keyringController.signPersonalMessage(n);return this.personalMessageManager.setMsgStatusSigned(t,r),this.getState()}catch(e){throw _.default.info("MetaMaskController - eth_personalSign failed",e),this.personalMessageManager.errorMessage(t,e),e}}cancelPersonalMessage(e){return this.personalMessageManager.rejectMsg(e),this.getState()}async newRequestDecryptMessage(e,t){const n=this.decryptMessageManager.addUnapprovedMessageAsync(e,t);return this.sendUpdate(),this.opts.showUserConfirmation(),n}async decryptMessageInline(e){_.default.info("MetaMaskController - decryptMessageInline");const t=e.metamaskId,n=this.decryptMessageManager.getMsg(t);try{const t=(0,v.stripHexPrefix)(e.data),s=r.from(t,"hex");e.data=JSON.parse(s.toString("utf8")),n.rawData=await this.keyringController.decryptMessage(e)}catch(e){n.error=e.message}return this.decryptMessageManager._updateMsg(n),this.getState()}async decryptMessage(e){_.default.info("MetaMaskController - decryptMessage");const t=e.metamaskId;try{const n=await this.decryptMessageManager.approveMessage(e),s=(0,v.stripHexPrefix)(n.data),o=r.from(s,"hex");n.data=JSON.parse(o.toString("utf8"));const i=await this.keyringController.decryptMessage(n);this.decryptMessageManager.setMsgStatusDecrypted(t,i)}catch(e){_.default.info("MetaMaskController - eth_decrypt failed.",e),this.decryptMessageManager.errorMessage(t,e)}return this.getState()}cancelDecryptMessage(e){return this.decryptMessageManager.rejectMsg(e),this.getState()}async newRequestEncryptionPublicKey(e,t){const n=e;switch((await this.keyringController.getKeyringForAccount(n)).type){case D.KEYRING_TYPES.LEDGER:return new Promise(((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))}));case D.KEYRING_TYPES.TREZOR:return new Promise(((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))}));case D.KEYRING_TYPES.LATTICE:return new Promise(((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))}));case D.KEYRING_TYPES.QR:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:{const n=this.encryptionPublicKeyManager.addUnapprovedMessageAsync(e,t);return this.sendUpdate(),this.opts.showUserConfirmation(),n}}}async encryptionPublicKey(e){_.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const n=await this.encryptionPublicKeyManager.approveMessage(e),r=await this.keyringController.getEncryptionPublicKey(n.data);this.encryptionPublicKeyManager.setMsgStatusReceived(t,r)}catch(e){_.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this.encryptionPublicKeyManager.errorMessage(t,e)}return this.getState()}cancelEncryptionPublicKey(e){return this.encryptionPublicKeyManager.rejectMsg(e),this.getState()}newUnsignedTypedMessage(e,t,n){const r=this.typedMessageManager.addUnapprovedMessageAsync(e,t,n);return this.sendUpdate(),this.opts.showUserConfirmation(),r}async signTypedMessage(e){_.default.info("MetaMaskController - eth_signTypedData");const t=e.metamaskId,{version:n}=e;try{const r=await this.typedMessageManager.approveMessage(e);"V1"!==n&&"string"==typeof r.data&&(r.data=JSON.parse(r.data));const s=await this.keyringController.signTypedMessage(r,{version:n});return this.typedMessageManager.setMsgStatusSigned(t,s),this.getState()}catch(e){throw _.default.info("MetaMaskController - eth_signTypedData failed.",e),this.typedMessageManager.errorMessage(t,e),e}}cancelTypedMessage(e){return this.typedMessageManager.rejectMsg(e),this.getState()}async getCurrentAccountEIP1559Compatibility(){return!0}async createCancelTransaction(e,t,n){await this.txController.createCancelTransaction(e,t,n);return await this.getState()}async createSpeedUpTransaction(e,t,n){await this.txController.createSpeedUpTransaction(e,t,n);return await this.getState()}estimateGas(e){return new Promise(((t,n)=>this.txController.txGasUtil.query.estimateGas(e,((e,r)=>e?n(e):t(r.toString(16))))))}markPasswordForgotten(){this.preferencesController.setPasswordForgotten(!0),this.sendUpdate()}unMarkPasswordForgotten(){this.preferencesController.setPasswordForgotten(!1),this.sendUpdate()}setupUntrustedCommunication({connectionStream:e,sender:t,subjectType:n}){const{usePhishDetect:r}=this.preferencesController.store.getState();let s;if(s=n||(t.id&&t.id!==this.extension.runtime.id?L.SUBJECT_TYPES.EXTENSION:L.SUBJECT_TYPES.WEBSITE),t.url){const{hostname:n}=new URL(t.url);if(r&&this.phishingController.test(n))return _.default.debug("MetaMask - sending phishing warning for",n),void this.sendPhishingWarning(e,n)}const o=(0,$.setupMultiplex)(e);this.setupProviderConnection(o.createStream("metamask-provider"),t,s),t.url&&this.setupPublicConfig(o.createStream("publicConfig"))}setupTrustedCommunication(e,t){const n=(0,$.setupMultiplex)(e);this.setupControllerConnection(n.createStream("controller")),this.setupProviderConnection(n.createStream("provider"),t,L.SUBJECT_TYPES.INTERNAL)}sendPhishingWarning(e,t){(0,$.setupMultiplex)(e).createStream("phishing").write({hostname:t})}setupControllerConnection(e){const t=this.getApi();this.activeControllerConnections+=1,this.emit("controllerConnectionChanged",this.activeControllerConnections),e.on("data",(0,ye.default)(t,e));const n=t=>{e._writableState.ended||e.write({jsonrpc:"2.0",method:"sendUpdate",params:[t]})};this.on("update",n),e.on("end",(()=>{this.activeControllerConnections-=1,this.emit("controllerConnectionChanged",this.activeControllerConnections),this.removeListener("update",n)}))}setupProviderConnection(e,t,n){let r,s;r=n===L.SUBJECT_TYPES.INTERNAL?"metamask":new URL(t.url).origin,t.id&&t.id!==this.extension.runtime.id&&this.subjectMetadataController.addSubjectMetadata({origin:r,extensionId:t.id,subjectType:L.SUBJECT_TYPES.EXTENSION}),t.tab&&t.tab.id&&(s=t.tab.id);const o=this.setupProviderEngine({origin:r,sender:t,subjectType:n,tabId:s}),i=(0,f.default)({engine:o}),c=this.addConnection(r,{engine:o});(0,a.default)(e,i,e,(e=>{o._middleware.forEach((e=>{e.destroy&&"function"==typeof e.destroy&&e.destroy()})),c&&this.removeConnection(r,c),e&&_.default.error(e)}))}setupProviderEngine({origin:e,subjectType:t,sender:n,tabId:r}){const s=new l.JsonRpcEngine,{blockTracker:o,provider:i}=this,a=(0,p.default)({provider:i,blockTracker:o}),c=(0,h.default)({provider:i,blockTracker:o});return c.events.on("notification",(e=>s.emit("notification",e))),s.push((0,Q.default)({origin:e})),r&&s.push((0,K.default)({tabId:r})),s.push((0,W.default)({origin:e})),s.push(this.permissionLogController.createMiddleware()),t===L.SUBJECT_TYPES.WEBSITE&&s.push((0,Y.default)({location:n.url,registerOnboarding:this.onboardingController.registerOnboarding})),s.push((0,V.createMethodMiddleware)({origin:e,subjectType:t,addSubjectMetadata:this.subjectMetadataController.addSubjectMetadata.bind(this.subjectMetadataController),getProviderState:this.getProviderState.bind(this),getUnlockPromise:this.appStateController.getUnlockPromise.bind(this.appStateController),handleWatchAssetRequest:this.tokensController.watchAsset.bind(this.tokensController),requestUserApproval:this.approvalController.addAndShowApprovalRequest.bind(this.approvalController),sendMetrics:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getAccounts:this.getPermittedAccounts.bind(this,e),getPermissionsForOrigin:this.permissionController.getPermissions.bind(this.permissionController,e),hasPermission:this.permissionController.hasPermission.bind(this.permissionController,e),requestAccountsPermission:this.permissionController.requestPermissions.bind(this.permissionController,{origin:e},{eth_accounts:{}}),requestPermissionsForOrigin:this.permissionController.requestPermissions.bind(this.permissionController,{origin:e}),addCustomRpc:async({chainId:e,blockExplorerUrl:t,ticker:n,chainName:r,rpcUrl:s}={})=>{await this.preferencesController.addToFrequentRpcList(s,e,n,r,{blockExplorerUrl:t})},findCustomRpcBy:this.findCustomRpcBy.bind(this),getCurrentChainId:this.networkController.getCurrentChainId.bind(this.networkController),setProviderType:this.networkController.setProviderType.bind(this.networkController),updateRpcTarget:({rpcUrl:e,chainId:t,ticker:n,nickname:r})=>{this.networkController.setRpcTarget(e,t,n,r)},getWeb3ShimUsageState:this.alertController.getWeb3ShimUsageState.bind(this.alertController),setWeb3ShimUsageRecorded:this.alertController.setWeb3ShimUsageRecorded.bind(this.alertController)})),s.push(a),s.push(c.middleware),t!==L.SUBJECT_TYPES.INTERNAL&&s.push(this.permissionController.createPermissionMiddleware({origin:e})),s.push((0,m.providerAsMiddleware)(i)),s}setupPublicConfig(e){const t=(0,u.storeAsStream)(this.publicConfigStore);(0,a.default)(t,e,(e=>{t.destroy(),e&&_.default.error(e)}))}addConnection(e,{engine:t}){if("metamask"===e)return null;this.connections[e]||(this.connections[e]={});const n=(0,M.default)();return this.connections[e][n]={engine:t},n}removeConnection(e,t){const n=this.connections[e];n&&(delete n[t],0===Object.keys(n).length&&delete this.connections[e])}removeAllConnections(e){const t=this.connections[e];t&&Object.keys(t).forEach((t=>{this.removeConnection(e,t)}))}notifyConnections(e,t){const n=this.connections[e];n&&Object.values(n).forEach((e=>{e.engine&&e.engine.emit("notification",t)}))}notifyAllConnections(e){const t="function"==typeof e?t=>e(t):()=>e;Object.keys(this.connections).forEach((e=>{Object.values(this.connections[e]).forEach((async n=>{n.engine&&n.engine.emit("notification",await t(e))}))}))}async _onKeyringControllerUpdate(e){const{keyrings:t}=e,n=t.reduce(((e,{accounts:t})=>e.concat(t)),[]);n.length&&(this.preferencesController.syncAddresses(n),this.accountTracker.syncWithAddresses(n))}_onUnlock(){this.notifyAllConnections((async e=>({method:ve.NOTIFICATION_NAMES.unlockStateChanged,params:{isUnlocked:!0,accounts:await this.getPermittedAccounts(e)}}))),this.emit("unlock")}_onLock(){this.notifyAllConnections({method:ve.NOTIFICATION_NAMES.unlockStateChanged,params:{isUnlocked:!1}}),this.emit("lock")}_onStateUpdate(e){this.isClientOpenAndUnlocked=e.isUnlocked&&this._isClientOpen,this.notifyAllConnections({method:ve.NOTIFICATION_NAMES.chainChanged,params:this.getProviderNetworkState(e)})}privateSendUpdate(){this.emit("update",this.getState())}isUnlocked(){return this.keyringController.memStore.getState().isUnlocked}getExternalPendingTransactions(e){return this.smartTransactionsController.getTransactions({addressFrom:e,status:"pending"})}async getPendingNonce(e){const{nonceDetails:t,releaseLock:n}=await this.txController.nonceTracker.getNonceLock(e),r=t.params.highestSuggested;return n(),r}async getNextNonce(e){const t=await this.txController.nonceTracker.getNonceLock(e);return t.releaseLock(),t.nextNonce}async migrateAddressBookState(e,t,n=!1){const{addressBook:r}=this.addressBookController.state;if(r[e])for(const s of Object.keys(r[e])){const o=r[e][s];this.addressBookController.set(s,o.name,t,o.memo),n||this.addressBookController.delete(e,s)}}async updateAndSetCustomRpc(e,t,n="ETH",r,s){return this.networkController.setRpcTarget(e,t,n,r,s),await this.preferencesController.updateRpc({rpcUrl:e,chainId:t,ticker:n,nickname:r,rpcPrefs:s}),e}async setCustomRpc(e,t,n="ETH",r="",s={}){const o=this.preferencesController.getFrequentRpcListDetail().find((t=>e===t.rpcUrl));return o?this.networkController.setRpcTarget(o.rpcUrl,o.chainId,o.ticker,o.nickname,s):(this.networkController.setRpcTarget(e,t,n,r,s),await this.preferencesController.addToFrequentRpcList(e,t,n,r,s)),e}async delCustomRpc(e){await this.preferencesController.removeFromFrequentRpcList(e)}findCustomRpcBy(e){const t=this.preferencesController.getFrequentRpcListDetail();for(const n of t)for(const t of Object.keys(e))if(n[t]===e[t])return n;return null}async initializeThreeBox(){await this.threeBoxController.init()}async setLedgerTransportPreference(e){const t=this.preferencesController.getLedgerTransportPreference(),n=this.preferencesController.setLedgerTransportPreference(e),r=await this.getKeyringForDevice(D.DEVICE_NAMES.LEDGER);return null!=r&&r.updateTransportMethod?r.updateTransportMethod(n).catch((e=>{throw this.preferencesController.setLedgerTransportPreference(t),e})):undefined}recordFirstTimeInfo(e){if(!("firstTimeInfo"in e)){const t=this.platform.getVersion();e.firstTimeInfo={version:t,date:Date.now()}}}set isClientOpen(e){this._isClientOpen=e,this.detectTokensController.isOpen=e}onClientClosed(){try{this.gasFeeController.stopPolling(),this.appStateController.clearPollingTokens()}catch(e){console.error(e)}}onEnvironmentTypeClosed(e){const t=L.POLLING_TOKEN_ENVIRONMENT_TYPES[e];this.appStateController.store.getState()[t].forEach((e=>{this.gasFeeController.disconnectPoller(e),this.appStateController.removePollingToken(e,t)}))}safelistPhishingDomain(e){return this.phishingController.bypass(e)}setLocked(){const[e]=this.keyringController.getKeyringsByType(D.KEYRING_TYPES.TREZOR);return e&&e.dispose(),this.keyringController.setLocked()}}n.default=Ce}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/metamask-controller.js"}],[83,{lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash");var s={version:2,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=2;try{"etherscan"===t.data.config.provider.type&&(t.data.config.provider.type="rpc",t.data.config.provider.rpcTarget="https://rpc.metamask.io/")}catch(e){}return Promise.resolve(t)}};n.default=s}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/002.js"}],[84,{lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash");var s={version:3,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=3;try{"https://rawtestrpc.metamask.io/"===t.data.config.provider.rpcTarget&&(t.data.config.provider.rpcTarget="https://testrpc.metamask.io/")}catch(e){}return Promise.resolve(t)}};n.default=s}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/003.js"}],[85,{lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash");var s={version:4,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=4;try{if("rpc"!==t.data.config.provider.type)return Promise.resolve(t);switch(t.data.config.provider.rpcTarget){case"https://testrpc.metamask.io/":t.data.config.provider={type:"testnet"};break;case"https://rpc.metamask.io/":t.data.config.provider={type:"mainnet"}}}catch(e){}return Promise.resolve(t)}};n.default=s}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/004.js"}],[86,{"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("@babel/runtime/helpers/defineProperty")),o=e("lodash");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={version:5,migrate(e){const t=(0,o.cloneDeep)(e);t.meta.version=5;try{const e=function(e){const{config:t}=e,n=a(a({},e),{},{KeyringController:{vault:e.vault,selectedAccount:t.selectedAccount,walletNicknames:e.walletNicknames}});return delete n.vault,delete n.walletNicknames,delete n.config.selectedAccount,n}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #5${e.stack}`)}return Promise.resolve(t)}};n.default=c}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/005.js"}],[87,{"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("@babel/runtime/helpers/defineProperty")),o=e("lodash");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={version:6,migrate(e){const t=(0,o.cloneDeep)(e);t.meta.version=6;try{const e=function(e){const t=e.KeyringController,n=a(a({},e),{},{PreferencesController:{selectedAddress:t.selectedAccount}});return delete n.KeyringController.selectedAccount,n}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #6${e.stack}`)}return Promise.resolve(t)}};n.default=c}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/006.js"}],[88,{"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("@babel/runtime/helpers/defineProperty")),o=e("lodash");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={version:7,migrate(e){const t=(0,o.cloneDeep)(e);t.meta.version=7;try{const e=function(e){const t=a(a({},e),{},{TransactionManager:{transactions:e.transactions||[],gasMultiplier:e.gasMultiplier||1}});return delete t.transactions,delete t.gasMultiplier,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #7${e.stack}`)}return Promise.resolve(t)}};n.default=c}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/007.js"}],[89,{"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("@babel/runtime/helpers/defineProperty")),o=e("lodash");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={version:8,migrate(e){const t=(0,o.cloneDeep)(e);t.meta.version=8;try{const e=function(e){const t=a(a({},e),{},{NoticeController:{noticesList:e.noticesList||[]}});return delete t.noticesList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #8${e.stack}`)}return Promise.resolve(t)}};n.default=c}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/008.js"}],[9,{"../../../shared/constants/network":6189,"../../../shared/constants/time":6192,"../../../shared/modules/string-utils":6203,"../constants/contracts":4,"@babel/runtime/helpers/interopRequireDefault":195,loglevel:5182,"single-call-balance-checker-abi":5836,web3:6108},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("web3")),o=e("loglevel"),i=r(e("single-call-balance-checker-abi")),a=e("../constants/contracts"),c=e("../../../shared/constants/time"),u=e("../../../shared/constants/network"),l=e("../../../shared/modules/string-utils");const d=3*c.MINUTE;n.default=class{constructor({interval:e=d,preferences:t,network:n,keyringMemStore:r,tokenList:s,tokensController:o}={}){var i,a,c;this.tokensController=o,this.preferences=t,this.interval=e,this.network=n,this.keyringMemStore=r,this.tokenList=s,this.selectedAddress=null===(i=this.preferences)||void 0===i?void 0:i.store.getState().selectedAddress,this.tokenAddresses=null===(a=this.tokensController)||void 0===a?void 0:a.state.tokens.map((e=>e.address)),this.hiddenTokens=null===(c=this.tokensController)||void 0===c?void 0:c.state.ignoredTokens,null==t||t.store.subscribe((({selectedAddress:e,useTokenDetection:t})=>{this.selectedAddress===e&&this.useTokenDetection===t||(this.selectedAddress=e,this.useTokenDetection=t,this.restartTokenDetection())})),null==o||o.subscribe((({tokens:e=[],ignoredTokens:t=[]})=>{this.tokenAddresses=e.map((e=>e.address)),this.hiddenTokens=t}))}async _getTokenBalances(e){const t=this.web3.eth.contract(i.default).at(a.SINGLE_CALL_BALANCES_ADDRESS);return new Promise(((n,r)=>{t.balances([this.selectedAddress],e,((e,t)=>e?r(e):n(t)))}))}async detectNewTokens(){if(!this.isActive)return;const{tokenList:e}=this._tokenList.state;if(this._network.store.getState().provider.chainId!==u.MAINNET_CHAIN_ID||0===Object.keys(e).length)return;const t=[];this.web3.setProvider(this._network._provider);for(const n in e)this.tokenAddresses.find((e=>(0,l.isEqualCaseInsensitive)(e,n)))||this.hiddenTokens.find((e=>(0,l.isEqualCaseInsensitive)(e,n)))||t.push(n);const n=[t.slice(0,1e3),t.slice(1e3,t.length-1)];for(const t of n){let n;try{n=await this._getTokenBalances(t)}catch(e){return void(0,o.warn)("MetaMask - DetectTokensController single call balance fetch failed",e)}const r=t.filter(((e,t)=>{const r=n[t];return r&&!r.isZero()}));await Promise.all(r.map((t=>this.tokensController.addToken(t,e[t].symbol,e[t].decimals))))}}restartTokenDetection(){this.isActive&&this.selectedAddress&&(this.detectNewTokens(),this.interval=d)}set interval(e){this._handle&&clearInterval(this._handle),e&&(this._handle=setInterval((()=>{this.detectNewTokens()}),e))}set network(e){e&&(this._network=e,this.web3=new s.default(e._provider))}set keyringMemStore(e){e&&(this._keyringMemStore=e,this._keyringMemStore.subscribe((({isUnlocked:e})=>{this.isUnlocked!==e&&(this.isUnlocked=e,e&&this.restartTokenDetection())})))}set tokenList(e){e&&(this._tokenList=e)}get isActive(){return this.isOpen&&this.isUnlocked}}}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/controllers/detect-tokens.js"}],[90,{lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash");var s={version:9,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=9;try{const e=function(e){const t=(0,r.merge)({},e,{CurrencyController:{currentCurrency:e.currentFiat||e.fiatCurrency||"USD",conversionRate:e.conversionRate,conversionDate:e.conversionDate}});return delete t.currentFiat,delete t.fiatCurrency,delete t.conversionRate,delete t.conversionDate,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #9${e.stack}`)}return Promise.resolve(t)}};n.default=s}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/009.js"}],[91,{lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash");var s={version:10,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=10;try{const e=function(e){const t=(0,r.merge)({},e,{ShapeShiftController:{shapeShiftTxList:e.shapeShiftTxList||[]}});return delete t.shapeShiftTxList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #10${e.stack}`)}return Promise.resolve(t)}};n.default=s}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/010.js"}],[92,{lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash");var s={version:11,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=11;try{const e=function(e){const t=e;return delete t.TOSHash,delete t.isDisclaimerConfirmed,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #11${e.stack}`)}return Promise.resolve(t)}};n.default=s}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/011.js"}],[93,{lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash");var s={version:12,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=12;try{const e=function(e){const t=e;return t.NoticeController.noticesList.forEach((e=>{e.read&&(e.body="")})),t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #12${e.stack}`)}return Promise.resolve(t)}};n.default=s}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/012.js"}],[94,{lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash");var s={version:13,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=13;try{const e=function(e){const t=e,{config:n}=t;n&&n.provider&&"testnet"===n.provider.type&&(t.config.provider.type="ropsten");return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #13${e.stack}`)}return Promise.resolve(t)}};n.default=s}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/013.js"}],[95,{lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash");var s={version:14,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=14;try{const e=function(e){const t=e;return t.NetworkController={},t.NetworkController.provider=t.config.provider,delete t.config.provider,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #14${e.stack}`)}return Promise.resolve(t)}};n.default=s}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/014.js"}],[96,{"../../../shared/constants/transaction":6193,lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash"),s=e("../../../shared/constants/transaction");var o={version:15,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=15;try{const e=function(e){const t=e,{TransactionController:n}=t;if(n&&n.transactions){const{transactions:e}=n;t.TransactionController.transactions=e.map((e=>e.err?("Gave up submitting tx."===e.err.message&&(e.status=s.TRANSACTION_STATUSES.FAILED),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #15${e.stack}`)}return Promise.resolve(t)}};n.default=o}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/015.js"}],[97,{"../../../shared/constants/transaction":6193,lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash"),s=e("../../../shared/constants/transaction");var o={version:16,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=16;try{const e=function(e){const t=e,{TransactionController:n}=t;if(n&&n.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>e.err?("transaction with the same hash was already imported."===e.err&&(e.status=s.TRANSACTION_STATUSES.SUBMITTED,delete e.err),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #16${e.stack}`)}return Promise.resolve(t)}};n.default=o}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/016.js"}],[98,{"../../../shared/constants/transaction":6193,lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash"),s=e("../../../shared/constants/transaction");var o={version:17,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=17;try{const e=function(e){const t=e,{TransactionController:n}=t;if(n&&n.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(!e.status===s.TRANSACTION_STATUSES.FAILED||e.retryCount>0&&e.retryCount<2&&(e.status=s.TRANSACTION_STATUSES.SUBMITTED,delete e.err),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #17${e.stack}`)}return Promise.resolve(t)}};n.default=o}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/017.js"}],[99,{"../controllers/transactions/lib/tx-state-history-helpers":33,lodash:5172},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("lodash"),s=e("../controllers/transactions/lib/tx-state-history-helpers");var o={version:18,migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:n}=t;if(n&&n.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>{if(!e.history||0===e.history.length){const t=(0,s.snapshotFromTxMeta)(e);return e.history=[t],e}const t=(0,s.migrateFromSnapshotsToDiffs)(e.history).filter((e=>!Array.isArray(e)||e.length>0));return e.history=t,e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}};n.default=o}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/migrations/018.js"}],[3,{"../../shared/constants/app":6184,"../../shared/constants/metametrics":6188,"../../shared/constants/time":6192,"./first-time-state":38,"./lib/createStreamSink":47,"./lib/ens-ipfs/setup":54,"./lib/get-first-preferred-lang-code":56,"./lib/getObjStructure":57,"./lib/local-store":58,"./lib/migrator":61,"./lib/network-store":62,"./lib/notification-manager":63,"./lib/util":81,"./metamask-controller":82,"./migrations":152,"./platforms/extension":153,"@babel/runtime/helpers/defineProperty":189,"@babel/runtime/helpers/interopRequireDefault":195,"@metamask/obs-store":1193,"@sentry/browser":1480,_process:5420,"debounce-stream":2250,"end-of-stream":2338,"eth-rpc-errors":2455,"extension-port-stream":2585,loglevel:5182,pump:5519,"webextension-polyfill":6160},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var n=e("@babel/runtime/helpers/interopRequireDefault"),r=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("end-of-stream")),o=n(e("pump")),i=n(e("debounce-stream")),a=n(e("loglevel")),c=n(e("webextension-polyfill")),u=e("@metamask/obs-store"),l=n(e("extension-port-stream")),d=e("@sentry/browser"),f=e("eth-rpc-errors"),p=e("../../shared/constants/app"),h=e("../../shared/constants/time"),m=e("../../shared/constants/metametrics"),g=n(e("./migrations")),b=n(e("./lib/migrator")),y=n(e("./platforms/extension")),v=n(e("./lib/local-store")),_=n(e("./lib/network-store")),w=n(e("./lib/createStreamSink")),E=A(e("./lib/notification-manager")),k=A(e("./metamask-controller")),C=n(e("./first-time-state")),S=n(e("./lib/get-first-preferred-lang-code")),M=n(e("./lib/getObjStructure")),T=n(e("./lib/ens-ipfs/setup")),O=e("./lib/util");function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}function A(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const{sentry:x}=global,D=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},C.default);a.default.setDefaultLevel(t.env.METAMASK_DEBUG?"debug":"info");const I=new y.default,N=new E.default;global.METAMASK_NOTIFIER=N;let j=!1,U=!1,L=!1;const F={},B={},z=t.env.IN_TEST,q=z?new _.default:new v.default;let G;async function H(){const e=await I.getActiveTabs(),t=Boolean(e.find((e=>F[e.id]))),n=e.length>0&&e[0].extData&&e[0].extData.indexOf("vivaldi_tab")>-1;if(!L&&(n||!j)&&!t){L=!0;try{await N.showPopup()}finally{L=!1}}}async function W(){await H(),await new Promise((e=>{const t=setInterval((()=>{U||(clearInterval(t),e())}),h.SECOND)}))}(z||t.env.METAMASK_DEBUG)&&(global.metamaskGetState=q.get.bind(q)),async function(){const e=await async function(){const e=new b.default({migrations:g.default});e.on("error",console.warn),G=await q.get()||e.generateInitialState(D),G&&!G.data&&(G=e.generateInitialState(D),x.captureMessage("MetaMask - Empty vault found - unable to recover"));if(e.on("error",(e=>{const t=(0,M.default)(G);x.captureException(e,{extra:{vaultStructure:t}})})),G=await e.migrateData(G),!G)throw new Error("MetaMask - migrator returned undefined");q.isSupported?q.set(G):setTimeout((()=>{throw new Error("MetaMask - Localstore not supported")}));return G.data}(),t=await(0,S.default)();await function(e,t){const n=new k.default({infuraProjectId:"ca6ba1082a5845988ab59ad70a8fac5c",showUserConfirmation:H,openPopup:W,initState:e,initLangCode:t,platform:I,notificationManager:N,browser:c.default,getRequestAccountTabIds:()=>B,getOpenMetamaskTabsIds:()=>F});function r(e){return G.data=e,G}(0,T.default)({getCurrentChainId:n.networkController.getCurrentChainId.bind(n.networkController),getIpfsGateway:n.preferencesController.getIpfsGateway.bind(n.preferencesController),provider:n.provider}),(0,o.default)((0,u.storeAsStream)(n.store),(0,i.default)(1e3),(0,u.storeTransformStream)(r),(0,w.default)(g),(e=>{a.default.error("MetaMask - Persistence pipeline failed",e)}));let h=!1;async function g(e){if(!e)throw new Error("MetaMask - updated state is missing");if(!e.data)throw new Error("MetaMask - updated state does not have data");if(q.isSupported)try{await q.set(e),h&&(h=!1)}catch(e){h||(h=!0,(0,d.captureException)(e)),a.default.error("error setting state in local store:",e)}}c.default.runtime.onConnect.addListener(C),c.default.runtime.onConnectExternal.addListener(S);const b={[p.ENVIRONMENT_TYPE_POPUP]:!0,[p.ENVIRONMENT_TYPE_NOTIFICATION]:!0,[p.ENVIRONMENT_TYPE_FULLSCREEN]:!0},y=["trezor-connect"],v=()=>j||Boolean(Object.keys(F).length)||U,_=(e,t)=>{if(!1===e)n.onClientClosed();else{if(t===p.ENVIRONMENT_TYPE_FULLSCREEN&&Boolean(Object.keys(F).length))return;n.onEnvironmentTypeClosed(t)}};function C(e){const t=e.name;if(y.includes(e.name))return;let r=!1;if(r=(0,O.getPlatform)()===p.PLATFORM_FIREFOX?b[t]:e.sender.origin===`chrome-extension://${c.default.runtime.id}`,r){const r=new l.default(e);if(n.isClientOpen=!0,n.setupTrustedCommunication(r,e.sender),t===p.ENVIRONMENT_TYPE_POPUP&&(j=!0,(0,s.default)(r,(()=>{j=!1;const e=v();n.isClientOpen=e,_(e,p.ENVIRONMENT_TYPE_POPUP)}))),t===p.ENVIRONMENT_TYPE_NOTIFICATION&&(U=!0,(0,s.default)(r,(()=>{U=!1;const e=v();n.isClientOpen=e,_(e,p.ENVIRONMENT_TYPE_NOTIFICATION)}))),t===p.ENVIRONMENT_TYPE_FULLSCREEN){const t=e.sender.tab.id;F[t]=!0,(0,s.default)(r,(()=>{delete F[t];const e=v();n.isClientOpen=e,_(e,p.ENVIRONMENT_TYPE_FULLSCREEN)}))}}else{if(e.sender&&e.sender.tab&&e.sender.url){const t=e.sender.tab.id,n=new URL(e.sender.url),{origin:r}=n;e.onMessage.addListener((e=>{e.data&&"eth_requestAccounts"===e.data.method&&(B[r]=t)}))}S(e)}}function S(e){const t=new l.default(e);n.setupUntrustedCommunication({connectionStream:t,sender:e.sender})}function M(){let e="";const t=P();t&&(e=String(t)),c.default.browserAction.setBadgeText({text:e}),c.default.browserAction.setBadgeBackgroundColor({color:"#037DD6"})}function P(){const e=n.txController.getUnapprovedTxCount(),{unapprovedMsgCount:t}=n.messageManager,{unapprovedPersonalMsgCount:r}=n.personalMessageManager,{unapprovedDecryptMsgCount:s}=n.decryptMessageManager,{unapprovedEncryptionPublicKeyMsgCount:o}=n.encryptionPublicKeyManager,{unapprovedTypedMessagesCount:i}=n.typedMessageManager;return e+t+r+s+o+i+n.approvalController.getTotalApprovalCount()+n.appStateController.waitingForUnlock.length}function A(){Object.keys(n.txController.txStateManager.getUnapprovedTxList()).forEach((e=>n.txController.txStateManager.setTxStatusRejected(e))),n.messageManager.messages.filter((e=>"unapproved"===e.status)).forEach((e=>n.messageManager.rejectMsg(e.id,m.REJECT_NOTFICIATION_CLOSE_SIG))),n.personalMessageManager.messages.filter((e=>"unapproved"===e.status)).forEach((e=>n.personalMessageManager.rejectMsg(e.id,m.REJECT_NOTFICIATION_CLOSE_SIG))),n.typedMessageManager.messages.filter((e=>"unapproved"===e.status)).forEach((e=>n.typedMessageManager.rejectMsg(e.id,m.REJECT_NOTFICIATION_CLOSE_SIG))),n.decryptMessageManager.messages.filter((e=>"unapproved"===e.status)).forEach((e=>n.decryptMessageManager.rejectMsg(e.id,m.REJECT_NOTFICIATION_CLOSE))),n.encryptionPublicKeyManager.messages.filter((e=>"unapproved"===e.status)).forEach((e=>n.encryptionPublicKeyManager.rejectMsg(e.id,m.REJECT_NOTFICIATION_CLOSE))),n.approvalController.clear(f.ethErrors.provider.userRejectedRequest()),M()}return M(),n.txController.on(k.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,M),n.messageManager.on(k.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,M),n.personalMessageManager.on(k.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,M),n.decryptMessageManager.on(k.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,M),n.encryptionPublicKeyManager.on(k.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,M),n.typedMessageManager.on(k.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,M),n.appStateController.on(k.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,M),n.controllerMessenger.subscribe(k.METAMASK_CONTROLLER_EVENTS.APPROVAL_STATE_CHANGE,M),N.on(E.NOTIFICATION_MANAGER_EVENTS.POPUP_CLOSED,(({automaticallyClosed:e})=>{e?P()>0&&H():A()})),Promise.resolve()}(e,t),a.default.info("MetaMask initialization complete.")}().catch(a.default.error),c.default.runtime.onInstalled.addListener((({reason:e})=>{"install"!==e||t.env.METAMASK_DEBUG||t.env.IN_TEST||I.openExtensionInBrowser()}))}).call(this)}).call(this,e("_process"))}}},{package:"<root>",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/app/scripts/background.js"}]],[3],{});